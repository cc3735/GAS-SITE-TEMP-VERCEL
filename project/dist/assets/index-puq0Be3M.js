(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var Qe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gm(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var sd={exports:{}},Ki={},id={exports:{}},q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _s=Symbol.for("react.element"),xm=Symbol.for("react.portal"),ym=Symbol.for("react.fragment"),vm=Symbol.for("react.strict_mode"),wm=Symbol.for("react.profiler"),bm=Symbol.for("react.provider"),jm=Symbol.for("react.context"),_m=Symbol.for("react.forward_ref"),Nm=Symbol.for("react.suspense"),km=Symbol.for("react.memo"),Sm=Symbol.for("react.lazy"),_c=Symbol.iterator;function Cm(e){return e===null||typeof e!="object"?null:(e=_c&&e[_c]||e["@@iterator"],typeof e=="function"?e:null)}var ad={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},od=Object.assign,ld={};function mn(e,t,r){this.props=e,this.context=t,this.refs=ld,this.updater=r||ad}mn.prototype.isReactComponent={};mn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};mn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function cd(){}cd.prototype=mn.prototype;function ll(e,t,r){this.props=e,this.context=t,this.refs=ld,this.updater=r||ad}var cl=ll.prototype=new cd;cl.constructor=ll;od(cl,mn.prototype);cl.isPureReactComponent=!0;var Nc=Array.isArray,ud=Object.prototype.hasOwnProperty,ul={current:null},dd={key:!0,ref:!0,__self:!0,__source:!0};function hd(e,t,r){var n,s={},a=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)ud.call(t,n)&&!dd.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:_s,type:e,key:a,ref:o,props:s,_owner:ul.current}}function Em(e,t){return{$$typeof:_s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function dl(e){return typeof e=="object"&&e!==null&&e.$$typeof===_s}function Tm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var kc=/\/+/g;function ya(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Tm(""+e.key):t.toString(36)}function ri(e,t,r,n,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case _s:case xm:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+ya(o,0):n,Nc(s)?(r="",e!=null&&(r=e.replace(kc,"$&/")+"/"),ri(s,t,r,"",function(u){return u})):s!=null&&(dl(s)&&(s=Em(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(kc,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",Nc(e))for(var l=0;l<e.length;l++){a=e[l];var c=n+ya(a,l);o+=ri(a,t,r,c,s)}else if(c=Cm(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=n+ya(a,l++),o+=ri(a,t,r,c,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ls(e,t,r){if(e==null)return e;var n=[],s=0;return ri(e,n,"","",function(a){return t.call(r,a,s++)}),n}function Pm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Pe={current:null},ni={transition:null},Am={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:ni,ReactCurrentOwner:ul};function fd(){throw Error("act(...) is not supported in production builds of React.")}q.Children={map:Ls,forEach:function(e,t,r){Ls(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ls(e,function(){t++}),t},toArray:function(e){return Ls(e,function(t){return t})||[]},only:function(e){if(!dl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};q.Component=mn;q.Fragment=ym;q.Profiler=wm;q.PureComponent=ll;q.StrictMode=vm;q.Suspense=Nm;q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Am;q.act=fd;q.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=od({},e.props),s=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=ul.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)ud.call(t,c)&&!dd.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:_s,type:e.type,key:s,ref:a,props:n,_owner:o}};q.createContext=function(e){return e={$$typeof:jm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:bm,_context:e},e.Consumer=e};q.createElement=hd;q.createFactory=function(e){var t=hd.bind(null,e);return t.type=e,t};q.createRef=function(){return{current:null}};q.forwardRef=function(e){return{$$typeof:_m,render:e}};q.isValidElement=dl;q.lazy=function(e){return{$$typeof:Sm,_payload:{_status:-1,_result:e},_init:Pm}};q.memo=function(e,t){return{$$typeof:km,type:e,compare:t===void 0?null:t}};q.startTransition=function(e){var t=ni.transition;ni.transition={};try{e()}finally{ni.transition=t}};q.unstable_act=fd;q.useCallback=function(e,t){return Pe.current.useCallback(e,t)};q.useContext=function(e){return Pe.current.useContext(e)};q.useDebugValue=function(){};q.useDeferredValue=function(e){return Pe.current.useDeferredValue(e)};q.useEffect=function(e,t){return Pe.current.useEffect(e,t)};q.useId=function(){return Pe.current.useId()};q.useImperativeHandle=function(e,t,r){return Pe.current.useImperativeHandle(e,t,r)};q.useInsertionEffect=function(e,t){return Pe.current.useInsertionEffect(e,t)};q.useLayoutEffect=function(e,t){return Pe.current.useLayoutEffect(e,t)};q.useMemo=function(e,t){return Pe.current.useMemo(e,t)};q.useReducer=function(e,t,r){return Pe.current.useReducer(e,t,r)};q.useRef=function(e){return Pe.current.useRef(e)};q.useState=function(e){return Pe.current.useState(e)};q.useSyncExternalStore=function(e,t,r){return Pe.current.useSyncExternalStore(e,t,r)};q.useTransition=function(){return Pe.current.useTransition()};q.version="18.3.1";id.exports=q;var v=id.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Om=v,Rm=Symbol.for("react.element"),Lm=Symbol.for("react.fragment"),$m=Object.prototype.hasOwnProperty,Im=Om.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mm={key:!0,ref:!0,__self:!0,__source:!0};function md(e,t,r){var n,s={},a=null,o=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)$m.call(t,n)&&!Mm.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Rm,type:e,key:a,ref:o,props:s,_owner:Im.current}}Ki.Fragment=Lm;Ki.jsx=md;Ki.jsxs=md;sd.exports=Ki;var i=sd.exports,pd={exports:{}},He={},gd={exports:{}},xd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,I){var F=A.length;A.push(I);e:for(;0<F;){var Z=F-1>>>1,le=A[Z];if(0<s(le,I))A[Z]=I,A[F]=le,F=Z;else break e}}function r(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var I=A[0],F=A.pop();if(F!==I){A[0]=F;e:for(var Z=0,le=A.length,ft=le>>>1;Z<ft;){var he=2*(Z+1)-1,Pr=A[he],wt=he+1,jn=A[wt];if(0>s(Pr,F))wt<le&&0>s(jn,Pr)?(A[Z]=jn,A[wt]=F,Z=wt):(A[Z]=Pr,A[he]=F,Z=he);else if(wt<le&&0>s(jn,F))A[Z]=jn,A[wt]=F,Z=wt;else break e}}return I}function s(A,I){var F=A.sortIndex-I.sortIndex;return F!==0?F:A.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,y=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(A){for(var I=r(u);I!==null;){if(I.callback===null)n(u);else if(I.startTime<=A)n(u),I.sortIndex=I.expirationTime,t(c,I);else break;I=r(u)}}function j(A){if(w=!1,m(A),!y)if(r(c)!==null)y=!0,V(_);else{var I=r(u);I!==null&&B(j,I.startTime-A)}}function _(A,I){y=!1,w&&(w=!1,g(E),E=-1),p=!0;var F=f;try{for(m(I),h=r(c);h!==null&&(!(h.expirationTime>I)||A&&!U());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,f=h.priorityLevel;var le=Z(h.expirationTime<=I);I=e.unstable_now(),typeof le=="function"?h.callback=le:h===r(c)&&n(c),m(I)}else n(c);h=r(c)}if(h!==null)var ft=!0;else{var he=r(u);he!==null&&B(j,he.startTime-I),ft=!1}return ft}finally{h=null,f=F,p=!1}}var S=!1,T=null,E=-1,O=5,N=-1;function U(){return!(e.unstable_now()-N<O)}function k(){if(T!==null){var A=e.unstable_now();N=A;var I=!0;try{I=T(!0,A)}finally{I?R():(S=!1,T=null)}}else S=!1}var R;if(typeof x=="function")R=function(){x(k)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,L=C.port2;C.port1.onmessage=k,R=function(){L.postMessage(null)}}else R=function(){b(k,0)};function V(A){T=A,S||(S=!0,R())}function B(A,I){E=b(function(){A(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){y||p||(y=!0,V(_))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(A){switch(f){case 1:case 2:case 3:var I=3;break;default:I=f}var F=f;f=I;try{return A()}finally{f=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,I){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var F=f;f=A;try{return I()}finally{f=F}},e.unstable_scheduleCallback=function(A,I,F){var Z=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?Z+F:Z):F=Z,A){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=F+le,A={id:d++,callback:I,priorityLevel:A,startTime:F,expirationTime:le,sortIndex:-1},F>Z?(A.sortIndex=F,t(u,A),r(c)===null&&A===r(u)&&(w?(g(E),E=-1):w=!0,B(j,F-Z))):(A.sortIndex=le,t(c,A),y||p||(y=!0,V(_))),A},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(A){var I=f;return function(){var F=f;f=I;try{return A.apply(this,arguments)}finally{f=F}}}})(xd);gd.exports=xd;var zm=gd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dm=v,We=zm;function P(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yd=new Set,ts={};function Cr(e,t){sn(e,t),sn(e+"Capture",t)}function sn(e,t){for(ts[e]=t,e=0;e<t.length;e++)yd.add(t[e])}var Pt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eo=Object.prototype.hasOwnProperty,Fm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sc={},Cc={};function Um(e){return eo.call(Cc,e)?!0:eo.call(Sc,e)?!1:Fm.test(e)?Cc[e]=!0:(Sc[e]=!0,!1)}function Bm(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Wm(e,t,r,n){if(t===null||typeof t>"u"||Bm(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ae(e,t,r,n,s,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){je[e]=new Ae(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];je[t]=new Ae(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){je[e]=new Ae(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){je[e]=new Ae(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){je[e]=new Ae(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){je[e]=new Ae(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){je[e]=new Ae(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){je[e]=new Ae(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){je[e]=new Ae(e,5,!1,e.toLowerCase(),null,!1,!1)});var hl=/[\-:]([a-z])/g;function fl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(hl,fl);je[t]=new Ae(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(hl,fl);je[t]=new Ae(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(hl,fl);je[t]=new Ae(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){je[e]=new Ae(e,1,!1,e.toLowerCase(),null,!1,!1)});je.xlinkHref=new Ae("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){je[e]=new Ae(e,1,!1,e.toLowerCase(),null,!0,!0)});function ml(e,t,r,n){var s=je.hasOwnProperty(t)?je[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Wm(t,r,s,n)&&(r=null),n||s===null?Um(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var $t=Dm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$s=Symbol.for("react.element"),Fr=Symbol.for("react.portal"),Ur=Symbol.for("react.fragment"),pl=Symbol.for("react.strict_mode"),to=Symbol.for("react.profiler"),vd=Symbol.for("react.provider"),wd=Symbol.for("react.context"),gl=Symbol.for("react.forward_ref"),ro=Symbol.for("react.suspense"),no=Symbol.for("react.suspense_list"),xl=Symbol.for("react.memo"),Ft=Symbol.for("react.lazy"),bd=Symbol.for("react.offscreen"),Ec=Symbol.iterator;function _n(e){return e===null||typeof e!="object"?null:(e=Ec&&e[Ec]||e["@@iterator"],typeof e=="function"?e:null)}var oe=Object.assign,va;function Ln(e){if(va===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);va=t&&t[1]||""}return`
`+va+e}var wa=!1;function ba(e,t){if(!e||wa)return"";wa=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=n.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{wa=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ln(e):""}function Hm(e){switch(e.tag){case 5:return Ln(e.type);case 16:return Ln("Lazy");case 13:return Ln("Suspense");case 19:return Ln("SuspenseList");case 0:case 2:case 15:return e=ba(e.type,!1),e;case 11:return e=ba(e.type.render,!1),e;case 1:return e=ba(e.type,!0),e;default:return""}}function so(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ur:return"Fragment";case Fr:return"Portal";case to:return"Profiler";case pl:return"StrictMode";case ro:return"Suspense";case no:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case wd:return(e.displayName||"Context")+".Consumer";case vd:return(e._context.displayName||"Context")+".Provider";case gl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xl:return t=e.displayName||null,t!==null?t:so(e.type)||"Memo";case Ft:t=e._payload,e=e._init;try{return so(e(t))}catch{}}return null}function qm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return so(t);case 8:return t===pl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function nr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function jd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Vm(e){var t=jd(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Is(e){e._valueTracker||(e._valueTracker=Vm(e))}function _d(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=jd(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function yi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function io(e,t){var r=t.checked;return oe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Tc(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=nr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Nd(e,t){t=t.checked,t!=null&&ml(e,"checked",t,!1)}function ao(e,t){Nd(e,t);var r=nr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?oo(e,t.type,r):t.hasOwnProperty("defaultValue")&&oo(e,t.type,nr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Pc(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function oo(e,t,r){(t!=="number"||yi(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var $n=Array.isArray;function Xr(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+nr(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function lo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(P(91));return oe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ac(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(P(92));if($n(r)){if(1<r.length)throw Error(P(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:nr(r)}}function kd(e,t){var r=nr(t.value),n=nr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Oc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Sd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function co(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Sd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ms,Cd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ms=Ms||document.createElement("div"),Ms.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ms.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function rs(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Fn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Km=["Webkit","ms","Moz","O"];Object.keys(Fn).forEach(function(e){Km.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Fn[t]=Fn[e]})});function Ed(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Fn.hasOwnProperty(e)&&Fn[e]?(""+t).trim():t+"px"}function Td(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Ed(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Gm=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uo(e,t){if(t){if(Gm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(P(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(P(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(P(61))}if(t.style!=null&&typeof t.style!="object")throw Error(P(62))}}function ho(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fo=null;function yl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var mo=null,Zr=null,en=null;function Rc(e){if(e=Ss(e)){if(typeof mo!="function")throw Error(P(280));var t=e.stateNode;t&&(t=Xi(t),mo(e.stateNode,e.type,t))}}function Pd(e){Zr?en?en.push(e):en=[e]:Zr=e}function Ad(){if(Zr){var e=Zr,t=en;if(en=Zr=null,Rc(e),t)for(e=0;e<t.length;e++)Rc(t[e])}}function Od(e,t){return e(t)}function Rd(){}var ja=!1;function Ld(e,t,r){if(ja)return e(t,r);ja=!0;try{return Od(e,t,r)}finally{ja=!1,(Zr!==null||en!==null)&&(Rd(),Ad())}}function ns(e,t){var r=e.stateNode;if(r===null)return null;var n=Xi(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(P(231,t,typeof r));return r}var po=!1;if(Pt)try{var Nn={};Object.defineProperty(Nn,"passive",{get:function(){po=!0}}),window.addEventListener("test",Nn,Nn),window.removeEventListener("test",Nn,Nn)}catch{po=!1}function Jm(e,t,r,n,s,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Un=!1,vi=null,wi=!1,go=null,Qm={onError:function(e){Un=!0,vi=e}};function Ym(e,t,r,n,s,a,o,l,c){Un=!1,vi=null,Jm.apply(Qm,arguments)}function Xm(e,t,r,n,s,a,o,l,c){if(Ym.apply(this,arguments),Un){if(Un){var u=vi;Un=!1,vi=null}else throw Error(P(198));wi||(wi=!0,go=u)}}function Er(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function $d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Lc(e){if(Er(e)!==e)throw Error(P(188))}function Zm(e){var t=e.alternate;if(!t){if(t=Er(e),t===null)throw Error(P(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return Lc(s),e;if(a===n)return Lc(s),t;a=a.sibling}throw Error(P(188))}if(r.return!==n.return)r=s,n=a;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o)throw Error(P(189))}}if(r.alternate!==n)throw Error(P(190))}if(r.tag!==3)throw Error(P(188));return r.stateNode.current===r?e:t}function Id(e){return e=Zm(e),e!==null?Md(e):null}function Md(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Md(e);if(t!==null)return t;e=e.sibling}return null}var zd=We.unstable_scheduleCallback,$c=We.unstable_cancelCallback,ep=We.unstable_shouldYield,tp=We.unstable_requestPaint,ue=We.unstable_now,rp=We.unstable_getCurrentPriorityLevel,vl=We.unstable_ImmediatePriority,Dd=We.unstable_UserBlockingPriority,bi=We.unstable_NormalPriority,np=We.unstable_LowPriority,Fd=We.unstable_IdlePriority,Gi=null,yt=null;function sp(e){if(yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(Gi,e,void 0,(e.current.flags&128)===128)}catch{}}var ot=Math.clz32?Math.clz32:op,ip=Math.log,ap=Math.LN2;function op(e){return e>>>=0,e===0?32:31-(ip(e)/ap|0)|0}var zs=64,Ds=4194304;function In(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ji(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,a=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=In(l):(a&=o,a!==0&&(n=In(a)))}else o=r&~s,o!==0?n=In(o):a!==0&&(n=In(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ot(t),s=1<<r,n|=e[r],t&=~s;return n}function lp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cp(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=lp(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function xo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ud(){var e=zs;return zs<<=1,!(zs&4194240)&&(zs=64),e}function _a(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ns(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ot(t),e[t]=r}function up(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-ot(r),a=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~a}}function wl(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ot(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var J=0;function Bd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Wd,bl,Hd,qd,Vd,yo=!1,Fs=[],Gt=null,Jt=null,Qt=null,ss=new Map,is=new Map,Bt=[],dp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ic(e,t){switch(e){case"focusin":case"focusout":Gt=null;break;case"dragenter":case"dragleave":Jt=null;break;case"mouseover":case"mouseout":Qt=null;break;case"pointerover":case"pointerout":ss.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":is.delete(t.pointerId)}}function kn(e,t,r,n,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},t!==null&&(t=Ss(t),t!==null&&bl(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function hp(e,t,r,n,s){switch(t){case"focusin":return Gt=kn(Gt,e,t,r,n,s),!0;case"dragenter":return Jt=kn(Jt,e,t,r,n,s),!0;case"mouseover":return Qt=kn(Qt,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return ss.set(a,kn(ss.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,is.set(a,kn(is.get(a)||null,e,t,r,n,s)),!0}return!1}function Kd(e){var t=gr(e.target);if(t!==null){var r=Er(t);if(r!==null){if(t=r.tag,t===13){if(t=$d(r),t!==null){e.blockedOn=t,Vd(e.priority,function(){Hd(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function si(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=vo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);fo=n,r.target.dispatchEvent(n),fo=null}else return t=Ss(r),t!==null&&bl(t),e.blockedOn=r,!1;t.shift()}return!0}function Mc(e,t,r){si(e)&&r.delete(t)}function fp(){yo=!1,Gt!==null&&si(Gt)&&(Gt=null),Jt!==null&&si(Jt)&&(Jt=null),Qt!==null&&si(Qt)&&(Qt=null),ss.forEach(Mc),is.forEach(Mc)}function Sn(e,t){e.blockedOn===t&&(e.blockedOn=null,yo||(yo=!0,We.unstable_scheduleCallback(We.unstable_NormalPriority,fp)))}function as(e){function t(s){return Sn(s,e)}if(0<Fs.length){Sn(Fs[0],e);for(var r=1;r<Fs.length;r++){var n=Fs[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Gt!==null&&Sn(Gt,e),Jt!==null&&Sn(Jt,e),Qt!==null&&Sn(Qt,e),ss.forEach(t),is.forEach(t),r=0;r<Bt.length;r++)n=Bt[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Bt.length&&(r=Bt[0],r.blockedOn===null);)Kd(r),r.blockedOn===null&&Bt.shift()}var tn=$t.ReactCurrentBatchConfig,_i=!0;function mp(e,t,r,n){var s=J,a=tn.transition;tn.transition=null;try{J=1,jl(e,t,r,n)}finally{J=s,tn.transition=a}}function pp(e,t,r,n){var s=J,a=tn.transition;tn.transition=null;try{J=4,jl(e,t,r,n)}finally{J=s,tn.transition=a}}function jl(e,t,r,n){if(_i){var s=vo(e,t,r,n);if(s===null)Ra(e,t,n,Ni,r),Ic(e,n);else if(hp(s,e,t,r,n))n.stopPropagation();else if(Ic(e,n),t&4&&-1<dp.indexOf(e)){for(;s!==null;){var a=Ss(s);if(a!==null&&Wd(a),a=vo(e,t,r,n),a===null&&Ra(e,t,n,Ni,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else Ra(e,t,n,null,r)}}var Ni=null;function vo(e,t,r,n){if(Ni=null,e=yl(n),e=gr(e),e!==null)if(t=Er(e),t===null)e=null;else if(r=t.tag,r===13){if(e=$d(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ni=e,null}function Gd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rp()){case vl:return 1;case Dd:return 4;case bi:case np:return 16;case Fd:return 536870912;default:return 16}default:return 16}}var qt=null,_l=null,ii=null;function Jd(){if(ii)return ii;var e,t=_l,r=t.length,n,s="value"in qt?qt.value:qt.textContent,a=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[a-n];n++);return ii=s.slice(e,1<n?1-n:void 0)}function ai(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Us(){return!0}function zc(){return!1}function qe(e){function t(r,n,s,a,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Us:zc,this.isPropagationStopped=zc,this}return oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Us)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Us)},persist:function(){},isPersistent:Us}),t}var pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nl=qe(pn),ks=oe({},pn,{view:0,detail:0}),gp=qe(ks),Na,ka,Cn,Ji=oe({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cn&&(Cn&&e.type==="mousemove"?(Na=e.screenX-Cn.screenX,ka=e.screenY-Cn.screenY):ka=Na=0,Cn=e),Na)},movementY:function(e){return"movementY"in e?e.movementY:ka}}),Dc=qe(Ji),xp=oe({},Ji,{dataTransfer:0}),yp=qe(xp),vp=oe({},ks,{relatedTarget:0}),Sa=qe(vp),wp=oe({},pn,{animationName:0,elapsedTime:0,pseudoElement:0}),bp=qe(wp),jp=oe({},pn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_p=qe(jp),Np=oe({},pn,{data:0}),Fc=qe(Np),kp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ep(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Cp[e])?!!t[e]:!1}function kl(){return Ep}var Tp=oe({},ks,{key:function(e){if(e.key){var t=kp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ai(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Sp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kl,charCode:function(e){return e.type==="keypress"?ai(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ai(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Pp=qe(Tp),Ap=oe({},Ji,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uc=qe(Ap),Op=oe({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kl}),Rp=qe(Op),Lp=oe({},pn,{propertyName:0,elapsedTime:0,pseudoElement:0}),$p=qe(Lp),Ip=oe({},Ji,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mp=qe(Ip),zp=[9,13,27,32],Sl=Pt&&"CompositionEvent"in window,Bn=null;Pt&&"documentMode"in document&&(Bn=document.documentMode);var Dp=Pt&&"TextEvent"in window&&!Bn,Qd=Pt&&(!Sl||Bn&&8<Bn&&11>=Bn),Bc=" ",Wc=!1;function Yd(e,t){switch(e){case"keyup":return zp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Br=!1;function Fp(e,t){switch(e){case"compositionend":return Xd(t);case"keypress":return t.which!==32?null:(Wc=!0,Bc);case"textInput":return e=t.data,e===Bc&&Wc?null:e;default:return null}}function Up(e,t){if(Br)return e==="compositionend"||!Sl&&Yd(e,t)?(e=Jd(),ii=_l=qt=null,Br=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Qd&&t.locale!=="ko"?null:t.data;default:return null}}var Bp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Bp[e.type]:t==="textarea"}function Zd(e,t,r,n){Pd(n),t=ki(t,"onChange"),0<t.length&&(r=new Nl("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Wn=null,os=null;function Wp(e){uh(e,0)}function Qi(e){var t=qr(e);if(_d(t))return e}function Hp(e,t){if(e==="change")return t}var eh=!1;if(Pt){var Ca;if(Pt){var Ea="oninput"in document;if(!Ea){var qc=document.createElement("div");qc.setAttribute("oninput","return;"),Ea=typeof qc.oninput=="function"}Ca=Ea}else Ca=!1;eh=Ca&&(!document.documentMode||9<document.documentMode)}function Vc(){Wn&&(Wn.detachEvent("onpropertychange",th),os=Wn=null)}function th(e){if(e.propertyName==="value"&&Qi(os)){var t=[];Zd(t,os,e,yl(e)),Ld(Wp,t)}}function qp(e,t,r){e==="focusin"?(Vc(),Wn=t,os=r,Wn.attachEvent("onpropertychange",th)):e==="focusout"&&Vc()}function Vp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qi(os)}function Kp(e,t){if(e==="click")return Qi(t)}function Gp(e,t){if(e==="input"||e==="change")return Qi(t)}function Jp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ct=typeof Object.is=="function"?Object.is:Jp;function ls(e,t){if(ct(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!eo.call(t,s)||!ct(e[s],t[s]))return!1}return!0}function Kc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gc(e,t){var r=Kc(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Kc(r)}}function rh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?rh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function nh(){for(var e=window,t=yi();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=yi(e.document)}return t}function Cl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Qp(e){var t=nh(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&rh(r.ownerDocument.documentElement,r)){if(n!==null&&Cl(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=Gc(r,a);var o=Gc(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Yp=Pt&&"documentMode"in document&&11>=document.documentMode,Wr=null,wo=null,Hn=null,bo=!1;function Jc(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;bo||Wr==null||Wr!==yi(n)||(n=Wr,"selectionStart"in n&&Cl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Hn&&ls(Hn,n)||(Hn=n,n=ki(wo,"onSelect"),0<n.length&&(t=new Nl("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Wr)))}function Bs(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Hr={animationend:Bs("Animation","AnimationEnd"),animationiteration:Bs("Animation","AnimationIteration"),animationstart:Bs("Animation","AnimationStart"),transitionend:Bs("Transition","TransitionEnd")},Ta={},sh={};Pt&&(sh=document.createElement("div").style,"AnimationEvent"in window||(delete Hr.animationend.animation,delete Hr.animationiteration.animation,delete Hr.animationstart.animation),"TransitionEvent"in window||delete Hr.transitionend.transition);function Yi(e){if(Ta[e])return Ta[e];if(!Hr[e])return e;var t=Hr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in sh)return Ta[e]=t[r];return e}var ih=Yi("animationend"),ah=Yi("animationiteration"),oh=Yi("animationstart"),lh=Yi("transitionend"),ch=new Map,Qc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ir(e,t){ch.set(e,t),Cr(t,[e])}for(var Pa=0;Pa<Qc.length;Pa++){var Aa=Qc[Pa],Xp=Aa.toLowerCase(),Zp=Aa[0].toUpperCase()+Aa.slice(1);ir(Xp,"on"+Zp)}ir(ih,"onAnimationEnd");ir(ah,"onAnimationIteration");ir(oh,"onAnimationStart");ir("dblclick","onDoubleClick");ir("focusin","onFocus");ir("focusout","onBlur");ir(lh,"onTransitionEnd");sn("onMouseEnter",["mouseout","mouseover"]);sn("onMouseLeave",["mouseout","mouseover"]);sn("onPointerEnter",["pointerout","pointerover"]);sn("onPointerLeave",["pointerout","pointerover"]);Cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mn));function Yc(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Xm(n,t,void 0,e),e.currentTarget=null}function uh(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;Yc(s,l,u),a=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;Yc(s,l,u),a=c}}}if(wi)throw e=go,wi=!1,go=null,e}function ee(e,t){var r=t[So];r===void 0&&(r=t[So]=new Set);var n=e+"__bubble";r.has(n)||(dh(t,e,2,!1),r.add(n))}function Oa(e,t,r){var n=0;t&&(n|=4),dh(r,e,n,t)}var Ws="_reactListening"+Math.random().toString(36).slice(2);function cs(e){if(!e[Ws]){e[Ws]=!0,yd.forEach(function(r){r!=="selectionchange"&&(eg.has(r)||Oa(r,!1,e),Oa(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ws]||(t[Ws]=!0,Oa("selectionchange",!1,t))}}function dh(e,t,r,n){switch(Gd(t)){case 1:var s=mp;break;case 4:s=pp;break;default:s=jl}r=s.bind(null,t,r,e),s=void 0,!po||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Ra(e,t,r,n,s){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=gr(l),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}l=l.parentNode}}n=n.return}Ld(function(){var u=a,d=yl(r),h=[];e:{var f=ch.get(e);if(f!==void 0){var p=Nl,y=e;switch(e){case"keypress":if(ai(r)===0)break e;case"keydown":case"keyup":p=Pp;break;case"focusin":y="focus",p=Sa;break;case"focusout":y="blur",p=Sa;break;case"beforeblur":case"afterblur":p=Sa;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Dc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=yp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Rp;break;case ih:case ah:case oh:p=bp;break;case lh:p=$p;break;case"scroll":p=gp;break;case"wheel":p=Mp;break;case"copy":case"cut":case"paste":p=_p;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Uc}var w=(t&4)!==0,b=!w&&e==="scroll",g=w?f!==null?f+"Capture":null:f;w=[];for(var x=u,m;x!==null;){m=x;var j=m.stateNode;if(m.tag===5&&j!==null&&(m=j,g!==null&&(j=ns(x,g),j!=null&&w.push(us(x,j,m)))),b)break;x=x.return}0<w.length&&(f=new p(f,y,null,r,d),h.push({event:f,listeners:w}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&r!==fo&&(y=r.relatedTarget||r.fromElement)&&(gr(y)||y[At]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(y=r.relatedTarget||r.toElement,p=u,y=y?gr(y):null,y!==null&&(b=Er(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(w=Dc,j="onMouseLeave",g="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(w=Uc,j="onPointerLeave",g="onPointerEnter",x="pointer"),b=p==null?f:qr(p),m=y==null?f:qr(y),f=new w(j,x+"leave",p,r,d),f.target=b,f.relatedTarget=m,j=null,gr(d)===u&&(w=new w(g,x+"enter",y,r,d),w.target=m,w.relatedTarget=b,j=w),b=j,p&&y)t:{for(w=p,g=y,x=0,m=w;m;m=Ar(m))x++;for(m=0,j=g;j;j=Ar(j))m++;for(;0<x-m;)w=Ar(w),x--;for(;0<m-x;)g=Ar(g),m--;for(;x--;){if(w===g||g!==null&&w===g.alternate)break t;w=Ar(w),g=Ar(g)}w=null}else w=null;p!==null&&Xc(h,f,p,w,!1),y!==null&&b!==null&&Xc(h,b,y,w,!0)}}e:{if(f=u?qr(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=Hp;else if(Hc(f))if(eh)_=Gp;else{_=Vp;var S=qp}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=Kp);if(_&&(_=_(e,u))){Zd(h,_,r,d);break e}S&&S(e,f,u),e==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&oo(f,"number",f.value)}switch(S=u?qr(u):window,e){case"focusin":(Hc(S)||S.contentEditable==="true")&&(Wr=S,wo=u,Hn=null);break;case"focusout":Hn=wo=Wr=null;break;case"mousedown":bo=!0;break;case"contextmenu":case"mouseup":case"dragend":bo=!1,Jc(h,r,d);break;case"selectionchange":if(Yp)break;case"keydown":case"keyup":Jc(h,r,d)}var T;if(Sl)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Br?Yd(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(Qd&&r.locale!=="ko"&&(Br||E!=="onCompositionStart"?E==="onCompositionEnd"&&Br&&(T=Jd()):(qt=d,_l="value"in qt?qt.value:qt.textContent,Br=!0)),S=ki(u,E),0<S.length&&(E=new Fc(E,e,null,r,d),h.push({event:E,listeners:S}),T?E.data=T:(T=Xd(r),T!==null&&(E.data=T)))),(T=Dp?Fp(e,r):Up(e,r))&&(u=ki(u,"onBeforeInput"),0<u.length&&(d=new Fc("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=T))}uh(h,t)})}function us(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ki(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=ns(e,r),a!=null&&n.unshift(us(e,a,s)),a=ns(e,t),a!=null&&n.push(us(e,a,s))),e=e.return}return n}function Ar(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Xc(e,t,r,n,s){for(var a=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=ns(r,a),c!=null&&o.unshift(us(r,c,l))):s||(c=ns(r,a),c!=null&&o.push(us(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var tg=/\r\n?/g,rg=/\u0000|\uFFFD/g;function Zc(e){return(typeof e=="string"?e:""+e).replace(tg,`
`).replace(rg,"")}function Hs(e,t,r){if(t=Zc(t),Zc(e)!==t&&r)throw Error(P(425))}function Si(){}var jo=null,_o=null;function No(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ko=typeof setTimeout=="function"?setTimeout:void 0,ng=typeof clearTimeout=="function"?clearTimeout:void 0,eu=typeof Promise=="function"?Promise:void 0,sg=typeof queueMicrotask=="function"?queueMicrotask:typeof eu<"u"?function(e){return eu.resolve(null).then(e).catch(ig)}:ko;function ig(e){setTimeout(function(){throw e})}function La(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),as(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);as(t)}function Yt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function tu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var gn=Math.random().toString(36).slice(2),xt="__reactFiber$"+gn,ds="__reactProps$"+gn,At="__reactContainer$"+gn,So="__reactEvents$"+gn,ag="__reactListeners$"+gn,og="__reactHandles$"+gn;function gr(e){var t=e[xt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[At]||r[xt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=tu(e);e!==null;){if(r=e[xt])return r;e=tu(e)}return t}e=r,r=e.parentNode}return null}function Ss(e){return e=e[xt]||e[At],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function qr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(P(33))}function Xi(e){return e[ds]||null}var Co=[],Vr=-1;function ar(e){return{current:e}}function re(e){0>Vr||(e.current=Co[Vr],Co[Vr]=null,Vr--)}function Y(e,t){Vr++,Co[Vr]=e.current,e.current=t}var sr={},Se=ar(sr),Me=ar(!1),jr=sr;function an(e,t){var r=e.type.contextTypes;if(!r)return sr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ze(e){return e=e.childContextTypes,e!=null}function Ci(){re(Me),re(Se)}function ru(e,t,r){if(Se.current!==sr)throw Error(P(168));Y(Se,t),Y(Me,r)}function hh(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(P(108,qm(e)||"Unknown",s));return oe({},r,n)}function Ei(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||sr,jr=Se.current,Y(Se,e),Y(Me,Me.current),!0}function nu(e,t,r){var n=e.stateNode;if(!n)throw Error(P(169));r?(e=hh(e,t,jr),n.__reactInternalMemoizedMergedChildContext=e,re(Me),re(Se),Y(Se,e)):re(Me),Y(Me,r)}var Nt=null,Zi=!1,$a=!1;function fh(e){Nt===null?Nt=[e]:Nt.push(e)}function lg(e){Zi=!0,fh(e)}function or(){if(!$a&&Nt!==null){$a=!0;var e=0,t=J;try{var r=Nt;for(J=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Nt=null,Zi=!1}catch(s){throw Nt!==null&&(Nt=Nt.slice(e+1)),zd(vl,or),s}finally{J=t,$a=!1}}return null}var Kr=[],Gr=0,Ti=null,Pi=0,Ve=[],Ke=0,_r=null,kt=1,St="";function hr(e,t){Kr[Gr++]=Pi,Kr[Gr++]=Ti,Ti=e,Pi=t}function mh(e,t,r){Ve[Ke++]=kt,Ve[Ke++]=St,Ve[Ke++]=_r,_r=e;var n=kt;e=St;var s=32-ot(n)-1;n&=~(1<<s),r+=1;var a=32-ot(t)+s;if(30<a){var o=s-s%5;a=(n&(1<<o)-1).toString(32),n>>=o,s-=o,kt=1<<32-ot(t)+s|r<<s|n,St=a+e}else kt=1<<a|r<<s|n,St=e}function El(e){e.return!==null&&(hr(e,1),mh(e,1,0))}function Tl(e){for(;e===Ti;)Ti=Kr[--Gr],Kr[Gr]=null,Pi=Kr[--Gr],Kr[Gr]=null;for(;e===_r;)_r=Ve[--Ke],Ve[Ke]=null,St=Ve[--Ke],Ve[Ke]=null,kt=Ve[--Ke],Ve[Ke]=null}var Be=null,Ue=null,ne=!1,at=null;function ph(e,t){var r=Ge(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function su(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Be=e,Ue=Yt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Be=e,Ue=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=_r!==null?{id:kt,overflow:St}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ge(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Be=e,Ue=null,!0):!1;default:return!1}}function Eo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function To(e){if(ne){var t=Ue;if(t){var r=t;if(!su(e,t)){if(Eo(e))throw Error(P(418));t=Yt(r.nextSibling);var n=Be;t&&su(e,t)?ph(n,r):(e.flags=e.flags&-4097|2,ne=!1,Be=e)}}else{if(Eo(e))throw Error(P(418));e.flags=e.flags&-4097|2,ne=!1,Be=e}}}function iu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Be=e}function qs(e){if(e!==Be)return!1;if(!ne)return iu(e),ne=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!No(e.type,e.memoizedProps)),t&&(t=Ue)){if(Eo(e))throw gh(),Error(P(418));for(;t;)ph(e,t),t=Yt(t.nextSibling)}if(iu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(P(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ue=Yt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ue=null}}else Ue=Be?Yt(e.stateNode.nextSibling):null;return!0}function gh(){for(var e=Ue;e;)e=Yt(e.nextSibling)}function on(){Ue=Be=null,ne=!1}function Pl(e){at===null?at=[e]:at.push(e)}var cg=$t.ReactCurrentBatchConfig;function En(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(P(309));var n=r.stateNode}if(!n)throw Error(P(147,e));var s=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(P(284));if(!r._owner)throw Error(P(290,e))}return e}function Vs(e,t){throw e=Object.prototype.toString.call(t),Error(P(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function au(e){var t=e._init;return t(e._payload)}function xh(e){function t(g,x){if(e){var m=g.deletions;m===null?(g.deletions=[x],g.flags|=16):m.push(x)}}function r(g,x){if(!e)return null;for(;x!==null;)t(g,x),x=x.sibling;return null}function n(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function s(g,x){return g=tr(g,x),g.index=0,g.sibling=null,g}function a(g,x,m){return g.index=m,e?(m=g.alternate,m!==null?(m=m.index,m<x?(g.flags|=2,x):m):(g.flags|=2,x)):(g.flags|=1048576,x)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,x,m,j){return x===null||x.tag!==6?(x=Ba(m,g.mode,j),x.return=g,x):(x=s(x,m),x.return=g,x)}function c(g,x,m,j){var _=m.type;return _===Ur?d(g,x,m.props.children,j,m.key):x!==null&&(x.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ft&&au(_)===x.type)?(j=s(x,m.props),j.ref=En(g,x,m),j.return=g,j):(j=fi(m.type,m.key,m.props,null,g.mode,j),j.ref=En(g,x,m),j.return=g,j)}function u(g,x,m,j){return x===null||x.tag!==4||x.stateNode.containerInfo!==m.containerInfo||x.stateNode.implementation!==m.implementation?(x=Wa(m,g.mode,j),x.return=g,x):(x=s(x,m.children||[]),x.return=g,x)}function d(g,x,m,j,_){return x===null||x.tag!==7?(x=wr(m,g.mode,j,_),x.return=g,x):(x=s(x,m),x.return=g,x)}function h(g,x,m){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Ba(""+x,g.mode,m),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case $s:return m=fi(x.type,x.key,x.props,null,g.mode,m),m.ref=En(g,null,x),m.return=g,m;case Fr:return x=Wa(x,g.mode,m),x.return=g,x;case Ft:var j=x._init;return h(g,j(x._payload),m)}if($n(x)||_n(x))return x=wr(x,g.mode,m,null),x.return=g,x;Vs(g,x)}return null}function f(g,x,m,j){var _=x!==null?x.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return _!==null?null:l(g,x,""+m,j);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case $s:return m.key===_?c(g,x,m,j):null;case Fr:return m.key===_?u(g,x,m,j):null;case Ft:return _=m._init,f(g,x,_(m._payload),j)}if($n(m)||_n(m))return _!==null?null:d(g,x,m,j,null);Vs(g,m)}return null}function p(g,x,m,j,_){if(typeof j=="string"&&j!==""||typeof j=="number")return g=g.get(m)||null,l(x,g,""+j,_);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case $s:return g=g.get(j.key===null?m:j.key)||null,c(x,g,j,_);case Fr:return g=g.get(j.key===null?m:j.key)||null,u(x,g,j,_);case Ft:var S=j._init;return p(g,x,m,S(j._payload),_)}if($n(j)||_n(j))return g=g.get(m)||null,d(x,g,j,_,null);Vs(x,j)}return null}function y(g,x,m,j){for(var _=null,S=null,T=x,E=x=0,O=null;T!==null&&E<m.length;E++){T.index>E?(O=T,T=null):O=T.sibling;var N=f(g,T,m[E],j);if(N===null){T===null&&(T=O);break}e&&T&&N.alternate===null&&t(g,T),x=a(N,x,E),S===null?_=N:S.sibling=N,S=N,T=O}if(E===m.length)return r(g,T),ne&&hr(g,E),_;if(T===null){for(;E<m.length;E++)T=h(g,m[E],j),T!==null&&(x=a(T,x,E),S===null?_=T:S.sibling=T,S=T);return ne&&hr(g,E),_}for(T=n(g,T);E<m.length;E++)O=p(T,g,E,m[E],j),O!==null&&(e&&O.alternate!==null&&T.delete(O.key===null?E:O.key),x=a(O,x,E),S===null?_=O:S.sibling=O,S=O);return e&&T.forEach(function(U){return t(g,U)}),ne&&hr(g,E),_}function w(g,x,m,j){var _=_n(m);if(typeof _!="function")throw Error(P(150));if(m=_.call(m),m==null)throw Error(P(151));for(var S=_=null,T=x,E=x=0,O=null,N=m.next();T!==null&&!N.done;E++,N=m.next()){T.index>E?(O=T,T=null):O=T.sibling;var U=f(g,T,N.value,j);if(U===null){T===null&&(T=O);break}e&&T&&U.alternate===null&&t(g,T),x=a(U,x,E),S===null?_=U:S.sibling=U,S=U,T=O}if(N.done)return r(g,T),ne&&hr(g,E),_;if(T===null){for(;!N.done;E++,N=m.next())N=h(g,N.value,j),N!==null&&(x=a(N,x,E),S===null?_=N:S.sibling=N,S=N);return ne&&hr(g,E),_}for(T=n(g,T);!N.done;E++,N=m.next())N=p(T,g,E,N.value,j),N!==null&&(e&&N.alternate!==null&&T.delete(N.key===null?E:N.key),x=a(N,x,E),S===null?_=N:S.sibling=N,S=N);return e&&T.forEach(function(k){return t(g,k)}),ne&&hr(g,E),_}function b(g,x,m,j){if(typeof m=="object"&&m!==null&&m.type===Ur&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case $s:e:{for(var _=m.key,S=x;S!==null;){if(S.key===_){if(_=m.type,_===Ur){if(S.tag===7){r(g,S.sibling),x=s(S,m.props.children),x.return=g,g=x;break e}}else if(S.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ft&&au(_)===S.type){r(g,S.sibling),x=s(S,m.props),x.ref=En(g,S,m),x.return=g,g=x;break e}r(g,S);break}else t(g,S);S=S.sibling}m.type===Ur?(x=wr(m.props.children,g.mode,j,m.key),x.return=g,g=x):(j=fi(m.type,m.key,m.props,null,g.mode,j),j.ref=En(g,x,m),j.return=g,g=j)}return o(g);case Fr:e:{for(S=m.key;x!==null;){if(x.key===S)if(x.tag===4&&x.stateNode.containerInfo===m.containerInfo&&x.stateNode.implementation===m.implementation){r(g,x.sibling),x=s(x,m.children||[]),x.return=g,g=x;break e}else{r(g,x);break}else t(g,x);x=x.sibling}x=Wa(m,g.mode,j),x.return=g,g=x}return o(g);case Ft:return S=m._init,b(g,x,S(m._payload),j)}if($n(m))return y(g,x,m,j);if(_n(m))return w(g,x,m,j);Vs(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,x!==null&&x.tag===6?(r(g,x.sibling),x=s(x,m),x.return=g,g=x):(r(g,x),x=Ba(m,g.mode,j),x.return=g,g=x),o(g)):r(g,x)}return b}var ln=xh(!0),yh=xh(!1),Ai=ar(null),Oi=null,Jr=null,Al=null;function Ol(){Al=Jr=Oi=null}function Rl(e){var t=Ai.current;re(Ai),e._currentValue=t}function Po(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function rn(e,t){Oi=e,Al=Jr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&($e=!0),e.firstContext=null)}function Ye(e){var t=e._currentValue;if(Al!==e)if(e={context:e,memoizedValue:t,next:null},Jr===null){if(Oi===null)throw Error(P(308));Jr=e,Oi.dependencies={lanes:0,firstContext:e}}else Jr=Jr.next=e;return t}var xr=null;function Ll(e){xr===null?xr=[e]:xr.push(e)}function vh(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Ll(t)):(r.next=s.next,s.next=r),t.interleaved=r,Ot(e,n)}function Ot(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ut=!1;function $l(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ct(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xt(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,K&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Ot(e,r)}return s=n.interleaved,s===null?(t.next=t,Ll(n)):(t.next=s.next,s.next=t),n.interleaved=t,Ot(e,r)}function oi(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,wl(e,r)}}function ou(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?s=a=t:a=a.next=t}else s=a=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ri(e,t,r,n){var s=e.updateQueue;Ut=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var h=s.baseState;o=0,d=u=c=null,l=a;do{var f=l.lane,p=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,w=l;switch(f=t,p=r,w.tag){case 1:if(y=w.payload,typeof y=="function"){h=y.call(p,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,f=typeof y=="function"?y.call(p,h,f):y,f==null)break e;h=oe({},h,f);break e;case 2:Ut=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);kr|=o,e.lanes=o,e.memoizedState=h}}function lu(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(P(191,s));s.call(n)}}}var Cs={},vt=ar(Cs),hs=ar(Cs),fs=ar(Cs);function yr(e){if(e===Cs)throw Error(P(174));return e}function Il(e,t){switch(Y(fs,t),Y(hs,e),Y(vt,Cs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:co(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=co(t,e)}re(vt),Y(vt,t)}function cn(){re(vt),re(hs),re(fs)}function bh(e){yr(fs.current);var t=yr(vt.current),r=co(t,e.type);t!==r&&(Y(hs,e),Y(vt,r))}function Ml(e){hs.current===e&&(re(vt),re(hs))}var ie=ar(0);function Li(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ia=[];function zl(){for(var e=0;e<Ia.length;e++)Ia[e]._workInProgressVersionPrimary=null;Ia.length=0}var li=$t.ReactCurrentDispatcher,Ma=$t.ReactCurrentBatchConfig,Nr=0,ae=null,pe=null,xe=null,$i=!1,qn=!1,ms=0,ug=0;function _e(){throw Error(P(321))}function Dl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ct(e[r],t[r]))return!1;return!0}function Fl(e,t,r,n,s,a){if(Nr=a,ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,li.current=e===null||e.memoizedState===null?mg:pg,e=r(n,s),qn){a=0;do{if(qn=!1,ms=0,25<=a)throw Error(P(301));a+=1,xe=pe=null,t.updateQueue=null,li.current=gg,e=r(n,s)}while(qn)}if(li.current=Ii,t=pe!==null&&pe.next!==null,Nr=0,xe=pe=ae=null,$i=!1,t)throw Error(P(300));return e}function Ul(){var e=ms!==0;return ms=0,e}function pt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?ae.memoizedState=xe=e:xe=xe.next=e,xe}function Xe(){if(pe===null){var e=ae.alternate;e=e!==null?e.memoizedState:null}else e=pe.next;var t=xe===null?ae.memoizedState:xe.next;if(t!==null)xe=t,pe=e;else{if(e===null)throw Error(P(310));pe=e,e={memoizedState:pe.memoizedState,baseState:pe.baseState,baseQueue:pe.baseQueue,queue:pe.queue,next:null},xe===null?ae.memoizedState=xe=e:xe=xe.next=e}return xe}function ps(e,t){return typeof t=="function"?t(e):t}function za(e){var t=Xe(),r=t.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=e;var n=pe,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((Nr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,ae.lanes|=d,kr|=d}u=u.next}while(u!==null&&u!==a);c===null?o=n:c.next=l,ct(n,t.memoizedState)||($e=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do a=s.lane,ae.lanes|=a,kr|=a,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Da(e){var t=Xe(),r=t.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,a=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do a=e(a,o.action),o=o.next;while(o!==s);ct(a,t.memoizedState)||($e=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function jh(){}function _h(e,t){var r=ae,n=Xe(),s=t(),a=!ct(n.memoizedState,s);if(a&&(n.memoizedState=s,$e=!0),n=n.queue,Bl(Sh.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||xe!==null&&xe.memoizedState.tag&1){if(r.flags|=2048,gs(9,kh.bind(null,r,n,s,t),void 0,null),ye===null)throw Error(P(349));Nr&30||Nh(r,t,s)}return s}function Nh(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ae.updateQueue,t===null?(t={lastEffect:null,stores:null},ae.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function kh(e,t,r,n){t.value=r,t.getSnapshot=n,Ch(t)&&Eh(e)}function Sh(e,t,r){return r(function(){Ch(t)&&Eh(e)})}function Ch(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ct(e,r)}catch{return!0}}function Eh(e){var t=Ot(e,1);t!==null&&lt(t,e,1,-1)}function cu(e){var t=pt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:e},t.queue=e,e=e.dispatch=fg.bind(null,ae,e),[t.memoizedState,e]}function gs(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ae.updateQueue,t===null?(t={lastEffect:null,stores:null},ae.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Th(){return Xe().memoizedState}function ci(e,t,r,n){var s=pt();ae.flags|=e,s.memoizedState=gs(1|t,r,void 0,n===void 0?null:n)}function ea(e,t,r,n){var s=Xe();n=n===void 0?null:n;var a=void 0;if(pe!==null){var o=pe.memoizedState;if(a=o.destroy,n!==null&&Dl(n,o.deps)){s.memoizedState=gs(t,r,a,n);return}}ae.flags|=e,s.memoizedState=gs(1|t,r,a,n)}function uu(e,t){return ci(8390656,8,e,t)}function Bl(e,t){return ea(2048,8,e,t)}function Ph(e,t){return ea(4,2,e,t)}function Ah(e,t){return ea(4,4,e,t)}function Oh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Rh(e,t,r){return r=r!=null?r.concat([e]):null,ea(4,4,Oh.bind(null,t,e),r)}function Wl(){}function Lh(e,t){var r=Xe();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Dl(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function $h(e,t){var r=Xe();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Dl(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Ih(e,t,r){return Nr&21?(ct(r,t)||(r=Ud(),ae.lanes|=r,kr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,$e=!0),e.memoizedState=r)}function dg(e,t){var r=J;J=r!==0&&4>r?r:4,e(!0);var n=Ma.transition;Ma.transition={};try{e(!1),t()}finally{J=r,Ma.transition=n}}function Mh(){return Xe().memoizedState}function hg(e,t,r){var n=er(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},zh(e))Dh(t,r);else if(r=vh(e,t,r,n),r!==null){var s=Te();lt(r,e,n,s),Fh(r,t,n)}}function fg(e,t,r){var n=er(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(zh(e))Dh(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,r);if(s.hasEagerState=!0,s.eagerState=l,ct(l,o)){var c=t.interleaved;c===null?(s.next=s,Ll(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=vh(e,t,s,n),r!==null&&(s=Te(),lt(r,e,n,s),Fh(r,t,n))}}function zh(e){var t=e.alternate;return e===ae||t!==null&&t===ae}function Dh(e,t){qn=$i=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Fh(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,wl(e,r)}}var Ii={readContext:Ye,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useInsertionEffect:_e,useLayoutEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useMutableSource:_e,useSyncExternalStore:_e,useId:_e,unstable_isNewReconciler:!1},mg={readContext:Ye,useCallback:function(e,t){return pt().memoizedState=[e,t===void 0?null:t],e},useContext:Ye,useEffect:uu,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ci(4194308,4,Oh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ci(4194308,4,e,t)},useInsertionEffect:function(e,t){return ci(4,2,e,t)},useMemo:function(e,t){var r=pt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=pt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=hg.bind(null,ae,e),[n.memoizedState,e]},useRef:function(e){var t=pt();return e={current:e},t.memoizedState=e},useState:cu,useDebugValue:Wl,useDeferredValue:function(e){return pt().memoizedState=e},useTransition:function(){var e=cu(!1),t=e[0];return e=dg.bind(null,e[1]),pt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ae,s=pt();if(ne){if(r===void 0)throw Error(P(407));r=r()}else{if(r=t(),ye===null)throw Error(P(349));Nr&30||Nh(n,t,r)}s.memoizedState=r;var a={value:r,getSnapshot:t};return s.queue=a,uu(Sh.bind(null,n,a,e),[e]),n.flags|=2048,gs(9,kh.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=pt(),t=ye.identifierPrefix;if(ne){var r=St,n=kt;r=(n&~(1<<32-ot(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ms++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=ug++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},pg={readContext:Ye,useCallback:Lh,useContext:Ye,useEffect:Bl,useImperativeHandle:Rh,useInsertionEffect:Ph,useLayoutEffect:Ah,useMemo:$h,useReducer:za,useRef:Th,useState:function(){return za(ps)},useDebugValue:Wl,useDeferredValue:function(e){var t=Xe();return Ih(t,pe.memoizedState,e)},useTransition:function(){var e=za(ps)[0],t=Xe().memoizedState;return[e,t]},useMutableSource:jh,useSyncExternalStore:_h,useId:Mh,unstable_isNewReconciler:!1},gg={readContext:Ye,useCallback:Lh,useContext:Ye,useEffect:Bl,useImperativeHandle:Rh,useInsertionEffect:Ph,useLayoutEffect:Ah,useMemo:$h,useReducer:Da,useRef:Th,useState:function(){return Da(ps)},useDebugValue:Wl,useDeferredValue:function(e){var t=Xe();return pe===null?t.memoizedState=e:Ih(t,pe.memoizedState,e)},useTransition:function(){var e=Da(ps)[0],t=Xe().memoizedState;return[e,t]},useMutableSource:jh,useSyncExternalStore:_h,useId:Mh,unstable_isNewReconciler:!1};function nt(e,t){if(e&&e.defaultProps){t=oe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ao(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:oe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ta={isMounted:function(e){return(e=e._reactInternals)?Er(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Te(),s=er(e),a=Ct(n,s);a.payload=t,r!=null&&(a.callback=r),t=Xt(e,a,s),t!==null&&(lt(t,e,s,n),oi(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Te(),s=er(e),a=Ct(n,s);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Xt(e,a,s),t!==null&&(lt(t,e,s,n),oi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Te(),n=er(e),s=Ct(r,n);s.tag=2,t!=null&&(s.callback=t),t=Xt(e,s,n),t!==null&&(lt(t,e,n,r),oi(t,e,n))}};function du(e,t,r,n,s,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,o):t.prototype&&t.prototype.isPureReactComponent?!ls(r,n)||!ls(s,a):!0}function Uh(e,t,r){var n=!1,s=sr,a=t.contextType;return typeof a=="object"&&a!==null?a=Ye(a):(s=ze(t)?jr:Se.current,n=t.contextTypes,a=(n=n!=null)?an(e,s):sr),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ta,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function hu(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ta.enqueueReplaceState(t,t.state,null)}function Oo(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},$l(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=Ye(a):(a=ze(t)?jr:Se.current,s.context=an(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Ao(e,t,a,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ta.enqueueReplaceState(s,s.state,null),Ri(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function un(e,t){try{var r="",n=t;do r+=Hm(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function Fa(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ro(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var xg=typeof WeakMap=="function"?WeakMap:Map;function Bh(e,t,r){r=Ct(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){zi||(zi=!0,Wo=n),Ro(e,t)},r}function Wh(e,t,r){r=Ct(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Ro(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Ro(e,t),typeof n!="function"&&(Zt===null?Zt=new Set([this]):Zt.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function fu(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new xg;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=Ag.bind(null,e,t,r),t.then(e,e))}function mu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function pu(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ct(-1,1),t.tag=2,Xt(r,t,1))),r.lanes|=1),e)}var yg=$t.ReactCurrentOwner,$e=!1;function Ee(e,t,r,n){t.child=e===null?yh(t,null,r,n):ln(t,e.child,r,n)}function gu(e,t,r,n,s){r=r.render;var a=t.ref;return rn(t,s),n=Fl(e,t,r,n,a,s),r=Ul(),e!==null&&!$e?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Rt(e,t,s)):(ne&&r&&El(t),t.flags|=1,Ee(e,t,n,s),t.child)}function xu(e,t,r,n,s){if(e===null){var a=r.type;return typeof a=="function"&&!Yl(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Hh(e,t,a,n,s)):(e=fi(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:ls,r(o,n)&&e.ref===t.ref)return Rt(e,t,s)}return t.flags|=1,e=tr(a,n),e.ref=t.ref,e.return=t,t.child=e}function Hh(e,t,r,n,s){if(e!==null){var a=e.memoizedProps;if(ls(a,n)&&e.ref===t.ref)if($e=!1,t.pendingProps=n=a,(e.lanes&s)!==0)e.flags&131072&&($e=!0);else return t.lanes=e.lanes,Rt(e,t,s)}return Lo(e,t,r,n,s)}function qh(e,t,r){var n=t.pendingProps,s=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Y(Yr,Fe),Fe|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Y(Yr,Fe),Fe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Y(Yr,Fe),Fe|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,Y(Yr,Fe),Fe|=n;return Ee(e,t,s,r),t.child}function Vh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Lo(e,t,r,n,s){var a=ze(r)?jr:Se.current;return a=an(t,a),rn(t,s),r=Fl(e,t,r,n,a,s),n=Ul(),e!==null&&!$e?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Rt(e,t,s)):(ne&&n&&El(t),t.flags|=1,Ee(e,t,r,s),t.child)}function yu(e,t,r,n,s){if(ze(r)){var a=!0;Ei(t)}else a=!1;if(rn(t,s),t.stateNode===null)ui(e,t),Uh(t,r,n),Oo(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ye(u):(u=ze(r)?jr:Se.current,u=an(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&hu(t,o,n,u),Ut=!1;var f=t.memoizedState;o.state=f,Ri(t,n,o,s),c=t.memoizedState,l!==n||f!==c||Me.current||Ut?(typeof d=="function"&&(Ao(t,r,d,n),c=t.memoizedState),(l=Ut||du(t,r,l,n,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,wh(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:nt(t.type,l),o.props=u,h=t.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ye(c):(c=ze(r)?jr:Se.current,c=an(t,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&hu(t,o,n,c),Ut=!1,f=t.memoizedState,o.state=f,Ri(t,n,o,s);var y=t.memoizedState;l!==h||f!==y||Me.current||Ut?(typeof p=="function"&&(Ao(t,r,p,n),y=t.memoizedState),(u=Ut||du(t,r,u,n,f,y,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),o.props=n,o.state=y,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return $o(e,t,r,n,a,s)}function $o(e,t,r,n,s,a){Vh(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&nu(t,r,!1),Rt(e,t,a);n=t.stateNode,yg.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=ln(t,e.child,null,a),t.child=ln(t,null,l,a)):Ee(e,t,l,a),t.memoizedState=n.state,s&&nu(t,r,!0),t.child}function Kh(e){var t=e.stateNode;t.pendingContext?ru(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ru(e,t.context,!1),Il(e,t.containerInfo)}function vu(e,t,r,n,s){return on(),Pl(s),t.flags|=256,Ee(e,t,r,n),t.child}var Io={dehydrated:null,treeContext:null,retryLane:0};function Mo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Gh(e,t,r){var n=t.pendingProps,s=ie.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Y(ie,s&1),e===null)return To(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,a?(n=t.mode,a=t.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=sa(o,n,0,null),e=wr(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Mo(r),t.memoizedState=Io,e):Hl(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return vg(e,t,o,n,l,s,r);if(a){a=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=tr(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=tr(l,a):(a=wr(a,o,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,o=e.child.memoizedState,o=o===null?Mo(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~r,t.memoizedState=Io,n}return a=e.child,e=a.sibling,n=tr(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Hl(e,t){return t=sa({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ks(e,t,r,n){return n!==null&&Pl(n),ln(t,e.child,null,r),e=Hl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function vg(e,t,r,n,s,a,o){if(r)return t.flags&256?(t.flags&=-257,n=Fa(Error(P(422))),Ks(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,s=t.mode,n=sa({mode:"visible",children:n.children},s,0,null),a=wr(a,s,o,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&ln(t,e.child,null,o),t.child.memoizedState=Mo(o),t.memoizedState=Io,a);if(!(t.mode&1))return Ks(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(P(419)),n=Fa(a,n,void 0),Ks(e,t,o,n)}if(l=(o&e.childLanes)!==0,$e||l){if(n=ye,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Ot(e,s),lt(n,e,s,-1))}return Ql(),n=Fa(Error(P(421))),Ks(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Og.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,Ue=Yt(s.nextSibling),Be=t,ne=!0,at=null,e!==null&&(Ve[Ke++]=kt,Ve[Ke++]=St,Ve[Ke++]=_r,kt=e.id,St=e.overflow,_r=t),t=Hl(t,n.children),t.flags|=4096,t)}function wu(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Po(e.return,t,r)}function Ua(e,t,r,n,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function Jh(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(Ee(e,t,n.children,r),n=ie.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wu(e,r,t);else if(e.tag===19)wu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Y(ie,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Li(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Ua(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Li(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Ua(t,!0,r,null,a);break;case"together":Ua(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ui(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Rt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),kr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(P(153));if(t.child!==null){for(e=t.child,r=tr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=tr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function wg(e,t,r){switch(t.tag){case 3:Kh(t),on();break;case 5:bh(t);break;case 1:ze(t.type)&&Ei(t);break;case 4:Il(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Y(Ai,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Y(ie,ie.current&1),t.flags|=128,null):r&t.child.childLanes?Gh(e,t,r):(Y(ie,ie.current&1),e=Rt(e,t,r),e!==null?e.sibling:null);Y(ie,ie.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Jh(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Y(ie,ie.current),n)break;return null;case 22:case 23:return t.lanes=0,qh(e,t,r)}return Rt(e,t,r)}var Qh,zo,Yh,Xh;Qh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};zo=function(){};Yh=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,yr(vt.current);var a=null;switch(r){case"input":s=io(e,s),n=io(e,n),a=[];break;case"select":s=oe({},s,{value:void 0}),n=oe({},n,{value:void 0}),a=[];break;case"textarea":s=lo(e,s),n=lo(e,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Si)}uo(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ts.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ts.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ee("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};Xh=function(e,t,r,n){r!==n&&(t.flags|=4)};function Tn(e,t){if(!ne)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ne(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function bg(e,t,r){var n=t.pendingProps;switch(Tl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(t),null;case 1:return ze(t.type)&&Ci(),Ne(t),null;case 3:return n=t.stateNode,cn(),re(Me),re(Se),zl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(qs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,at!==null&&(Vo(at),at=null))),zo(e,t),Ne(t),null;case 5:Ml(t);var s=yr(fs.current);if(r=t.type,e!==null&&t.stateNode!=null)Yh(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(P(166));return Ne(t),null}if(e=yr(vt.current),qs(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[xt]=t,n[ds]=a,e=(t.mode&1)!==0,r){case"dialog":ee("cancel",n),ee("close",n);break;case"iframe":case"object":case"embed":ee("load",n);break;case"video":case"audio":for(s=0;s<Mn.length;s++)ee(Mn[s],n);break;case"source":ee("error",n);break;case"img":case"image":case"link":ee("error",n),ee("load",n);break;case"details":ee("toggle",n);break;case"input":Tc(n,a),ee("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},ee("invalid",n);break;case"textarea":Ac(n,a),ee("invalid",n)}uo(r,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&Hs(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Hs(n.textContent,l,e),s=["children",""+l]):ts.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ee("scroll",n)}switch(r){case"input":Is(n),Pc(n,a,!0);break;case"textarea":Is(n),Oc(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Si)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Sd(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[xt]=t,e[ds]=n,Qh(e,t,!1,!1),t.stateNode=e;e:{switch(o=ho(r,n),r){case"dialog":ee("cancel",e),ee("close",e),s=n;break;case"iframe":case"object":case"embed":ee("load",e),s=n;break;case"video":case"audio":for(s=0;s<Mn.length;s++)ee(Mn[s],e);s=n;break;case"source":ee("error",e),s=n;break;case"img":case"image":case"link":ee("error",e),ee("load",e),s=n;break;case"details":ee("toggle",e),s=n;break;case"input":Tc(e,n),s=io(e,n),ee("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=oe({},n,{value:void 0}),ee("invalid",e);break;case"textarea":Ac(e,n),s=lo(e,n),ee("invalid",e);break;default:s=n}uo(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?Td(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Cd(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&rs(e,c):typeof c=="number"&&rs(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ts.hasOwnProperty(a)?c!=null&&a==="onScroll"&&ee("scroll",e):c!=null&&ml(e,a,c,o))}switch(r){case"input":Is(e),Pc(e,n,!1);break;case"textarea":Is(e),Oc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+nr(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Xr(e,!!n.multiple,a,!1):n.defaultValue!=null&&Xr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Si)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ne(t),null;case 6:if(e&&t.stateNode!=null)Xh(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(P(166));if(r=yr(fs.current),yr(vt.current),qs(t)){if(n=t.stateNode,r=t.memoizedProps,n[xt]=t,(a=n.nodeValue!==r)&&(e=Be,e!==null))switch(e.tag){case 3:Hs(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Hs(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[xt]=t,t.stateNode=n}return Ne(t),null;case 13:if(re(ie),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ne&&Ue!==null&&t.mode&1&&!(t.flags&128))gh(),on(),t.flags|=98560,a=!1;else if(a=qs(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(P(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(P(317));a[xt]=t}else on(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ne(t),a=!1}else at!==null&&(Vo(at),at=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ie.current&1?ge===0&&(ge=3):Ql())),t.updateQueue!==null&&(t.flags|=4),Ne(t),null);case 4:return cn(),zo(e,t),e===null&&cs(t.stateNode.containerInfo),Ne(t),null;case 10:return Rl(t.type._context),Ne(t),null;case 17:return ze(t.type)&&Ci(),Ne(t),null;case 19:if(re(ie),a=t.memoizedState,a===null)return Ne(t),null;if(n=(t.flags&128)!==0,o=a.rendering,o===null)if(n)Tn(a,!1);else{if(ge!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Li(e),o!==null){for(t.flags|=128,Tn(a,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Y(ie,ie.current&1|2),t.child}e=e.sibling}a.tail!==null&&ue()>dn&&(t.flags|=128,n=!0,Tn(a,!1),t.lanes=4194304)}else{if(!n)if(e=Li(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Tn(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!ne)return Ne(t),null}else 2*ue()-a.renderingStartTime>dn&&r!==1073741824&&(t.flags|=128,n=!0,Tn(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(r=a.last,r!==null?r.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=ue(),t.sibling=null,r=ie.current,Y(ie,n?r&1|2:r&1),t):(Ne(t),null);case 22:case 23:return Jl(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Fe&1073741824&&(Ne(t),t.subtreeFlags&6&&(t.flags|=8192)):Ne(t),null;case 24:return null;case 25:return null}throw Error(P(156,t.tag))}function jg(e,t){switch(Tl(t),t.tag){case 1:return ze(t.type)&&Ci(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return cn(),re(Me),re(Se),zl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ml(t),null;case 13:if(re(ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(P(340));on()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return re(ie),null;case 4:return cn(),null;case 10:return Rl(t.type._context),null;case 22:case 23:return Jl(),null;case 24:return null;default:return null}}var Gs=!1,ke=!1,_g=typeof WeakSet=="function"?WeakSet:Set,M=null;function Qr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ce(e,t,n)}else r.current=null}function Do(e,t,r){try{r()}catch(n){ce(e,t,n)}}var bu=!1;function Ng(e,t){if(jo=_i,e=nh(),Cl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==a||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===e)break t;if(f===r&&++u===s&&(l=o),f===a&&++d===n&&(c=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(_o={focusedElem:e,selectionRange:r},_i=!1,M=t;M!==null;)if(t=M,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,M=e;else for(;M!==null;){t=M;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,b=y.memoizedState,g=t.stateNode,x=g.getSnapshotBeforeUpdate(t.elementType===t.type?w:nt(t.type,w),b);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(j){ce(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,M=e;break}M=t.return}return y=bu,bu=!1,y}function Vn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&Do(t,r,a)}s=s.next}while(s!==n)}}function ra(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Fo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Zh(e){var t=e.alternate;t!==null&&(e.alternate=null,Zh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[xt],delete t[ds],delete t[So],delete t[ag],delete t[og])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ef(e){return e.tag===5||e.tag===3||e.tag===4}function ju(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ef(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Uo(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Si));else if(n!==4&&(e=e.child,e!==null))for(Uo(e,t,r),e=e.sibling;e!==null;)Uo(e,t,r),e=e.sibling}function Bo(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Bo(e,t,r),e=e.sibling;e!==null;)Bo(e,t,r),e=e.sibling}var ve=null,st=!1;function Mt(e,t,r){for(r=r.child;r!==null;)tf(e,t,r),r=r.sibling}function tf(e,t,r){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(Gi,r)}catch{}switch(r.tag){case 5:ke||Qr(r,t);case 6:var n=ve,s=st;ve=null,Mt(e,t,r),ve=n,st=s,ve!==null&&(st?(e=ve,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ve.removeChild(r.stateNode));break;case 18:ve!==null&&(st?(e=ve,r=r.stateNode,e.nodeType===8?La(e.parentNode,r):e.nodeType===1&&La(e,r),as(e)):La(ve,r.stateNode));break;case 4:n=ve,s=st,ve=r.stateNode.containerInfo,st=!0,Mt(e,t,r),ve=n,st=s;break;case 0:case 11:case 14:case 15:if(!ke&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Do(r,t,o),s=s.next}while(s!==n)}Mt(e,t,r);break;case 1:if(!ke&&(Qr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ce(r,t,l)}Mt(e,t,r);break;case 21:Mt(e,t,r);break;case 22:r.mode&1?(ke=(n=ke)||r.memoizedState!==null,Mt(e,t,r),ke=n):Mt(e,t,r);break;default:Mt(e,t,r)}}function _u(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new _g),t.forEach(function(n){var s=Rg.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function tt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ve=l.stateNode,st=!1;break e;case 3:ve=l.stateNode.containerInfo,st=!0;break e;case 4:ve=l.stateNode.containerInfo,st=!0;break e}l=l.return}if(ve===null)throw Error(P(160));tf(a,o,s),ve=null,st=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ce(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)rf(t,e),t=t.sibling}function rf(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(tt(t,e),mt(e),n&4){try{Vn(3,e,e.return),ra(3,e)}catch(w){ce(e,e.return,w)}try{Vn(5,e,e.return)}catch(w){ce(e,e.return,w)}}break;case 1:tt(t,e),mt(e),n&512&&r!==null&&Qr(r,r.return);break;case 5:if(tt(t,e),mt(e),n&512&&r!==null&&Qr(r,r.return),e.flags&32){var s=e.stateNode;try{rs(s,"")}catch(w){ce(e,e.return,w)}}if(n&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,o=r!==null?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&Nd(s,a),ho(l,o);var u=ho(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?Td(s,h):d==="dangerouslySetInnerHTML"?Cd(s,h):d==="children"?rs(s,h):ml(s,d,h,u)}switch(l){case"input":ao(s,a);break;case"textarea":kd(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?Xr(s,!!a.multiple,p,!1):f!==!!a.multiple&&(a.defaultValue!=null?Xr(s,!!a.multiple,a.defaultValue,!0):Xr(s,!!a.multiple,a.multiple?[]:"",!1))}s[ds]=a}catch(w){ce(e,e.return,w)}}break;case 6:if(tt(t,e),mt(e),n&4){if(e.stateNode===null)throw Error(P(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(w){ce(e,e.return,w)}}break;case 3:if(tt(t,e),mt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{as(t.containerInfo)}catch(w){ce(e,e.return,w)}break;case 4:tt(t,e),mt(e);break;case 13:tt(t,e),mt(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Kl=ue())),n&4&&_u(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(ke=(u=ke)||d,tt(t,e),ke=u):tt(t,e),mt(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(M=e,d=e.child;d!==null;){for(h=M=d;M!==null;){switch(f=M,p=f.child,f.tag){case 0:case 11:case 14:case 15:Vn(4,f,f.return);break;case 1:Qr(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(w){ce(n,r,w)}}break;case 5:Qr(f,f.return);break;case 22:if(f.memoizedState!==null){ku(h);continue}}p!==null?(p.return=f,M=p):ku(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Ed("display",o))}catch(w){ce(e,e.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){ce(e,e.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:tt(t,e),mt(e),n&4&&_u(e);break;case 21:break;default:tt(t,e),mt(e)}}function mt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(ef(r)){var n=r;break e}r=r.return}throw Error(P(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(rs(s,""),n.flags&=-33);var a=ju(e);Bo(e,a,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=ju(e);Uo(e,l,o);break;default:throw Error(P(161))}}catch(c){ce(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function kg(e,t,r){M=e,nf(e)}function nf(e,t,r){for(var n=(e.mode&1)!==0;M!==null;){var s=M,a=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Gs;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ke;l=Gs;var u=ke;if(Gs=o,(ke=c)&&!u)for(M=s;M!==null;)o=M,c=o.child,o.tag===22&&o.memoizedState!==null?Su(s):c!==null?(c.return=o,M=c):Su(s);for(;a!==null;)M=a,nf(a),a=a.sibling;M=s,Gs=l,ke=u}Nu(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,M=a):Nu(e)}}function Nu(e){for(;M!==null;){var t=M;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ke||ra(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ke)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:nt(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&lu(t,a,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}lu(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&as(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}ke||t.flags&512&&Fo(t)}catch(f){ce(t,t.return,f)}}if(t===e){M=null;break}if(r=t.sibling,r!==null){r.return=t.return,M=r;break}M=t.return}}function ku(e){for(;M!==null;){var t=M;if(t===e){M=null;break}var r=t.sibling;if(r!==null){r.return=t.return,M=r;break}M=t.return}}function Su(e){for(;M!==null;){var t=M;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ra(4,t)}catch(c){ce(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){ce(t,s,c)}}var a=t.return;try{Fo(t)}catch(c){ce(t,a,c)}break;case 5:var o=t.return;try{Fo(t)}catch(c){ce(t,o,c)}}}catch(c){ce(t,t.return,c)}if(t===e){M=null;break}var l=t.sibling;if(l!==null){l.return=t.return,M=l;break}M=t.return}}var Sg=Math.ceil,Mi=$t.ReactCurrentDispatcher,ql=$t.ReactCurrentOwner,Je=$t.ReactCurrentBatchConfig,K=0,ye=null,de=null,we=0,Fe=0,Yr=ar(0),ge=0,xs=null,kr=0,na=0,Vl=0,Kn=null,Re=null,Kl=0,dn=1/0,jt=null,zi=!1,Wo=null,Zt=null,Js=!1,Vt=null,Di=0,Gn=0,Ho=null,di=-1,hi=0;function Te(){return K&6?ue():di!==-1?di:di=ue()}function er(e){return e.mode&1?K&2&&we!==0?we&-we:cg.transition!==null?(hi===0&&(hi=Ud()),hi):(e=J,e!==0||(e=window.event,e=e===void 0?16:Gd(e.type)),e):1}function lt(e,t,r,n){if(50<Gn)throw Gn=0,Ho=null,Error(P(185));Ns(e,r,n),(!(K&2)||e!==ye)&&(e===ye&&(!(K&2)&&(na|=r),ge===4&&Wt(e,we)),De(e,n),r===1&&K===0&&!(t.mode&1)&&(dn=ue()+500,Zi&&or()))}function De(e,t){var r=e.callbackNode;cp(e,t);var n=ji(e,e===ye?we:0);if(n===0)r!==null&&$c(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&$c(r),t===1)e.tag===0?lg(Cu.bind(null,e)):fh(Cu.bind(null,e)),sg(function(){!(K&6)&&or()}),r=null;else{switch(Bd(n)){case 1:r=vl;break;case 4:r=Dd;break;case 16:r=bi;break;case 536870912:r=Fd;break;default:r=bi}r=hf(r,sf.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function sf(e,t){if(di=-1,hi=0,K&6)throw Error(P(327));var r=e.callbackNode;if(nn()&&e.callbackNode!==r)return null;var n=ji(e,e===ye?we:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Fi(e,n);else{t=n;var s=K;K|=2;var a=of();(ye!==e||we!==t)&&(jt=null,dn=ue()+500,vr(e,t));do try{Tg();break}catch(l){af(e,l)}while(!0);Ol(),Mi.current=a,K=s,de!==null?t=0:(ye=null,we=0,t=ge)}if(t!==0){if(t===2&&(s=xo(e),s!==0&&(n=s,t=qo(e,s))),t===1)throw r=xs,vr(e,0),Wt(e,n),De(e,ue()),r;if(t===6)Wt(e,n);else{if(s=e.current.alternate,!(n&30)&&!Cg(s)&&(t=Fi(e,n),t===2&&(a=xo(e),a!==0&&(n=a,t=qo(e,a))),t===1))throw r=xs,vr(e,0),Wt(e,n),De(e,ue()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(P(345));case 2:fr(e,Re,jt);break;case 3:if(Wt(e,n),(n&130023424)===n&&(t=Kl+500-ue(),10<t)){if(ji(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Te(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ko(fr.bind(null,e,Re,jt),t);break}fr(e,Re,jt);break;case 4:if(Wt(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-ot(n);a=1<<o,o=t[o],o>s&&(s=o),n&=~a}if(n=s,n=ue()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Sg(n/1960))-n,10<n){e.timeoutHandle=ko(fr.bind(null,e,Re,jt),n);break}fr(e,Re,jt);break;case 5:fr(e,Re,jt);break;default:throw Error(P(329))}}}return De(e,ue()),e.callbackNode===r?sf.bind(null,e):null}function qo(e,t){var r=Kn;return e.current.memoizedState.isDehydrated&&(vr(e,t).flags|=256),e=Fi(e,t),e!==2&&(t=Re,Re=r,t!==null&&Vo(t)),e}function Vo(e){Re===null?Re=e:Re.push.apply(Re,e)}function Cg(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!ct(a(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wt(e,t){for(t&=~Vl,t&=~na,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ot(t),n=1<<r;e[r]=-1,t&=~n}}function Cu(e){if(K&6)throw Error(P(327));nn();var t=ji(e,0);if(!(t&1))return De(e,ue()),null;var r=Fi(e,t);if(e.tag!==0&&r===2){var n=xo(e);n!==0&&(t=n,r=qo(e,n))}if(r===1)throw r=xs,vr(e,0),Wt(e,t),De(e,ue()),r;if(r===6)throw Error(P(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,fr(e,Re,jt),De(e,ue()),null}function Gl(e,t){var r=K;K|=1;try{return e(t)}finally{K=r,K===0&&(dn=ue()+500,Zi&&or())}}function Sr(e){Vt!==null&&Vt.tag===0&&!(K&6)&&nn();var t=K;K|=1;var r=Je.transition,n=J;try{if(Je.transition=null,J=1,e)return e()}finally{J=n,Je.transition=r,K=t,!(K&6)&&or()}}function Jl(){Fe=Yr.current,re(Yr)}function vr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,ng(r)),de!==null)for(r=de.return;r!==null;){var n=r;switch(Tl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ci();break;case 3:cn(),re(Me),re(Se),zl();break;case 5:Ml(n);break;case 4:cn();break;case 13:re(ie);break;case 19:re(ie);break;case 10:Rl(n.type._context);break;case 22:case 23:Jl()}r=r.return}if(ye=e,de=e=tr(e.current,null),we=Fe=t,ge=0,xs=null,Vl=na=kr=0,Re=Kn=null,xr!==null){for(t=0;t<xr.length;t++)if(r=xr[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=s,n.next=o}r.pending=n}xr=null}return e}function af(e,t){do{var r=de;try{if(Ol(),li.current=Ii,$i){for(var n=ae.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}$i=!1}if(Nr=0,xe=pe=ae=null,qn=!1,ms=0,ql.current=null,r===null||r.return===null){ge=1,xs=t,de=null;break}e:{var a=e,o=r.return,l=r,c=t;if(t=we,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=mu(o);if(p!==null){p.flags&=-257,pu(p,o,l,a,t),p.mode&1&&fu(a,u,t),t=p,c=u;var y=t.updateQueue;if(y===null){var w=new Set;w.add(c),t.updateQueue=w}else y.add(c);break e}else{if(!(t&1)){fu(a,u,t),Ql();break e}c=Error(P(426))}}else if(ne&&l.mode&1){var b=mu(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),pu(b,o,l,a,t),Pl(un(c,l));break e}}a=c=un(c,l),ge!==4&&(ge=2),Kn===null?Kn=[a]:Kn.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var g=Bh(a,c,t);ou(a,g);break e;case 1:l=c;var x=a.type,m=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Zt===null||!Zt.has(m)))){a.flags|=65536,t&=-t,a.lanes|=t;var j=Wh(a,l,t);ou(a,j);break e}}a=a.return}while(a!==null)}cf(r)}catch(_){t=_,de===r&&r!==null&&(de=r=r.return);continue}break}while(!0)}function of(){var e=Mi.current;return Mi.current=Ii,e===null?Ii:e}function Ql(){(ge===0||ge===3||ge===2)&&(ge=4),ye===null||!(kr&268435455)&&!(na&268435455)||Wt(ye,we)}function Fi(e,t){var r=K;K|=2;var n=of();(ye!==e||we!==t)&&(jt=null,vr(e,t));do try{Eg();break}catch(s){af(e,s)}while(!0);if(Ol(),K=r,Mi.current=n,de!==null)throw Error(P(261));return ye=null,we=0,ge}function Eg(){for(;de!==null;)lf(de)}function Tg(){for(;de!==null&&!ep();)lf(de)}function lf(e){var t=df(e.alternate,e,Fe);e.memoizedProps=e.pendingProps,t===null?cf(e):de=t,ql.current=null}function cf(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=jg(r,t),r!==null){r.flags&=32767,de=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ge=6,de=null;return}}else if(r=bg(r,t,Fe),r!==null){de=r;return}if(t=t.sibling,t!==null){de=t;return}de=t=e}while(t!==null);ge===0&&(ge=5)}function fr(e,t,r){var n=J,s=Je.transition;try{Je.transition=null,J=1,Pg(e,t,r,n)}finally{Je.transition=s,J=n}return null}function Pg(e,t,r,n){do nn();while(Vt!==null);if(K&6)throw Error(P(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(P(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(up(e,a),e===ye&&(de=ye=null,we=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Js||(Js=!0,hf(bi,function(){return nn(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Je.transition,Je.transition=null;var o=J;J=1;var l=K;K|=4,ql.current=null,Ng(e,r),rf(r,e),Qp(_o),_i=!!jo,_o=jo=null,e.current=r,kg(r),tp(),K=l,J=o,Je.transition=a}else e.current=r;if(Js&&(Js=!1,Vt=e,Di=s),a=e.pendingLanes,a===0&&(Zt=null),sp(r.stateNode),De(e,ue()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(zi)throw zi=!1,e=Wo,Wo=null,e;return Di&1&&e.tag!==0&&nn(),a=e.pendingLanes,a&1?e===Ho?Gn++:(Gn=0,Ho=e):Gn=0,or(),null}function nn(){if(Vt!==null){var e=Bd(Di),t=Je.transition,r=J;try{if(Je.transition=null,J=16>e?16:e,Vt===null)var n=!1;else{if(e=Vt,Vt=null,Di=0,K&6)throw Error(P(331));var s=K;for(K|=4,M=e.current;M!==null;){var a=M,o=a.child;if(M.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(M=u;M!==null;){var d=M;switch(d.tag){case 0:case 11:case 15:Vn(8,d,a)}var h=d.child;if(h!==null)h.return=d,M=h;else for(;M!==null;){d=M;var f=d.sibling,p=d.return;if(Zh(d),d===u){M=null;break}if(f!==null){f.return=p,M=f;break}M=p}}}var y=a.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var b=w.sibling;w.sibling=null,w=b}while(w!==null)}}M=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,M=o;else e:for(;M!==null;){if(a=M,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Vn(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,M=g;break e}M=a.return}}var x=e.current;for(M=x;M!==null;){o=M;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,M=m;else e:for(o=x;M!==null;){if(l=M,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ra(9,l)}}catch(_){ce(l,l.return,_)}if(l===o){M=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,M=j;break e}M=l.return}}if(K=s,or(),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(Gi,e)}catch{}n=!0}return n}finally{J=r,Je.transition=t}}return!1}function Eu(e,t,r){t=un(r,t),t=Bh(e,t,1),e=Xt(e,t,1),t=Te(),e!==null&&(Ns(e,1,t),De(e,t))}function ce(e,t,r){if(e.tag===3)Eu(e,e,r);else for(;t!==null;){if(t.tag===3){Eu(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Zt===null||!Zt.has(n))){e=un(r,e),e=Wh(t,e,1),t=Xt(t,e,1),e=Te(),t!==null&&(Ns(t,1,e),De(t,e));break}}t=t.return}}function Ag(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Te(),e.pingedLanes|=e.suspendedLanes&r,ye===e&&(we&r)===r&&(ge===4||ge===3&&(we&130023424)===we&&500>ue()-Kl?vr(e,0):Vl|=r),De(e,t)}function uf(e,t){t===0&&(e.mode&1?(t=Ds,Ds<<=1,!(Ds&130023424)&&(Ds=4194304)):t=1);var r=Te();e=Ot(e,t),e!==null&&(Ns(e,t,r),De(e,r))}function Og(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),uf(e,r)}function Rg(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(P(314))}n!==null&&n.delete(t),uf(e,r)}var df;df=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Me.current)$e=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return $e=!1,wg(e,t,r);$e=!!(e.flags&131072)}else $e=!1,ne&&t.flags&1048576&&mh(t,Pi,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ui(e,t),e=t.pendingProps;var s=an(t,Se.current);rn(t,r),s=Fl(null,t,n,e,s,r);var a=Ul();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ze(n)?(a=!0,Ei(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,$l(t),s.updater=ta,t.stateNode=s,s._reactInternals=t,Oo(t,n,e,r),t=$o(null,t,n,!0,a,r)):(t.tag=0,ne&&a&&El(t),Ee(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ui(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=$g(n),e=nt(n,e),s){case 0:t=Lo(null,t,n,e,r);break e;case 1:t=yu(null,t,n,e,r);break e;case 11:t=gu(null,t,n,e,r);break e;case 14:t=xu(null,t,n,nt(n.type,e),r);break e}throw Error(P(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:nt(n,s),Lo(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:nt(n,s),yu(e,t,n,s,r);case 3:e:{if(Kh(t),e===null)throw Error(P(387));n=t.pendingProps,a=t.memoizedState,s=a.element,wh(e,t),Ri(t,n,null,r);var o=t.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=un(Error(P(423)),t),t=vu(e,t,n,r,s);break e}else if(n!==s){s=un(Error(P(424)),t),t=vu(e,t,n,r,s);break e}else for(Ue=Yt(t.stateNode.containerInfo.firstChild),Be=t,ne=!0,at=null,r=yh(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(on(),n===s){t=Rt(e,t,r);break e}Ee(e,t,n,r)}t=t.child}return t;case 5:return bh(t),e===null&&To(t),n=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,o=s.children,No(n,s)?o=null:a!==null&&No(n,a)&&(t.flags|=32),Vh(e,t),Ee(e,t,o,r),t.child;case 6:return e===null&&To(t),null;case 13:return Gh(e,t,r);case 4:return Il(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ln(t,null,n,r):Ee(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:nt(n,s),gu(e,t,n,s,r);case 7:return Ee(e,t,t.pendingProps,r),t.child;case 8:return Ee(e,t,t.pendingProps.children,r),t.child;case 12:return Ee(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Y(Ai,n._currentValue),n._currentValue=o,a!==null)if(ct(a.value,o)){if(a.children===s.children&&!Me.current){t=Rt(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=Ct(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),Po(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(P(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Po(o,r,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Ee(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,rn(t,r),s=Ye(s),n=n(s),t.flags|=1,Ee(e,t,n,r),t.child;case 14:return n=t.type,s=nt(n,t.pendingProps),s=nt(n.type,s),xu(e,t,n,s,r);case 15:return Hh(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:nt(n,s),ui(e,t),t.tag=1,ze(n)?(e=!0,Ei(t)):e=!1,rn(t,r),Uh(t,n,s),Oo(t,n,s,r),$o(null,t,n,!0,e,r);case 19:return Jh(e,t,r);case 22:return qh(e,t,r)}throw Error(P(156,t.tag))};function hf(e,t){return zd(e,t)}function Lg(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ge(e,t,r,n){return new Lg(e,t,r,n)}function Yl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $g(e){if(typeof e=="function")return Yl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===gl)return 11;if(e===xl)return 14}return 2}function tr(e,t){var r=e.alternate;return r===null?(r=Ge(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function fi(e,t,r,n,s,a){var o=2;if(n=e,typeof e=="function")Yl(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ur:return wr(r.children,s,a,t);case pl:o=8,s|=8;break;case to:return e=Ge(12,r,t,s|2),e.elementType=to,e.lanes=a,e;case ro:return e=Ge(13,r,t,s),e.elementType=ro,e.lanes=a,e;case no:return e=Ge(19,r,t,s),e.elementType=no,e.lanes=a,e;case bd:return sa(r,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case vd:o=10;break e;case wd:o=9;break e;case gl:o=11;break e;case xl:o=14;break e;case Ft:o=16,n=null;break e}throw Error(P(130,e==null?e:typeof e,""))}return t=Ge(o,r,t,s),t.elementType=e,t.type=n,t.lanes=a,t}function wr(e,t,r,n){return e=Ge(7,e,n,t),e.lanes=r,e}function sa(e,t,r,n){return e=Ge(22,e,n,t),e.elementType=bd,e.lanes=r,e.stateNode={isHidden:!1},e}function Ba(e,t,r){return e=Ge(6,e,null,t),e.lanes=r,e}function Wa(e,t,r){return t=Ge(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ig(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_a(0),this.expirationTimes=_a(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_a(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Xl(e,t,r,n,s,a,o,l,c){return e=new Ig(e,t,r,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Ge(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},$l(a),e}function Mg(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function ff(e){if(!e)return sr;e=e._reactInternals;e:{if(Er(e)!==e||e.tag!==1)throw Error(P(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ze(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(P(171))}if(e.tag===1){var r=e.type;if(ze(r))return hh(e,r,t)}return t}function mf(e,t,r,n,s,a,o,l,c){return e=Xl(r,n,!0,e,s,a,o,l,c),e.context=ff(null),r=e.current,n=Te(),s=er(r),a=Ct(n,s),a.callback=t??null,Xt(r,a,s),e.current.lanes=s,Ns(e,s,n),De(e,n),e}function ia(e,t,r,n){var s=t.current,a=Te(),o=er(s);return r=ff(r),t.context===null?t.context=r:t.pendingContext=r,t=Ct(a,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Xt(s,t,o),e!==null&&(lt(e,s,o,a),oi(e,s,o)),o}function Ui(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Tu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Zl(e,t){Tu(e,t),(e=e.alternate)&&Tu(e,t)}function zg(){return null}var pf=typeof reportError=="function"?reportError:function(e){console.error(e)};function ec(e){this._internalRoot=e}aa.prototype.render=ec.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(P(409));ia(e,t,null,null)};aa.prototype.unmount=ec.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Sr(function(){ia(null,e,null,null)}),t[At]=null}};function aa(e){this._internalRoot=e}aa.prototype.unstable_scheduleHydration=function(e){if(e){var t=qd();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Bt.length&&t!==0&&t<Bt[r].priority;r++);Bt.splice(r,0,e),r===0&&Kd(e)}};function tc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function oa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Pu(){}function Dg(e,t,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var u=Ui(o);a.call(u)}}var o=mf(t,n,e,0,null,!1,!1,"",Pu);return e._reactRootContainer=o,e[At]=o.current,cs(e.nodeType===8?e.parentNode:e),Sr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Ui(c);l.call(u)}}var c=Xl(e,0,!1,null,null,!1,!1,"",Pu);return e._reactRootContainer=c,e[At]=c.current,cs(e.nodeType===8?e.parentNode:e),Sr(function(){ia(t,c,r,n)}),c}function la(e,t,r,n,s){var a=r._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var c=Ui(o);l.call(c)}}ia(t,o,e,s)}else o=Dg(r,t,e,s,n);return Ui(o)}Wd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=In(t.pendingLanes);r!==0&&(wl(t,r|1),De(t,ue()),!(K&6)&&(dn=ue()+500,or()))}break;case 13:Sr(function(){var n=Ot(e,1);if(n!==null){var s=Te();lt(n,e,1,s)}}),Zl(e,1)}};bl=function(e){if(e.tag===13){var t=Ot(e,134217728);if(t!==null){var r=Te();lt(t,e,134217728,r)}Zl(e,134217728)}};Hd=function(e){if(e.tag===13){var t=er(e),r=Ot(e,t);if(r!==null){var n=Te();lt(r,e,t,n)}Zl(e,t)}};qd=function(){return J};Vd=function(e,t){var r=J;try{return J=e,t()}finally{J=r}};mo=function(e,t,r){switch(t){case"input":if(ao(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Xi(n);if(!s)throw Error(P(90));_d(n),ao(n,s)}}}break;case"textarea":kd(e,r);break;case"select":t=r.value,t!=null&&Xr(e,!!r.multiple,t,!1)}};Od=Gl;Rd=Sr;var Fg={usingClientEntryPoint:!1,Events:[Ss,qr,Xi,Pd,Ad,Gl]},Pn={findFiberByHostInstance:gr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ug={bundleType:Pn.bundleType,version:Pn.version,rendererPackageName:Pn.rendererPackageName,rendererConfig:Pn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$t.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Id(e),e===null?null:e.stateNode},findFiberByHostInstance:Pn.findFiberByHostInstance||zg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qs.isDisabled&&Qs.supportsFiber)try{Gi=Qs.inject(Ug),yt=Qs}catch{}}He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fg;He.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tc(t))throw Error(P(200));return Mg(e,t,null,r)};He.createRoot=function(e,t){if(!tc(e))throw Error(P(299));var r=!1,n="",s=pf;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Xl(e,1,!1,null,null,r,!1,n,s),e[At]=t.current,cs(e.nodeType===8?e.parentNode:e),new ec(t)};He.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(P(188)):(e=Object.keys(e).join(","),Error(P(268,e)));return e=Id(t),e=e===null?null:e.stateNode,e};He.flushSync=function(e){return Sr(e)};He.hydrate=function(e,t,r){if(!oa(t))throw Error(P(200));return la(null,e,t,!0,r)};He.hydrateRoot=function(e,t,r){if(!tc(e))throw Error(P(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",o=pf;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=mf(t,null,e,1,r??null,s,!1,a,o),e[At]=t.current,cs(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new aa(t)};He.render=function(e,t,r){if(!oa(t))throw Error(P(200));return la(null,e,t,!1,r)};He.unmountComponentAtNode=function(e){if(!oa(e))throw Error(P(40));return e._reactRootContainer?(Sr(function(){la(null,null,e,!1,function(){e._reactRootContainer=null,e[At]=null})}),!0):!1};He.unstable_batchedUpdates=Gl;He.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!oa(r))throw Error(P(200));if(e==null||e._reactInternals===void 0)throw Error(P(38));return la(e,t,r,!1,n)};He.version="18.3.1-next-f1338f8080-20240426";function gf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gf)}catch(e){console.error(e)}}gf(),pd.exports=He;var Bg=pd.exports,xf,Au=Bg;xf=Au.createRoot,Au.hydrateRoot;/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ou="popstate";function Wg(e={}){function t(n,s){let{pathname:a,search:o,hash:l}=n.location;return Ko("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:ys(s)}return qg(t,r,null,e)}function se(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ze(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Hg(){return Math.random().toString(36).substring(2,10)}function Ru(e,t){return{usr:e.state,key:e.key,idx:t}}function Ko(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?xn(t):t,state:r,key:t&&t.key||n||Hg()}}function ys({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function xn(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function qg(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:a=!1}=n,o=s.history,l="POP",c=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function h(){l="POP";let b=d(),g=b==null?null:b-u;u=b,c&&c({action:l,location:w.location,delta:g})}function f(b,g){l="PUSH";let x=Ko(w.location,b,g);u=d()+1;let m=Ru(x,u),j=w.createHref(x);try{o.pushState(m,"",j)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(j)}a&&c&&c({action:l,location:w.location,delta:1})}function p(b,g){l="REPLACE";let x=Ko(w.location,b,g);u=d();let m=Ru(x,u),j=w.createHref(x);o.replaceState(m,"",j),a&&c&&c({action:l,location:w.location,delta:0})}function y(b){return Vg(b)}let w={get action(){return l},get location(){return e(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Ou,h),c=b,()=>{s.removeEventListener(Ou,h),c=null}},createHref(b){return t(s,b)},createURL:y,encodeLocation(b){let g=y(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:p,go(b){return o.go(b)}};return w}function Vg(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),se(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:ys(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function yf(e,t,r="/"){return Kg(e,t,r,!1)}function Kg(e,t,r,n){let s=typeof t=="string"?xn(t):t,a=Lt(s.pathname||"/",r);if(a==null)return null;let o=vf(e);Gg(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=i0(a);l=n0(o[c],u,n)}return l}function vf(e,t=[],r=[],n="",s=!1){let a=(o,l,c=s,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&c)return;se(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let h=Et([n,d.relativePath]),f=r.concat(d);o.children&&o.children.length>0&&(se(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),vf(o.children,t,f,h,c)),!(o.path==null&&!o.index)&&t.push({path:h,score:t0(h,o.index),routesMeta:f})};return e.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))a(o,l);else for(let u of wf(o.path))a(o,l,!0,u)}),t}function wf(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let o=wf(n.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Gg(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:r0(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var Jg=/^:[\w-]+$/,Qg=3,Yg=2,Xg=1,Zg=10,e0=-2,Lu=e=>e==="*";function t0(e,t){let r=e.split("/"),n=r.length;return r.some(Lu)&&(n+=e0),t&&(n+=Yg),r.filter(s=>!Lu(s)).reduce((s,a)=>s+(Jg.test(a)?Qg:a===""?Xg:Zg),n)}function r0(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function n0(e,t,r=!1){let{routesMeta:n}=e,s={},a="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=a==="/"?t:t.slice(a.length)||"/",h=Bi({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=Bi({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Et([a,h.pathname]),pathnameBase:u0(Et([a,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(a=Et([a,h.pathnameBase]))}return o}function Bi(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=s0(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:h},f)=>{if(d==="*"){let y=l[f]||"";o=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const p=l[f];return h&&!p?u[d]=void 0:u[d]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:e}}function s0(e,t=!1,r=!0){Ze(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function i0(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ze(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Lt(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var a0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,o0=e=>a0.test(e);function l0(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?xn(e):e,a;if(r)if(o0(r))a=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),Ze(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${r}`)}r.startsWith("/")?a=$u(r.substring(1),"/"):a=$u(r,t)}else a=t;return{pathname:a,search:d0(n),hash:h0(s)}}function $u(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Ha(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function c0(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function rc(e){let t=c0(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function nc(e,t,r,n=!1){let s;typeof e=="string"?s=xn(e):(s={...e},se(!s.pathname||!s.pathname.includes("?"),Ha("?","pathname","search",s)),se(!s.pathname||!s.pathname.includes("#"),Ha("#","pathname","hash",s)),se(!s.search||!s.search.includes("#"),Ha("#","search","hash",s)));let a=e===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=l0(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var Et=e=>e.join("/").replace(/\/\/+/g,"/"),u0=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),d0=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,h0=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function f0(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var bf=["POST","PUT","PATCH","DELETE"];new Set(bf);var m0=["GET",...bf];new Set(m0);var yn=v.createContext(null);yn.displayName="DataRouter";var ca=v.createContext(null);ca.displayName="DataRouterState";v.createContext(!1);var jf=v.createContext({isTransitioning:!1});jf.displayName="ViewTransition";var p0=v.createContext(new Map);p0.displayName="Fetchers";var g0=v.createContext(null);g0.displayName="Await";var ut=v.createContext(null);ut.displayName="Navigation";var Es=v.createContext(null);Es.displayName="Location";var dt=v.createContext({outlet:null,matches:[],isDataRoute:!1});dt.displayName="Route";var sc=v.createContext(null);sc.displayName="RouteError";function x0(e,{relative:t}={}){se(vn(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(ut),{hash:s,pathname:a,search:o}=Ts(e,{relative:t}),l=a;return r!=="/"&&(l=a==="/"?r:Et([r,a])),n.createHref({pathname:l,search:o,hash:s})}function vn(){return v.useContext(Es)!=null}function It(){return se(vn(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(Es).location}var _f="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Nf(e){v.useContext(ut).static||v.useLayoutEffect(e)}function lr(){let{isDataRoute:e}=v.useContext(dt);return e?O0():y0()}function y0(){se(vn(),"useNavigate() may be used only in the context of a <Router> component.");let e=v.useContext(yn),{basename:t,navigator:r}=v.useContext(ut),{matches:n}=v.useContext(dt),{pathname:s}=It(),a=JSON.stringify(rc(n)),o=v.useRef(!1);return Nf(()=>{o.current=!0}),v.useCallback((c,u={})=>{if(Ze(o.current,_f),!o.current)return;if(typeof c=="number"){r.go(c);return}let d=nc(c,JSON.parse(a),s,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Et([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,a,s,e])}var v0=v.createContext(null);function w0(e){let t=v.useContext(dt).outlet;return v.useMemo(()=>t&&v.createElement(v0.Provider,{value:e},t),[t,e])}function Ts(e,{relative:t}={}){let{matches:r}=v.useContext(dt),{pathname:n}=It(),s=JSON.stringify(rc(r));return v.useMemo(()=>nc(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function b0(e,t){return kf(e,t)}function kf(e,t,r,n,s){var x;se(vn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=v.useContext(ut),{matches:o}=v.useContext(dt),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",h=l&&l.route;{let m=h&&h.path||"";Sf(u,!h||m.endsWith("*")||m.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${m}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${m}"> to <Route path="${m==="/"?"*":`${m}/*`}">.`)}let f=It(),p;if(t){let m=typeof t=="string"?xn(t):t;se(d==="/"||((x=m.pathname)==null?void 0:x.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${m.pathname}" was given in the \`location\` prop.`),p=m}else p=f;let y=p.pathname||"/",w=y;if(d!=="/"){let m=d.replace(/^\//,"").split("/");w="/"+y.replace(/^\//,"").split("/").slice(m.length).join("/")}let b=yf(e,{pathname:w});Ze(h||b!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Ze(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=S0(b&&b.map(m=>Object.assign({},m,{params:Object.assign({},c,m.params),pathname:Et([d,a.encodeLocation?a.encodeLocation(m.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?d:Et([d,a.encodeLocation?a.encodeLocation(m.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:m.pathnameBase])})),o,r,n,s);return t&&g?v.createElement(Es.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},g):g}function j0(){let e=A0(),t=f0(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:a},"ErrorBoundary")," or"," ",v.createElement("code",{style:a},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:s},r):null,o)}var _0=v.createElement(j0,null),N0=class extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?v.createElement(dt.Provider,{value:this.props.routeContext},v.createElement(sc.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function k0({routeContext:e,match:t,children:r}){let n=v.useContext(yn);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(dt.Provider,{value:e},r)}function S0(e,t=[],r=null,n=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,o=r==null?void 0:r.errors;if(o!=null){let d=a.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);se(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,c=-1;if(r)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:p}=r,y=h.route.loader&&!f.hasOwnProperty(h.route.id)&&(!p||p[h.route.id]===void 0);if(h.route.lazy||y){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}let u=r&&n?(d,h)=>{var f,p;n(d,{location:r.location,params:((p=(f=r.matches)==null?void 0:f[0])==null?void 0:p.params)??{},errorInfo:h})}:void 0;return a.reduceRight((d,h,f)=>{let p,y=!1,w=null,b=null;r&&(p=o&&h.route.id?o[h.route.id]:void 0,w=h.route.errorElement||_0,l&&(c<0&&f===0?(Sf("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,b=null):c===f&&(y=!0,b=h.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,f+1)),x=()=>{let m;return p?m=w:y?m=b:h.route.Component?m=v.createElement(h.route.Component,null):h.route.element?m=h.route.element:m=d,v.createElement(k0,{match:h,routeContext:{outlet:d,matches:g,isDataRoute:r!=null},children:m})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?v.createElement(N0,{location:r.location,revalidation:r.revalidation,component:w,error:p,children:x(),routeContext:{outlet:null,matches:g,isDataRoute:!0},onError:u}):x()},null)}function ic(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function C0(e){let t=v.useContext(yn);return se(t,ic(e)),t}function E0(e){let t=v.useContext(ca);return se(t,ic(e)),t}function T0(e){let t=v.useContext(dt);return se(t,ic(e)),t}function ac(e){let t=T0(e),r=t.matches[t.matches.length-1];return se(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function P0(){return ac("useRouteId")}function A0(){var n;let e=v.useContext(sc),t=E0("useRouteError"),r=ac("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function O0(){let{router:e}=C0("useNavigate"),t=ac("useNavigate"),r=v.useRef(!1);return Nf(()=>{r.current=!0}),v.useCallback(async(s,a={})=>{Ze(r.current,_f),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...a}))},[e,t])}var Iu={};function Sf(e,t,r){!t&&!Iu[e]&&(Iu[e]=!0,Ze(!1,r))}v.memo(R0);function R0({routes:e,future:t,state:r,unstable_onError:n}){return kf(e,void 0,r,n,t)}function Cf({to:e,replace:t,state:r,relative:n}){se(vn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=v.useContext(ut);Ze(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=v.useContext(dt),{pathname:o}=It(),l=lr(),c=nc(e,rc(a),o,n==="path"),u=JSON.stringify(c);return v.useEffect(()=>{l(JSON.parse(u),{replace:t,state:r,relative:n})},[l,u,n,t,r]),null}function L0(e){return w0(e.context)}function Oe(e){se(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $0({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:a=!1}){se(!vn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=v.useMemo(()=>({basename:o,navigator:s,static:a,future:{}}),[o,s,a]);typeof r=="string"&&(r=xn(r));let{pathname:c="/",search:u="",hash:d="",state:h=null,key:f="default"}=r,p=v.useMemo(()=>{let y=Lt(c,o);return y==null?null:{location:{pathname:y,search:u,hash:d,state:h,key:f},navigationType:n}},[o,c,u,d,h,f,n]);return Ze(p!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:v.createElement(ut.Provider,{value:l},v.createElement(Es.Provider,{children:t,value:p}))}function I0({children:e,location:t}){return b0(Go(e),t)}function Go(e,t=[]){let r=[];return v.Children.forEach(e,(n,s)=>{if(!v.isValidElement(n))return;let a=[...t,s];if(n.type===v.Fragment){r.push.apply(r,Go(n.props.children,a));return}se(n.type===Oe,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),se(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Go(n.props.children,a)),r.push(o)}),r}var mi="get",pi="application/x-www-form-urlencoded";function ua(e){return e!=null&&typeof e.tagName=="string"}function M0(e){return ua(e)&&e.tagName.toLowerCase()==="button"}function z0(e){return ua(e)&&e.tagName.toLowerCase()==="form"}function D0(e){return ua(e)&&e.tagName.toLowerCase()==="input"}function F0(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function U0(e,t){return e.button===0&&(!t||t==="_self")&&!F0(e)}var Ys=null;function B0(){if(Ys===null)try{new FormData(document.createElement("form"),0),Ys=!1}catch{Ys=!0}return Ys}var W0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qa(e){return e!=null&&!W0.has(e)?(Ze(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${pi}"`),null):e}function H0(e,t){let r,n,s,a,o;if(z0(e)){let l=e.getAttribute("action");n=l?Lt(l,t):null,r=e.getAttribute("method")||mi,s=qa(e.getAttribute("enctype"))||pi,a=new FormData(e)}else if(M0(e)||D0(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(n=c?Lt(c,t):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||mi,s=qa(e.getAttribute("formenctype"))||qa(l.getAttribute("enctype"))||pi,a=new FormData(l,e),!B0()){let{name:u,type:d,value:h}=e;if(d==="image"){let f=u?`${u}.`:"";a.append(`${f}x`,"0"),a.append(`${f}y`,"0")}else u&&a.append(u,h)}}else{if(ua(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=mi,n=null,s=pi,o=e}return a&&s==="text/plain"&&(o=a,a=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function oc(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function q0(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Lt(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function V0(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function K0(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function G0(e,t,r){let n=await Promise.all(e.map(async s=>{let a=t.routes[s.route.id];if(a){let o=await V0(a,r);return o.links?o.links():[]}return[]}));return X0(n.flat(1).filter(K0).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Mu(e,t,r,n,s,a){let o=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,l=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return a==="assets"?t.filter((c,u)=>o(c,u)||l(c,u)):a==="data"?t.filter((c,u)=>{var h;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=r[0])==null?void 0:h.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function J0(e,t,{includeHydrateFallback:r}={}){return Q0(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function Q0(e){return[...new Set(e)]}function Y0(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function X0(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let a=JSON.stringify(Y0(s));return r.has(a)||(r.add(a),n.push({key:a,link:s})),n},[])}function Ef(){let e=v.useContext(yn);return oc(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Z0(){let e=v.useContext(ca);return oc(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var lc=v.createContext(void 0);lc.displayName="FrameworkContext";function Tf(){let e=v.useContext(lc);return oc(e,"You must render this element inside a <HydratedRouter> element"),e}function ex(e,t){let r=v.useContext(lc),[n,s]=v.useState(!1),[a,o]=v.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,f=v.useRef(null);v.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let w=g=>{g.forEach(x=>{o(x.isIntersecting)})},b=new IntersectionObserver(w,{threshold:.5});return f.current&&b.observe(f.current),()=>{b.disconnect()}}},[e]),v.useEffect(()=>{if(n){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[n]);let p=()=>{s(!0)},y=()=>{s(!1),o(!1)};return r?e!=="intent"?[a,f,{}]:[a,f,{onFocus:An(l,p),onBlur:An(c,y),onMouseEnter:An(u,p),onMouseLeave:An(d,y),onTouchStart:An(h,p)}]:[!1,f,{}]}function An(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function tx({page:e,...t}){let{router:r}=Ef(),n=v.useMemo(()=>yf(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?v.createElement(nx,{page:e,matches:n,...t}):null}function rx(e){let{manifest:t,routeModules:r}=Tf(),[n,s]=v.useState([]);return v.useEffect(()=>{let a=!1;return G0(e,t,r).then(o=>{a||s(o)}),()=>{a=!0}},[e,t,r]),n}function nx({page:e,matches:t,...r}){let n=It(),{manifest:s,routeModules:a}=Tf(),{basename:o}=Ef(),{loaderData:l,matches:c}=Z0(),u=v.useMemo(()=>Mu(e,t,c,s,n,"data"),[e,t,c,s,n]),d=v.useMemo(()=>Mu(e,t,c,s,n,"assets"),[e,t,c,s,n]),h=v.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let y=new Set,w=!1;if(t.forEach(g=>{var m;let x=s.routes[g.route.id];!x||!x.hasLoader||(!u.some(j=>j.route.id===g.route.id)&&g.route.id in l&&((m=a[g.route.id])!=null&&m.shouldRevalidate)||x.hasClientLoader?w=!0:y.add(g.route.id))}),y.size===0)return[];let b=q0(e,o,"data");return w&&y.size>0&&b.searchParams.set("_routes",t.filter(g=>y.has(g.route.id)).map(g=>g.route.id).join(",")),[b.pathname+b.search]},[o,l,n,s,u,t,e,a]),f=v.useMemo(()=>J0(d,s),[d,s]),p=rx(d);return v.createElement(v.Fragment,null,h.map(y=>v.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...r})),f.map(y=>v.createElement("link",{key:y,rel:"modulepreload",href:y,...r})),p.map(({key:y,link:w})=>v.createElement("link",{key:y,nonce:r.nonce,...w})))}function sx(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var Pf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Pf&&(window.__reactRouterVersion="7.9.6")}catch{}function ix({basename:e,children:t,window:r}){let n=v.useRef();n.current==null&&(n.current=Wg({window:r,v5Compat:!0}));let s=n.current,[a,o]=v.useState({action:s.action,location:s.location}),l=v.useCallback(c=>{v.startTransition(()=>o(c))},[o]);return v.useLayoutEffect(()=>s.listen(l),[s,l]),v.createElement($0,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:s})}var Af=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cc=v.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h,...f},p){let{basename:y}=v.useContext(ut),w=typeof u=="string"&&Af.test(u),b,g=!1;if(typeof u=="string"&&w&&(b=u,Pf))try{let O=new URL(window.location.href),N=u.startsWith("//")?new URL(O.protocol+u):new URL(u),U=Lt(N.pathname,y);N.origin===O.origin&&U!=null?u=U+N.search+N.hash:g=!0}catch{Ze(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=x0(u,{relative:s}),[m,j,_]=ex(n,f),S=cx(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function T(O){t&&t(O),O.defaultPrevented||S(O)}let E=v.createElement("a",{...f,..._,href:b||x,onClick:g||a?t:T,ref:sx(p,j),target:c,"data-discover":!w&&r==="render"?"true":void 0});return m&&!w?v.createElement(v.Fragment,null,E,v.createElement(tx,{page:x})):E});cc.displayName="Link";var ax=v.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:a,to:o,viewTransition:l,children:c,...u},d){let h=Ts(o,{relative:u.relative}),f=It(),p=v.useContext(ca),{navigator:y,basename:w}=v.useContext(ut),b=p!=null&&mx(h)&&l===!0,g=y.encodeLocation?y.encodeLocation(h).pathname:h.pathname,x=f.pathname,m=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(x=x.toLowerCase(),m=m?m.toLowerCase():null,g=g.toLowerCase()),m&&w&&(m=Lt(m,w)||m);const j=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let _=x===g||!s&&x.startsWith(g)&&x.charAt(j)==="/",S=m!=null&&(m===g||!s&&m.startsWith(g)&&m.charAt(g.length)==="/"),T={isActive:_,isPending:S,isTransitioning:b},E=_?t:void 0,O;typeof n=="function"?O=n(T):O=[n,_?"active":null,S?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(T):a;return v.createElement(cc,{...u,"aria-current":E,className:O,ref:d,style:N,to:o,viewTransition:l},typeof c=="function"?c(T):c)});ax.displayName="NavLink";var ox=v.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:a,method:o=mi,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:h,...f},p)=>{let y=hx(),w=fx(l,{relative:u}),b=o.toLowerCase()==="get"?"get":"post",g=typeof l=="string"&&Af.test(l),x=m=>{if(c&&c(m),m.defaultPrevented)return;m.preventDefault();let j=m.nativeEvent.submitter,_=(j==null?void 0:j.getAttribute("formmethod"))||o;y(j||m.currentTarget,{fetcherKey:t,method:_,navigate:r,replace:s,state:a,relative:u,preventScrollReset:d,viewTransition:h})};return v.createElement("form",{ref:p,method:b,action:w,onSubmit:n?c:x,...f,"data-discover":!g&&e==="render"?"true":void 0})});ox.displayName="Form";function lx(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Of(e){let t=v.useContext(yn);return se(t,lx(e)),t}function cx(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:a,viewTransition:o}={}){let l=lr(),c=It(),u=Ts(e,{relative:a});return v.useCallback(d=>{if(U0(d,t)){d.preventDefault();let h=r!==void 0?r:ys(c)===ys(u);l(e,{replace:h,state:n,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,u,r,n,t,e,s,a,o])}var ux=0,dx=()=>`__${String(++ux)}__`;function hx(){let{router:e}=Of("useSubmit"),{basename:t}=v.useContext(ut),r=P0();return v.useCallback(async(n,s={})=>{let{action:a,method:o,encType:l,formData:c,body:u}=H0(n,t);if(s.navigate===!1){let d=s.fetcherKey||dx();await e.fetch(d,r,s.action||a,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await e.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function fx(e,{relative:t}={}){let{basename:r}=v.useContext(ut),n=v.useContext(dt);se(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),a={...Ts(e||".",{relative:t})},o=It();if(e==null){a.search=o.search;let l=new URLSearchParams(a.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let d=l.toString();a.search=d?`?${d}`:""}}return(!e||e===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:Et([r,a.pathname])),ys(a)}function mx(e,{relative:t}={}){let r=v.useContext(jf);se(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Of("useViewTransitionState"),s=Ts(e,{relative:t});if(!r.isTransitioning)return!1;let a=Lt(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Lt(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Bi(s.pathname,o)!=null||Bi(s.pathname,a)!=null}const px="modulepreload",gx=function(e){return"/"+e},zu={},Ps=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=gx(c),c in zu)return;zu[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":px,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})},xx=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ps(async()=>{const{default:n}=await Promise.resolve().then(()=>wn);return{default:n}},[]).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class uc extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class yx extends uc{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Du extends uc{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Fu extends uc{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Jo;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Jo||(Jo={}));var vx=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class wx{constructor(t,{headers:r={},customFetch:n,region:s=Jo.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=xx(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return vx(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(w=>{throw new yx(w)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Du(h);if(!h.ok)throw new Fu(h);let p=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),y;return p==="application/json"?y=yield h.json():p==="application/octet-stream"?y=yield h.blob():p==="text/event-stream"?y=h:p==="multipart/form-data"?y=yield h.formData():y=yield h.text(),{data:y,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof Fu||s instanceof Du?s.context:void 0}}})}}var Le={},dc={},da={},As={},ha={},fa={},bx=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},hn=bx();const jx=hn.fetch,Rf=hn.fetch.bind(hn),Lf=hn.Headers,_x=hn.Request,Nx=hn.Response,wn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Lf,Request:_x,Response:Nx,default:Rf,fetch:jx},Symbol.toStringTag,{value:"Module"})),kx=gm(wn);var ma={};Object.defineProperty(ma,"__esModule",{value:!0});let Sx=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};ma.default=Sx;var $f=Qe&&Qe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fa,"__esModule",{value:!0});const Cx=$f(kx),Ex=$f(ma);let Tx=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Cx.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,c,u;let d=null,h=null,f=null,p=a.status,y=a.statusText;if(a.ok){if(this.method!=="HEAD"){const x=await a.text();x===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=x:h=JSON.parse(x))}const b=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),g=(c=a.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");b&&g&&g.length>1&&(f=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,p=406,y="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const b=await a.text();try{d=JSON.parse(b),Array.isArray(d)&&a.status===404&&(h=[],d=null,p=200,y="OK")}catch{a.status===404&&b===""?(p=204,y="No Content"):d={message:b}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,p=200,y="OK"),d&&this.shouldThrowOnError)throw new Ex.default(d)}return{error:d,data:h,count:f,status:p,statusText:y}});return this.shouldThrowOnError||(s=s.catch(a=>{var o,l,c;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};fa.default=Tx;var Px=Qe&&Qe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ha,"__esModule",{value:!0});const Ax=Px(fa);let Ox=class extends Ax.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:a=s}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:a=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};ha.default=Ox;var Rx=Qe&&Qe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(As,"__esModule",{value:!0});const Lx=Rx(ha);let $x=class extends Lx.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${a}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};As.default=$x;var Ix=Qe&&Qe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(da,"__esModule",{value:!0});const On=Ix(As);let Mx=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let a=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new On.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var s;const a="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new On.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:a=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new On.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:r}={}){var n;const s="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new On.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new On.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};da.default=Mx;var If=Qe&&Qe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dc,"__esModule",{value:!0});const zx=If(da),Dx=If(As);let Fx=class Mf{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new zx.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Mf(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:a}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(l="POST",u=r);const d=new Headers(this.headers);return a&&d.set("Prefer",`count=${a}`),new Dx.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};dc.default=Fx;var bn=Qe&&Qe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Le,"__esModule",{value:!0});Le.PostgrestError=Le.PostgrestBuilder=Le.PostgrestTransformBuilder=Le.PostgrestFilterBuilder=Le.PostgrestQueryBuilder=Le.PostgrestClient=void 0;const zf=bn(dc);Le.PostgrestClient=zf.default;const Df=bn(da);Le.PostgrestQueryBuilder=Df.default;const Ff=bn(As);Le.PostgrestFilterBuilder=Ff.default;const Uf=bn(ha);Le.PostgrestTransformBuilder=Uf.default;const Bf=bn(fa);Le.PostgrestBuilder=Bf.default;const Wf=bn(ma);Le.PostgrestError=Wf.default;var Ux=Le.default={PostgrestClient:zf.default,PostgrestQueryBuilder:Df.default,PostgrestFilterBuilder:Ff.default,PostgrestTransformBuilder:Uf.default,PostgrestBuilder:Bf.default,PostgrestError:Wf.default};const{PostgrestClient:Bx,PostgrestQueryBuilder:Bw,PostgrestFilterBuilder:Ww,PostgrestTransformBuilder:Hw,PostgrestBuilder:qw,PostgrestError:Vw}=Ux;class Wx{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Hx="2.15.5",qx=`realtime-js/${Hx}`,Vx="1.0.0",Qo=1e4,Kx=1e3,Gx=100;var Jn;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Jn||(Jn={}));var fe;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(fe||(fe={}));var it;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(it||(it={}));var Yo;(function(e){e.websocket="websocket"})(Yo||(Yo={}));var pr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(pr||(pr={}));class Jx{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),a=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+s));o=o+s;const c=n.decode(t.slice(o,o+a));o=o+a;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Hf{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Q;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Q||(Q={}));const Uu=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((a,o)=>(a[o]=Qx(o,e,t,s),a),{})},Qx=(e,t,r,n)=>{const s=t.find(l=>l.name===e),a=s==null?void 0:s.type,o=r[e];return a&&!n.includes(a)?qf(a,o):Xo(o)},qf=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return ey(t,r)}switch(e){case Q.bool:return Yx(t);case Q.float4:case Q.float8:case Q.int2:case Q.int4:case Q.int8:case Q.numeric:case Q.oid:return Xx(t);case Q.json:case Q.jsonb:return Zx(t);case Q.timestamp:return ty(t);case Q.abstime:case Q.date:case Q.daterange:case Q.int4range:case Q.int8range:case Q.money:case Q.reltime:case Q.text:case Q.time:case Q.timestamptz:case Q.timetz:case Q.tsrange:case Q.tstzrange:return Xo(t);default:return Xo(t)}},Xo=e=>e,Yx=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Xx=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Zx=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},ey=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const o=e.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>qf(t,l))}return e},ty=e=>typeof e=="string"?e.replace(" ","T"):e,Vf=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Va{constructor(t,r,n={},s=Qo){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Bu;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Bu||(Bu={}));class Qn{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Qn.syncState(this.state,s,a,o),this.pendingDiffs.forEach(c=>{this.state=Qn.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Qn.syncDiff(this.state,s,a,o),l())}),this.onJoin((s,a,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:o})}),this.onLeave((s,a,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const a=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(a,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=a[u];if(h){const f=d.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),y=d.filter(b=>p.indexOf(b.presence_ref)<0),w=h.filter(b=>f.indexOf(b.presence_ref)<0);y.length>0&&(l[u]=y),w.length>0&&(c[u]=w)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);t[l].unshift(...f)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Wu;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Wu||(Wu={}));var Yn;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Yn||(Yn={}));var _t;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(_t||(_t={}));class hc{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=fe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Va(this,it.join,this.params,this.timeout),this.rejoinTimer=new Hf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=fe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=fe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=fe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(it.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Qn(this),this.broadcastEndpointURL=Vf(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==fe.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Yn.PRESENCE]&&this.bindings[Yn.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(_t.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(_t.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var y;if(this.socket.setAuth(),p===void 0){t==null||t(_t.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,b=(y=w==null?void 0:w.length)!==null&&y!==void 0?y:0,g=[];for(let x=0;x<b;x++){const m=w[x],{filter:{event:j,schema:_,table:S,filter:T}}=m,E=p&&p[x];if(E&&E.event===j&&E.schema===_&&E.table===S&&E.filter===T)g.push(Object.assign(Object.assign({},m),{id:E.id}));else{this.unsubscribe(),this.state=fe.errored,t==null||t(_t.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(_t.SUBSCRIBED);return}}).receive("error",p=>{this.state=fe.errored,t==null||t(_t.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(_t.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===fe.joined&&t===Yn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=fe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(it.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Va(this,it.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=fe.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Va(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Gx){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,a;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=it;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var y,w,b;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((b=(w=p.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(f,n)):(a=this.bindings[o])===null||a===void 0||a.filter(p=>{var y,w,b,g,x,m;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const j=p.id,_=(y=p.filter)===null||y===void 0?void 0:y.event;return j&&((w=r.ids)===null||w===void 0?void 0:w.includes(j))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const j=(x=(g=p==null?void 0:p.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return j==="*"||j===((m=r==null?void 0:r.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:w,table:b,commit_timestamp:g,type:x,errors:m}=y;f=Object.assign(Object.assign({},{schema:w,table:b,commit_timestamp:g,eventType:x,new:{},old:{},errors:m}),this._getPayloadRecords(y))}p.callback(f,n)})}_isClosed(){return this.state===fe.closed}_isJoined(){return this.state===fe.joined}_isJoining(){return this.state===fe.joining}_isLeaving(){return this.state===fe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&hc.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(it.close,{},t)}_onError(t){this._on(it.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=fe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Uu(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Uu(t.columns,t.old_record)),r}}const Ka=()=>{},Xs={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ry=[1e3,2e3,5e3,1e4],ny=1e4,sy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class iy{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Qo,this.transport=null,this.heartbeatIntervalMs=Xs.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ka,this.ref=0,this.reconnectTimer=null,this.logger=Ka,this.conn=null,this.sendBuffer=[],this.serializer=new Jx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...o)=>Ps(async()=>{const{default:l}=await Promise.resolve().then(()=>wn);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...o)=>a(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Yo.websocket}`,this.httpEndpoint=Vf(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Wx.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Vx}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Jn.connecting:return pr.Connecting;case Jn.open:return pr.Open;case Jn.closing:return pr.Closing;default:return pr.Closed}}isConnected(){return this.connectionState()===pr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new hc(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:s,ref:a}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Kx,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Xs.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:a,ref:o}=r,l=o?`(${o})`:"",c=a.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,a,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(it.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([sy],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:qx};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(it.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Hf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Xs.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,a,o,l,c,u,d;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Qo,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Xs.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Ka,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:h=>ry[h-1]||ny,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(h,f)=>f(JSON.stringify(h)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class fc extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function me(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class ay extends fc{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Zo extends fc{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var oy=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Kf=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ps(async()=>{const{default:n}=await Promise.resolve().then(()=>wn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},ly=()=>oy(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ps(()=>Promise.resolve().then(()=>wn),void 0)).Response:Response}),el=e=>{if(Array.isArray(e))return e.map(r=>el(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=el(n)}),t},cy=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Tr=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Ga=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),uy=(e,t,r)=>Tr(void 0,void 0,void 0,function*(){const n=yield ly();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const a=e.status||500,o=(s==null?void 0:s.statusCode)||a+"";t(new ay(Ga(s),a,o))}).catch(s=>{t(new Zo(Ga(s),s))}):t(new Zo(Ga(e),e))}),dy=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(cy(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function Os(e,t,r,n,s,a){return Tr(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,dy(t,n,s,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>uy(c,l,n))})})}function Wi(e,t,r,n){return Tr(this,void 0,void 0,function*(){return Os(e,"GET",t,r,n)})}function gt(e,t,r,n,s){return Tr(this,void 0,void 0,function*(){return Os(e,"POST",t,n,s,r)})}function tl(e,t,r,n,s){return Tr(this,void 0,void 0,function*(){return Os(e,"PUT",t,n,s,r)})}function hy(e,t,r,n){return Tr(this,void 0,void 0,function*(){return Os(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Gf(e,t,r,n,s){return Tr(this,void 0,void 0,function*(){return Os(e,"DELETE",t,n,s,r)})}var Ce=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const fy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Hu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class my{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=Kf(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return Ce(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},Hu),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(t=="PUT"?tl:gt)(this.fetch,`${this.url}/object/${d}`,a,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(me(a))return{data:null,error:a};throw a}})}upload(t,r,n){return Ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Ce(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Hu.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield tl(this.fetch,l.toString(),c,{headers:d});return{data:{path:a,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(me(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Ce(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const a=yield gt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new fc("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(me(n))return{data:null,error:n};throw n}})}update(t,r,n){return Ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Ce(this,void 0,void 0,function*(){try{return{data:yield gt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(me(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Ce(this,void 0,void 0,function*(){try{return{data:{path:(yield gt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(me(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Ce(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),a=yield gt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(me(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Ce(this,void 0,void 0,function*(){try{const s=yield gt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(me(s))return{data:null,error:s};throw s}})}download(t,r){return Ce(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Wi(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(me(l))return{data:null,error:l};throw l}})}info(t){return Ce(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Wi(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:el(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(me(n))return{data:null,error:n};throw n}})}exists(t){return Ce(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield hy(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(me(n)&&n instanceof Zo){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&s.push(a);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return Ce(this,void 0,void 0,function*(){try{return{data:yield Gf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(me(r))return{data:null,error:r};throw r}})}list(t,r,n){return Ce(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},fy),r),{prefix:t||""});return{data:yield gt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(me(s))return{data:null,error:s};throw s}})}listV2(t,r){return Ce(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield gt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(me(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const py="2.12.1",gy={"X-Client-Info":`storage-js/${py}`};var Or=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class xy{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const a=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},gy),r),this.fetch=Kf(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Or(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(me(t))return{data:null,error:t};throw t}})}getBucket(t){return Or(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(me(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Or(this,void 0,void 0,function*(){try{return{data:yield gt(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(me(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Or(this,void 0,void 0,function*(){try{return{data:yield tl(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(me(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Or(this,void 0,void 0,function*(){try{return{data:yield gt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(me(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Or(this,void 0,void 0,function*(){try{return{data:yield Gf(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(me(r))return{data:null,error:r};throw r}})}}class yy extends xy{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new my(this.url,this.headers,t,this.fetch)}}const vy="2.57.4";let zn="";typeof Deno<"u"?zn="deno":typeof document<"u"?zn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zn="react-native":zn="node";const wy={"X-Client-Info":`supabase-js-${zn}/${vy}`},by={headers:wy},jy={schema:"public"},_y={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ny={};var ky=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Sy=e=>{let t;return e?t=e:typeof fetch>"u"?t=Rf:t=fetch,(...r)=>t(...r)},Cy=()=>typeof Headers>"u"?Lf:Headers,Ey=(e,t,r)=>{const n=Sy(r),s=Cy();return(a,o)=>ky(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},o),{headers:u}))})};var Ty=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function Py(e){return e.endsWith("/")?e:e+"/"}function Ay(e,t){var r,n;const{db:s,auth:a,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Ty(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function Oy(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Py(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Jf="2.71.1",Mr=30*1e3,rl=3,Ja=rl*Mr,Ry="http://localhost:9999",Ly="supabase.auth.token",$y={"X-Client-Info":`gotrue-js/${Jf}`},nl="X-Supabase-Api-Version",Qf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Iy=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,My=10*60*1e3;class mc extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function W(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class zy extends mc{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Dy(e){return W(e)&&e.name==="AuthApiError"}class Yf extends mc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class cr extends mc{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Dt extends cr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Fy(e){return W(e)&&e.name==="AuthSessionMissingError"}class Zs extends cr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ei extends cr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ti extends cr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Uy(e){return W(e)&&e.name==="AuthImplicitGrantRedirectError"}class qu extends cr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class sl extends cr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Qa(e){return W(e)&&e.name==="AuthRetryableFetchError"}class Vu extends cr{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class il extends cr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Hi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ku=` 	
\r=`.split(""),By=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Ku.length;t+=1)e[Ku[t].charCodeAt(0)]=-2;for(let t=0;t<Hi.length;t+=1)e[Hi[t].charCodeAt(0)]=t;return e})();function Gu(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Hi[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Hi[n]),t.queuedBits-=6}}function Xf(e,t,r){const n=By[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Ju(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=o=>{qy(o,n,r)};for(let o=0;o<e.length;o+=1)Xf(e.charCodeAt(o),s,a);return t.join("")}function Wy(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Hy(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Wy(n,t)}}function qy(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Vy(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Xf(e.charCodeAt(s),r,n);return new Uint8Array(t)}function Ky(e){const t=[];return Hy(e,r=>t.push(r)),new Uint8Array(t)}function Gy(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Gu(s,r,n)),Gu(null,r,n),t.join("")}function Jy(e){return Math.round(Date.now()/1e3)+e}function Qy(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const rt=()=>typeof window<"u"&&typeof document<"u",ur={tested:!1,writable:!1},Zf=()=>{if(!rt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ur.tested)return ur.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ur.tested=!0,ur.writable=!0}catch{ur.tested=!0,ur.writable=!1}return ur.writable};function Yy(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const em=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ps(async()=>{const{default:n}=await Promise.resolve().then(()=>wn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Xy=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",zr=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},dr=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},zt=async(e,t)=>{await e.removeItem(t)};class pa{constructor(){this.promise=new pa.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}pa.promiseConstructor=Promise;function Ya(e){const t=e.split(".");if(t.length!==3)throw new il("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Iy.test(t[n]))throw new il("JWT not in base64url format");return{header:JSON.parse(Ju(t[0])),payload:JSON.parse(Ju(t[1])),signature:Vy(t[2]),raw:{header:t[0],payload:t[1]}}}async function Zy(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function ev(e,t){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){n(o);return}}catch(o){if(!t(a,o)){s(o);return}}})()})}function tv(e){return("0"+e.toString(16)).substr(-2)}function rv(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,tv).join("")}async function nv(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function sv(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await nv(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Rr(e,t,r=!1){const n=rv();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await zr(e,`${t}-code-verifier`,s);const a=await sv(n);return[a,n===a?"plain":"s256"]}const iv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function av(e){const t=e.headers.get(nl);if(!t||!t.match(iv))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function ov(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function lv(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const cv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Lr(e){if(!cv.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Xa(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Qu(e){return JSON.parse(JSON.stringify(e))}var uv=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const mr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),dv=[502,503,504];async function Yu(e){var t;if(!Xy(e))throw new sl(mr(e),0);if(dv.includes(e.status))throw new sl(mr(e),e.status);let r;try{r=await e.json()}catch(a){throw new Yf(mr(a),a)}let n;const s=av(e);if(s&&s.getTime()>=Qf["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Vu(mr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Dt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new Vu(mr(r),e.status,r.weak_password.reasons);throw new zy(mr(r),e.status||500,n)}const hv=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function H(e,t,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[nl]||(a[nl]=Qf["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await fv(e,t,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function fv(e,t,r,n,s,a){const o=hv(t,n,s,a);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new sl(mr(c),0)}if(l.ok||await Yu(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Yu(c)}}function bt(e){var t;let r=null;xv(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Jy(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Xu(e){const t=bt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ht(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function mv(e){return{data:e,error:null}}function pv(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=e,o=uv(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function gv(e){return e}function xv(e){return e.access_token&&e.refresh_token&&e.expires_in}const Za=["global","local","others"];var yv=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class vv{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=em(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Za[0]){if(Za.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Za.join(", ")}`);try{return await H(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(W(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await H(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ht})}catch(n){if(W(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=yv(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await H(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:pv,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(W(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await H(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ht})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await H(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:gv});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);u[`${b}Page`]=w}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(W(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Lr(t);try{return await H(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ht})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Lr(t);try{return await H(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ht})}catch(n){if(W(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Lr(t);try{return await H(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ht})}catch(n){if(W(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Lr(t.userId);try{const{data:r,error:n}=await H(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(W(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Lr(t.userId),Lr(t.id);try{return{data:await H(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(W(r))return{data:null,error:r};throw r}}}function Zu(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function wv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const $r={debug:!!(globalThis&&Zf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class tm extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class bv extends tm{}async function jv(e,t,r){$r.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),$r.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){$r.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{$r.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw $r.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new bv(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if($r.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}wv();const _v={url:Ry,storageKey:Ly,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:$y,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ed(e,t,r){return await r()}const Ir={};class vs{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=vs.nextInstanceID,vs.nextInstanceID+=1,this.instanceID>0&&rt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},_v),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new vv({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=em(s.fetch),this.lock=s.lock||ed,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:rt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=jv:this.lock=ed,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Zf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Zu(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Zu(this.memoryStorage)),rt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Ir[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Ir[this.storageKey]=Object.assign(Object.assign({},Ir[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Ir[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ir[this.storageKey]=Object.assign(Object.assign({},Ir[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Jf}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=Yy(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),rt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Uy(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return W(r)?{error:r}:{error:new Yf("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const a=await H(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:bt}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(W(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,n,s;try{let a;if("email"in t){const{email:d,password:h,options:f}=t;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Rr(this.storage,this.storageKey)),a=await H(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:y},xform:bt})}else if("phone"in t){const{phone:d,password:h,options:f}=t;a=await H(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:bt})}else throw new ei("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(W(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:o,options:l}=t;r=await H(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Xu})}else if("phone"in t){const{phone:a,password:o,options:l}=t;r=await H(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Xu})}else throw new ei("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Zs}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(W(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,a,o,l,c,u,d,h,f,p;let y,w;if("message"in t)y=t.message,w=t.signature;else{const{chain:b,wallet:g,statement:x,options:m}=t;let j;if(rt())if(typeof g=="object")j=g;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))j=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=g}const _=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const S=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),x?{statement:x}:null));let T;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")T=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)T=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)y=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),w=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${_.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(n=m==null?void 0:m.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=m==null?void 0:m.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((o=m==null?void 0:m.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((c=m==null?void 0:m.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((u=m==null?void 0:m.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((h=(d=m==null?void 0:m.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...m.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const S=await j.signMessage(new TextEncoder().encode(y),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=S}}try{const{data:b,error:g}=await H(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Gy(w)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:bt});if(g)throw g;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Zs}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:g})}catch(b){if(W(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await dr(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:a,error:o}=await H(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:bt});if(await zt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Zs}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:o})}catch(a){if(W(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:a,nonce:o}=t,l=await H(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:bt}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Zs}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(W(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,a,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Rr(this.storage,this.storageKey));const{error:h}=await H(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await H(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new ei("You must provide either an email or phone number.")}catch(l){if(W(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,a;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await H(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:bt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(W(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await Rr(this.storage,this.storageKey)),await H(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:mv})}catch(a){if(W(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Dt;const{error:s}=await H(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(W(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:a}=t,{error:o}=await H(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:a}=t,{data:o,error:l}=await H(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new ei("You must provide either an email or phone number and a type")}catch(r){if(W(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await dr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Ja:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await dr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Xa()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await H(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ht}):await this._useSession(async r=>{var n,s,a;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Dt}:await H(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Ht})})}catch(r){if(W(r))return Fy(r)&&(await this._removeSession(),await zt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new Dt;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Rr(this.storage,this.storageKey));const{data:u,error:d}=await H(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Ht});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(W(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Dt;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:o}=Ya(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(W(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Dt;const{session:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(W(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!rt())throw new ti("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ti(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new qu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ti("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new qu("No code detected.");const{data:x,error:m}=await this._exchangeCodeForSession(t.code);if(m)throw m;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!a||!l||!o||!u)throw new ti("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const p=f-d;p*1e3<=Mr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const y=f-h;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,d);const{data:w,error:b}=await this._getUser(a);if(b)throw b;const g={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(n){if(W(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await dr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{error:a};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(Dy(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await zt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=Qy(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Rr(this.storage,this.storageKey,!0));try{return await H(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(W(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(W(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var o,l,c,u,d;const{data:h,error:f}=a;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await H(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return rt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(W(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)throw o;return await H(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await ev(async s=>(s>0&&await Zy(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await H(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:bt})),(s,a)=>{const o=200*Math.pow(2,s);return a&&Qa(a)&&Date.now()+o-n<Mr})}catch(n){if(this._debug(r,"error",n),W(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),rt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await dr(this.storage,this.storageKey);if(s&&this.userStorage){let o=await dr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await zr(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Xa()}else if(s&&!s.user&&!s.user){const o=await dr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await zt(this.storage,this.storageKey+"-user"),await zr(this.storage,this.storageKey,s)):s.user=Xa()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ja;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${Ja}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Qa(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Dt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new pa;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new Dt;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),W(a)){const o={session:null,error:a};return Qa(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await zr(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const a=Qu(s);await zr(this.storage,this.storageKey,a)}else{const s=Qu(r);await zr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await zt(this.storage,this.storageKey),await zt(this.storage,this.storageKey+"-code-verifier"),await zt(this.storage,this.storageKey+"-user"),this.userStorage&&await zt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&rt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Mr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Mr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Mr}ms, refresh threshold is ${rl} ticks`),s<=rl&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof tm)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!rt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await Rr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await H(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await H(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const{data:o,error:l}=await H(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(W(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await H(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(W(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:a}=t;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Ya(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+My>s)return n;const{data:a,error:o}=await H(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,n=a.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:y}=await this.getSession();if(y||!p.session)return{data:null,error:y};n=p.session.access_token}const{header:s,payload:a,signature:o,raw:{header:l,payload:c}}=Ya(n);r!=null&&r.allowExpired||ov(a.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:a,header:s,signature:o},error:null}}const d=lv(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,Ky(`${l}.${c}`)))throw new il("Invalid JWT signature");return{data:{claims:a,header:s,signature:o},error:null}}catch(n){if(W(n))return{data:null,error:n};throw n}}}vs.nextInstanceID=0;const Nv=vs;class kv extends Nv{constructor(t){super(t)}}var Sv=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Cv{constructor(t,r,n){var s,a,o;this.supabaseUrl=t,this.supabaseKey=r;const l=Oy(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:jy,realtime:Ny,auth:Object.assign(Object.assign({},_y),{storageKey:c}),global:by},d=Ay(n??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=Ey(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Bx(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new yy(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new wx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Sv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:a,storageKey:o,flowType:l,lock:c,debug:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new kv({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:a,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new iy(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Ev=(e,t,r)=>new Cv(e,t,r);function Tv(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Tv()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Pv={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indqa3hscHd2emRmenNncWhoZnNxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMxNTM2MDIsImV4cCI6MjA3ODcyOTYwMn0.O1pFnmoWxKWE1Bj3QaZJxEv9ZdWyYji0QgWafATY3l8",VITE_SUPABASE_URL:"https://wjkxlpwvzdfzsgqhhfsq.supabase.co"},rm="https://wjkxlpwvzdfzsgqhhfsq.supabase.co",gi="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indqa3hscHd2emRmenNncWhoZnNxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMxNTM2MDIsImV4cCI6MjA3ODcyOTYwMn0.O1pFnmoWxKWE1Bj3QaZJxEv9ZdWyYji0QgWafATY3l8";console.log("=== SUPABASE DEBUG ===");console.log("All env vars:",Pv);console.log("URL from env:","https://wjkxlpwvzdfzsgqhhfsq.supabase.co");console.log("Final URL:",rm);console.log("Key length:",gi==null?void 0:gi.length);console.log("======================");const D=Ev(rm,gi,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});D.from("organizations").select("count",{count:"exact",head:!0}).then(({error:e,count:t})=>{e?console.error("Supabase connection test failed:",e):console.log(" Supabase connected successfully! Organizations count:",t)});const nm=v.createContext(void 0);function Av({children:e}){const[t,r]=v.useState(null),[n,s]=v.useState(null),[a,o]=v.useState(!0);v.useEffect(()=>{D.auth.getSession().then(({data:{session:d}})=>{s(d),r((d==null?void 0:d.user)??null),o(!1)});const{data:{subscription:u}}=D.auth.onAuthStateChange((d,h)=>{(async()=>(s(h),r((h==null?void 0:h.user)??null),o(!1)))()});return()=>u.unsubscribe()},[]);const l=async()=>{const{error:u}=await D.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(u)throw console.error("Error signing in with Google:",u),u},c=async()=>{const{error:u}=await D.auth.signOut();if(u)throw console.error("Error signing out:",u),u};return i.jsx(nm.Provider,{value:{user:t,session:n,loading:a,signInWithGoogle:l,signOut:c},children:e})}function et(){const e=v.useContext(nm);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const sm=v.createContext(void 0);function Ov({children:e}){const{user:t}=et(),[r,n]=v.useState([]),[s,a]=v.useState(null),[o,l]=v.useState(null),[c,u]=v.useState(!0),d=async()=>{if(!t){n([]),a(null),u(!1);return}try{const{data:p,error:y}=await D.from("organization_members").select("organization_id, role").eq("user_id",t.id);if(y)throw y;if(!p||p.length===0){n([]),a(null),u(!1);return}const w=p.map(j=>j.organization_id),{data:b,error:g}=await D.from("organizations").select("*").in("id",w);if(g)throw g;n(b||[]);const x=localStorage.getItem("currentOrganizationId"),m=x?b==null?void 0:b.find(j=>j.id===x):b==null?void 0:b[0];if(m){a(m);const j=p.find(_=>_.organization_id===m.id);l((j==null?void 0:j.role)||null),localStorage.setItem("currentOrganizationId",m.id)}}catch(p){console.error("Error fetching organizations:",p)}finally{u(!1)}};v.useEffect(()=>{d()},[t]);const h=p=>{const y=r.find(w=>w.id===p);y&&(a(y),localStorage.setItem("currentOrganizationId",p),D.from("organization_members").select("role").eq("organization_id",p).eq("user_id",t.id).maybeSingle().then(({data:w})=>{l((w==null?void 0:w.role)||null)}))},f=async()=>{u(!0),await d()};return i.jsx(sm.Provider,{value:{organizations:r,currentOrganization:s,memberRole:o,loading:c,switchOrganization:h,refetchOrganizations:f},children:e})}function ht(){const e=v.useContext(sm);if(e===void 0)throw new Error("useOrganization must be used within an OrganizationProvider");return e}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),z=(e,t)=>{const r=v.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>v.createElement("svg",{ref:d,...Rv,width:s,height:s,stroke:n,strokeWidth:o?Number(a)*24/Number(s):a,className:["lucide",`lucide-${Lv(e)}`,l].join(" "),...u},[...t.map(([h,f])=>v.createElement(h,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const im=z("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=z("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=z("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=z("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=z("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=z("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=z("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=z("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=z("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=z("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=z("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=z("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=z("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=z("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=z("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=z("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=z("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=z("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=z("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=z("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=z("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=z("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=z("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=z("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=z("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=z("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=z("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=z("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=z("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=z("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=z("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=z("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=z("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=z("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=z("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=z("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=z("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=z("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=z("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=z("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=z("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=z("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=z("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=z("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=z("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=z("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=z("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=z("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),hm=v.createContext(void 0);function lw({children:e}){const[t,r]=v.useState([]),n=v.useCallback(a=>{r(o=>o.filter(l=>l.id!==a))},[]),s=v.useCallback((a,o)=>{const l=Math.random().toString(36).substring(2,9);r(c=>[...c,{id:l,type:a,message:o}]),setTimeout(()=>{n(l)},3e3)},[n]);return i.jsxs(hm.Provider,{value:{addToast:s,removeToast:n},children:[e,i.jsx("div",{className:"fixed bottom-4 right-4 z-[60] flex flex-col gap-2 pointer-events-none",children:t.map(a=>i.jsxs("div",{className:`
              pointer-events-auto flex items-center gap-3 px-4 py-3 rounded-lg shadow-lg border transform transition-all duration-300 animate-in slide-in-from-bottom-5 fade-in
              ${a.type==="success"?"bg-white border-green-200 text-gray-800":""}
              ${a.type==="error"?"bg-white border-red-200 text-gray-800":""}
              ${a.type==="info"?"bg-white border-blue-200 text-gray-800":""}
            `,children:[a.type==="success"&&i.jsx(gc,{className:"w-5 h-5 text-green-500"}),a.type==="error"&&i.jsx(pc,{className:"w-5 h-5 text-red-500"}),a.type==="info"&&i.jsx(Vv,{className:"w-5 h-5 text-blue-500"}),i.jsx("p",{className:"text-sm font-medium",children:a.message}),i.jsx("button",{onClick:()=>n(a.id),className:"text-gray-400 hover:text-gray-600 ml-2",children:i.jsx(be,{className:"w-4 h-4"})})]},a.id))})]})}function yc(){const e=v.useContext(hm);if(e===void 0)throw new Error("useToast must be used within a ToastProvider");return e}function cw(){const{user:e,loading:t,signInWithGoogle:r}=et(),n=lr();v.useEffect(()=>{e&&!t&&n("/dashboard")},[e,t,n]);const s=async()=>{try{await r()}catch(a){console.error("Sign in error:",a)}};return t?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-slate-100",children:i.jsx(te,{className:"w-8 h-8 animate-spin text-blue-600"})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100",children:i.jsx("div",{className:"w-full max-w-md px-8",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[i.jsxs("div",{className:"flex flex-col items-center mb-8",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center mb-4",children:i.jsx(js,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"GAS Operating System"}),i.jsx("p",{className:"text-gray-600 text-center",children:"Manage projects, CRM, marketing, social media, AI agents, and MCP servers in one place"})]}),i.jsxs("button",{onClick:s,className:"w-full bg-white border-2 border-gray-200 hover:border-gray-300 text-gray-700 font-semibold py-3 px-4 rounded-lg transition duration-200 flex items-center justify-center gap-3 hover:shadow-md",children:[i.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[i.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),i.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),i.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),i.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),i.jsx("p",{className:"text-xs text-gray-500 text-center mt-6",children:"By continuing, you agree to our Terms of Service and Privacy Policy"})]})})})}function uw(){const e=lr();return v.useEffect(()=>{(async()=>{try{const{data:r,error:n}=await D.auth.getSession();if(n){console.error("Auth callback error:",n),e("/login");return}r.session?e("/dashboard"):e("/login")}catch(r){console.error("Unexpected error:",r),e("/login")}})()},[e]),i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-slate-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx(te,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Completing sign in..."})]})})}function dw(){const{user:e}=et(),{refetchOrganizations:t}=ht(),r=lr(),[n,s]=v.useState(!1),[a,o]=v.useState({name:"",slug:""}),l=d=>d.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""),c=d=>{o({name:d,slug:l(d)})},u=async d=>{if(d.preventDefault(),!!e){s(!0);try{const{data:h,error:f}=await D.from("organizations").insert({name:a.name,slug:a.slug,subscription_tier:"free",subscription_status:"trial"}).select().single();if(f)throw f;const{error:p}=await D.from("organization_members").insert({organization_id:h.id,user_id:e.id,role:"owner",joined_at:new Date().toISOString()});if(p)throw p;const{error:y}=await D.from("workspaces").insert({organization_id:h.id,name:"General",description:"Default workspace",is_default:!0,created_by:e.id});if(y)throw y;await t(),r("/dashboard")}catch(h){console.error("Error creating organization:",h),alert(h.message||"Failed to create organization")}finally{s(!1)}}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100 p-4",children:i.jsx("div",{className:"w-full max-w-md",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[i.jsxs("div",{className:"flex flex-col items-center mb-8",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center mb-4",children:i.jsx(ws,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Create Your Organization"}),i.jsx("p",{className:"text-gray-600 text-center",children:"Let's get started by setting up your workspace"})]}),i.jsxs("form",{onSubmit:u,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Organization Name"}),i.jsx("input",{type:"text",id:"name",required:!0,value:a.name,onChange:d=>c(d.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none transition",placeholder:"Acme Inc."})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-700 mb-2",children:"URL Identifier"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sm text-gray-500 mr-2",children:"app.com/"}),i.jsx("input",{type:"text",id:"slug",required:!0,value:a.slug,onChange:d=>o({...a,slug:d.target.value}),className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none transition",placeholder:"acme-inc",pattern:"[a-z0-9-]+"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only lowercase letters, numbers, and hyphens"})]}),i.jsx("button",{type:"submit",disabled:n||!a.name||!a.slug,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:n?i.jsxs(i.Fragment,{children:[i.jsx(te,{className:"w-5 h-5 animate-spin"}),"Creating..."]}):"Create Organization"})]})]})})})}function ga(){const[e,t]=v.useState([]),[r,n]=v.useState(!0),[s,a]=v.useState(null),{currentOrganization:o}=ht(),l=v.useCallback(async()=>{if(!o){t([]),n(!1);return}n(!0);try{const{data:h,error:f}=await D.from("projects").select("*").eq("organization_id",o.id).order("created_at",{ascending:!1});if(f)throw f;const p=(h||[]).map(y=>{var w,b,g,x,m,j;return{id:y.id,organization_id:y.organization_id,name:y.name,description:y.description,status:y.status,estimated_completion:((w=y.custom_fields)==null?void 0:w.estimated_completion)||null,tools_used:((b=y.custom_fields)==null?void 0:b.tools_used)||null,proposed_tech:((g=y.custom_fields)==null?void 0:g.proposed_tech)||null,project_details:((x=y.custom_fields)==null?void 0:x.project_details)||null,cost_to_operate:((m=y.custom_fields)==null?void 0:m.cost_to_operate)||null,gas_fee:((j=y.custom_fields)==null?void 0:j.gas_fee)||null,budget:y.budget,priority:y.priority||"medium",assigned_to:y.owner_id,created_by:y.created_by,created_at:y.created_at,updated_at:y.updated_at,start_date:y.start_date,end_date:y.end_date,color:y.color,icon:y.icon,owner_id:y.owner_id,workspace_id:y.workspace_id}});t(p),a(null)}catch(h){console.error("Error fetching projects:",h),a(h.message)}finally{n(!1)}},[o]);return v.useEffect(()=>{l()},[l]),{projects:e,loading:r,error:s,createProject:async h=>{if(!o)throw new Error("No organization selected");try{const f=(await D.auth.getUser()).data.user,p={estimated_completion:h.estimated_completion,tools_used:h.tools_used,proposed_tech:h.proposed_tech,project_details:h.project_details,cost_to_operate:h.cost_to_operate,gas_fee:h.gas_fee},{data:y,error:w}=await D.from("projects").insert({organization_id:o.id,name:h.name,description:h.description,status:"planning",budget:h.budget,priority:h.priority||"medium",start_date:h.start_date,end_date:h.end_date,owner_id:h.assigned_to||(f==null?void 0:f.id),created_by:f==null?void 0:f.id,custom_fields:p}).select().single();if(w)throw w;return await l(),y}catch(f){throw console.error("Error creating project:",f),f}},updateProject:async(h,f)=>{try{const p=["estimated_completion","tools_used","proposed_tech","project_details","cost_to_operate","gas_fee"],y={};let w=!1;const b={};if(Object.entries(f).forEach(([m,j])=>{p.includes(m)?(y[m]=j,w=!0):m==="assigned_to"?b.owner_id=j:m!=="id"&&m!=="organization_id"&&m!=="created_at"&&m!=="created_by"&&(b[m]=j)}),w){const m=e.find(_=>_.id===h),j={estimated_completion:m==null?void 0:m.estimated_completion,tools_used:m==null?void 0:m.tools_used,proposed_tech:m==null?void 0:m.proposed_tech,project_details:m==null?void 0:m.project_details,cost_to_operate:m==null?void 0:m.cost_to_operate,gas_fee:m==null?void 0:m.gas_fee};b.custom_fields={...j,...y}}const{data:g,error:x}=await D.from("projects").update(b).eq("id",h).select().single();if(x)throw x;return await l(),g}catch(p){throw console.error("Error updating project:",p),p}},deleteProject:async h=>{try{const{error:f}=await D.from("projects").delete().eq("id",h);if(f)throw f;t(p=>p.filter(y=>y.id!==h))}catch(f){throw console.error("Error deleting project:",f),f}},refetch:l}}function xa(){const{currentOrganization:e}=ht(),{user:t}=et(),[r,n]=v.useState([]),[s,a]=v.useState(!0),o=v.useCallback(async()=>{if(!e){n([]),a(!1);return}a(!0);try{const{data:u,error:d}=await D.from("contacts").select("*").eq("organization_id",e.id).order("created_at",{ascending:!1});if(d)throw d;const h=(u||[]).map(f=>{var p,y,w;return{id:f.id,organization_id:f.organization_id,first_name:f.first_name,last_name:f.last_name,email:f.email,phone:f.phone,title:f.title,company_id:f.company_id,company_name:((p=f.custom_fields)==null?void 0:p.company_name)||null,date_of_birth:((y=f.custom_fields)==null?void 0:y.date_of_birth)||null,notes:((w=f.custom_fields)==null?void 0:w.notes)||null,lead_status:f.lead_status||"new",lead_score:f.lead_score||0,tags:f.tags,created_at:f.created_at,updated_at:f.updated_at}});n(h)}catch(u){console.error("Error fetching contacts:",u)}finally{a(!1)}},[e]);return v.useEffect(()=>{o()},[o]),{contacts:r,loading:s,createContact:async u=>{if(!e||!t)throw new Error("No organization or user selected");try{const d={company_name:u.company_name,date_of_birth:u.date_of_birth,notes:u.notes},{data:h,error:f}=await D.from("contacts").insert({organization_id:e.id,first_name:u.first_name,last_name:u.last_name||null,email:u.email||null,phone:u.phone||null,title:u.title||null,lead_status:"new",lead_score:0,custom_fields:d,created_by:t.id}).select().single();if(f)throw f;return await o(),h}catch(d){throw console.error("Error creating contact:",d),d}},updateContact:async(u,d)=>{try{const h=r.find(g=>g.id===u),p={...{company_name:h==null?void 0:h.company_name,date_of_birth:h==null?void 0:h.date_of_birth,notes:h==null?void 0:h.notes},...d.company_name!==void 0&&{company_name:d.company_name},...d.date_of_birth!==void 0&&{date_of_birth:d.date_of_birth},...d.notes!==void 0&&{notes:d.notes}},y={updated_at:new Date().toISOString(),custom_fields:p};d.first_name&&(y.first_name=d.first_name),d.last_name!==void 0&&(y.last_name=d.last_name),d.email!==void 0&&(y.email=d.email),d.phone!==void 0&&(y.phone=d.phone),d.title!==void 0&&(y.title=d.title),d.lead_status&&(y.lead_status=d.lead_status),d.tags&&(y.tags=d.tags);const{data:w,error:b}=await D.from("contacts").update(y).eq("id",u).select().single();if(b)throw b;return await o(),w}catch(h){throw console.error("Error updating contact:",h),h}},refetch:o}}const hw=()=>{const[e,t]=v.useState(!1),[r,n]=v.useState(!1),[s,a]=v.useState([{id:"1",content:`Hi! I'm your AI assistant. I have access to your live project and contact data. Ask me "How many projects do I have?" or "Find contact John".`,sender:"bot",timestamp:new Date}]),[o,l]=v.useState(""),[c,u]=v.useState(!1),d=v.useRef(null),{projects:h}=ga(),{contacts:f}=xa(),p=()=>{var g;(g=d.current)==null||g.scrollIntoView({behavior:"smooth"})};v.useEffect(()=>{p()},[s,c]);const y=g=>{const x=g.toLowerCase();if(x.includes("project")||x.includes("projects")){if(x.includes("how many")||x.includes("count"))return`You currently have ${h.length} projects.`;if(x.includes("list")||x.includes("show"))return`Here are your projects: ${h.map(_=>_.name).join(", ")||"No projects found."}`;const m=h.find(j=>x.includes(j.name.toLowerCase()));if(m)return`Found project "${m.name}": Status is ${m.status}, Budget is $${m.budget||0}. Description: ${m.description}`}if(x.includes("contact")||x.includes("contacts")||x.includes("who is")){if(x.includes("how many")||x.includes("count"))return`You have ${f.length} contacts in your CRM.`;const m=f.find(j=>x.includes(j.first_name.toLowerCase())||j.last_name&&x.includes(j.last_name.toLowerCase()));if(m)return`Found contact: ${m.first_name} ${m.last_name||""}. Email: ${m.email||"N/A"}. Title: ${m.title||"N/A"}.`}return"I can help you manage your data. Try asking about your 'projects' or 'contacts'. For example: 'How many projects do I have?'"},w=()=>{if(!o.trim())return;const g={id:Date.now().toString(),content:o,sender:"user",timestamp:new Date};a(x=>[...x,g]),l(""),u(!0),setTimeout(()=>{const x=y(g.content),m={id:(Date.now()+1).toString(),content:x,sender:"bot",timestamp:new Date};a(j=>[...j,m]),u(!1)},1e3)},b=g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),w())};return e?i.jsx("div",{className:`fixed bottom-6 right-6 z-50 transition-all duration-200 ${r?"w-80 h-14":"w-96 h-[500px]"}`,children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border border-gray-200 flex flex-col h-full overflow-hidden",children:[i.jsxs("div",{className:"bg-blue-600 text-white p-4 flex items-center justify-between cursor-pointer",onClick:()=>!r&&n(!0),children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(js,{size:18}),i.jsx("span",{className:"font-semibold",children:"AI Assistant"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:g=>{g.stopPropagation(),n(!r)},className:"hover:bg-blue-700 p-1 rounded transition-colors",children:r?i.jsx(Yv,{size:16}):i.jsx(Zv,{size:16})}),i.jsx("button",{onClick:g=>{g.stopPropagation(),t(!1)},className:"hover:bg-blue-700 p-1 rounded transition-colors",children:i.jsx(be,{size:16})})]})]}),!r&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[s.map(g=>i.jsx("div",{className:`flex ${g.sender==="user"?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-[85%] rounded-2xl px-4 py-3 shadow-sm ${g.sender==="user"?"bg-blue-600 text-white rounded-tr-none":"bg-white text-gray-800 border border-gray-200 rounded-tl-none"}`,children:[i.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:g.content}),i.jsx("p",{className:`text-[10px] mt-1 ${g.sender==="user"?"text-blue-200":"text-gray-400"}`,children:g.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},g.id)),c&&i.jsx("div",{className:"flex justify-start",children:i.jsxs("div",{className:"bg-white text-gray-800 border border-gray-200 rounded-2xl rounded-tl-none px-4 py-3 shadow-sm flex items-center gap-2",children:[i.jsx(te,{className:"w-4 h-4 animate-spin text-blue-600"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Analyzing data..."})]})}),i.jsx("div",{ref:d})]}),i.jsx("div",{className:"border-t border-gray-200 p-3 bg-white",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:o,onChange:g=>l(g.target.value),onKeyPress:b,placeholder:"Ask about your projects...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none text-sm"}),i.jsx("button",{onClick:w,disabled:!o.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx(es,{size:18})})]})})]})]})}):i.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:i.jsx("button",{onClick:()=>t(!0),className:"bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-full shadow-lg transition-all duration-200 hover:scale-105",children:i.jsx(Dn,{size:24})})})};function fw(){const[e,t]=v.useState(!1),[r,n]=v.useState(""),[s,a]=v.useState(0),o=lr(),l=v.useRef(null),u=[{id:"nav-dashboard",title:"Go to Dashboard",icon:Hv,group:"Navigation",action:()=>o("/dashboard")},{id:"nav-projects",title:"Go to Projects",icon:bs,group:"Navigation",action:()=>o("/projects")},{id:"nav-crm",title:"Go to CRM",icon:rr,group:"Navigation",action:()=>o("/crm")},{id:"nav-marketing",title:"Go to Marketing",icon:Tt,group:"Navigation",action:()=>o("/marketing-social")},{id:"nav-agents",title:"Go to AI Agents",icon:Kt,group:"Navigation",action:()=>o("/agents")},{id:"nav-analytics",title:"Go to Analytics",icon:im,group:"Navigation",action:()=>o("/analytics")},{id:"nav-settings",title:"Go to Settings",icon:fn,group:"Navigation",action:()=>o("/settings")},{id:"act-new-project",title:"Create New Project",icon:Ie,group:"Actions",action:()=>{o("/projects")}},{id:"act-new-contact",title:"Add New Contact",icon:Ie,group:"Actions",action:()=>{o("/crm")}},{id:"act-new-campaign",title:"Create Campaign",icon:Ie,group:"Actions",action:()=>{o("/marketing-social")}},{id:"act-new-agent",title:"Deploy AI Agent",icon:Ie,group:"Actions",action:()=>{o("/agents")}}].filter(f=>f.title.toLowerCase().includes(r.toLowerCase()));v.useEffect(()=>{const f=p=>{p.key==="k"&&(p.metaKey||p.ctrlKey)&&(p.preventDefault(),t(y=>!y)),p.key==="Escape"&&t(!1)};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[]),v.useEffect(()=>{e&&(setTimeout(()=>{var f;return(f=l.current)==null?void 0:f.focus()},10),n(""),a(0))},[e]),v.useEffect(()=>{a(0)},[r]);const d=f=>{f.action(),t(!1)},h=f=>{f.key==="ArrowDown"?(f.preventDefault(),a(p=>(p+1)%u.length)):f.key==="ArrowUp"?(f.preventDefault(),a(p=>(p-1+u.length)%u.length)):f.key==="Enter"&&(f.preventDefault(),u[s]&&d(u[s]))};return e?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[100] flex items-start justify-center pt-[20vh]",children:i.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl shadow-2xl overflow-hidden flex flex-col animate-in fade-in zoom-in-95 duration-100",children:[i.jsxs("div",{className:"flex items-center border-b border-gray-200 px-4",children:[i.jsx(lm,{className:"w-5 h-5 text-gray-400 mr-3"}),i.jsx("input",{ref:l,type:"text",value:r,onChange:f=>n(f.target.value),onKeyDown:h,className:"flex-1 h-14 outline-none text-lg text-gray-900 placeholder-gray-400",placeholder:"Type a command or search..."}),i.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-600",children:i.jsx(be,{className:"w-5 h-5"})})]}),i.jsx("div",{className:"max-h-[60vh] overflow-y-auto py-2",children:u.length===0?i.jsx("div",{className:"px-4 py-8 text-center text-gray-500",children:"No results found."}):i.jsx(i.Fragment,{children:["Navigation","Actions"].map(f=>{const p=u.filter(y=>y.group===f);return p.length===0?null:i.jsxs("div",{children:[i.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:f}),p.map(y=>{const w=u.indexOf(y),b=y.icon;return i.jsxs("div",{onClick:()=>d(y),className:`px-4 py-3 flex items-center gap-3 cursor-pointer transition-colors ${w===s?"bg-blue-50 text-blue-700":"hover:bg-gray-50 text-gray-700"}`,children:[i.jsx(b,{className:`w-5 h-5 ${w===s?"text-blue-600":"text-gray-400"}`}),i.jsx("span",{className:"font-medium",children:y.title}),w===s&&i.jsx("span",{className:"ml-auto text-xs text-blue-500 font-medium",children:""})]},y.id)})]},f)})})}),i.jsxs("div",{className:"bg-gray-50 px-4 py-2 border-t border-gray-200 flex justify-between items-center text-xs text-gray-500",children:[i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("span",{children:[i.jsx("kbd",{className:"font-sans bg-white border border-gray-300 rounded px-1",children:""})," Navigate"]}),i.jsxs("span",{children:[i.jsx("kbd",{className:"font-sans bg-white border border-gray-300 rounded px-1",children:""})," Select"]})]}),i.jsxs("span",{children:[i.jsx("kbd",{className:"font-sans bg-white border border-gray-300 rounded px-1",children:"Esc"})," Close"]})]})]})}):null}const mw=[{name:"Dashboard",href:"/dashboard",icon:Home},{name:"Projects",href:"/projects",icon:FolderKanban},{name:"CRM",href:"/crm",icon:Users},{name:"Marketing & Social",href:"/marketing-social",icon:Mail},{name:"AI Agents & Coding",href:"/agents",icon:Bot},{name:"MCP Servers",href:"/mcp",icon:Server},{name:"Analytics",href:"/analytics",icon:BarChart3},{name:"Settings",href:"/settings",icon:Settings}];function pw(){var h,f;const[e,t]=v.useState(!1),[r,n]=v.useState(!1),s=It(),{user:a,signOut:o}=et(),{organizations:l,currentOrganization:c,switchOrganization:u}=ht(),d=async()=>{await o()};return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsxs("div",{className:"lg:hidden fixed top-0 left-0 right-0 bg-white border-b border-gray-200 z-50 px-4 py-3 flex items-center justify-between",children:[i.jsx("button",{onClick:()=>t(!e),className:"p-2 text-gray-600 hover:text-gray-900",children:e?i.jsx(X,{className:"w-6 h-6"}):i.jsx(Menu,{className:"w-6 h-6"})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(js,{className:"w-6 h-6 text-blue-600"}),i.jsx("span",{className:"font-bold text-gray-900",children:"GAS OS"})]})]}),i.jsx("div",{className:`fixed inset-y-0 left-0 w-64 bg-white border-r border-gray-200 z-40 transform transition-transform duration-200 ${e?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:i.jsx(js,{className:"w-5 h-5 text-white"})}),i.jsx("span",{className:"text-xl font-bold text-gray-900",children:"GAS OS"})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>n(!r),className:"w-full flex items-center justify-between px-3 py-2 text-sm font-medium text-gray-700 bg-gray-50 hover:bg-gray-100 rounded-lg transition",children:[i.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[i.jsx(ws,{className:"w-4 h-4 flex-shrink-0"}),i.jsx("span",{className:"truncate",children:(c==null?void 0:c.name)||"No organization"})]}),i.jsx(Mv,{className:"w-4 h-4 flex-shrink-0"})]}),r&&l.length>0&&i.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-lg py-1 z-50",children:l.map(p=>i.jsx("button",{onClick:()=>{u(p.id),n(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 transition ${(c==null?void 0:c.id)===p.id?"bg-blue-50 text-blue-700":"text-gray-700"}`,children:p.name},p.id))})]})]}),i.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:mw.map(p=>{const y=s.pathname===p.href||s.pathname.startsWith(p.href+"/"),w=p.icon;return i.jsxs(cc,{to:p.href,onClick:()=>t(!1),className:`flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition ${y?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50"}`,children:[i.jsx(w,{className:"w-5 h-5"}),p.name]},p.name)})}),i.jsxs("div",{className:"p-4 border-t border-gray-200",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-600 to-blue-700 rounded-full flex items-center justify-center text-white text-sm font-semibold",children:(h=a==null?void 0:a.email)==null?void 0:h.charAt(0).toUpperCase()}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:((f=a==null?void 0:a.user_metadata)==null?void 0:f.full_name)||"User"}),i.jsx("p",{className:"text-xs text-gray-500 truncate",children:a==null?void 0:a.email})]})]}),i.jsxs("button",{onClick:d,className:"w-full flex items-center gap-2 px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition",children:[i.jsx(Qv,{className:"w-4 h-4"}),"Sign Out"]})]})]})}),e&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>t(!1)}),i.jsx("div",{className:"lg:pl-64",children:i.jsx("div",{className:"pt-16 lg:pt-0",children:i.jsx(L0,{})})}),i.jsx(hw,{}),i.jsx(fw,{})]})}function gw(){const{currentOrganization:e}=ht(),{user:t}=et(),[r,n]=v.useState([]),[s,a]=v.useState(!0);v.useEffect(()=>{if(!e)return;o();const c=D.channel("companies_changes").on("postgres_changes",{event:"*",schema:"public",table:"companies",filter:`organization_id=eq.${e.id}`},()=>{o()}).subscribe();return()=>{c.unsubscribe()}},[e]);const o=async()=>{if(e)try{const{data:c,error:u}=await D.from("companies").select("*").eq("organization_id",e.id).order("created_at",{ascending:!1});if(u)throw u;n(c||[])}catch(c){console.error("Error fetching companies:",c)}finally{a(!1)}};return{companies:r,loading:s,createCompany:async c=>{if(!e||!t)return null;try{const{data:u,error:d}=await D.from("companies").insert({organization_id:e.id,name:c.name,domain:c.domain||null,industry:c.industry||null,website:c.website||null,phone:c.phone||null,description:c.description||null,created_by:t.id}).select().single();if(d)throw d;return u}catch(u){throw console.error("Error creating company:",u),u}},refetch:o}}class xw{constructor(){this.name="Console Logger"}async sendEmail(t){return console.group(" [Email Simulation] Sending Email..."),console.log("To:",t.to),console.log("Subject:",t.subject),console.log("Body Preview:",t.html.substring(0,100)+"..."),console.groupEnd(),await new Promise(r=>setTimeout(r,800)),{success:!0,id:`mock-email-${Date.now()}`}}}class yw{constructor(){this.provider=new xw}setProvider(t){this.provider=t}async send(t){return this.provider.sendEmail(t)}}const vw=new yw;function vc(){const{currentOrganization:e}=ht(),{user:t}=et(),[r,n]=v.useState([]),[s,a]=v.useState(!0),o=v.useCallback(async()=>{if(!e){n([]),a(!1);return}a(!0);try{const{data:u,error:d}=await D.from("campaigns").select("*").eq("organization_id",e.id).order("created_at",{ascending:!1});if(d)throw d;n(u||[])}catch(u){console.error("Error fetching campaigns:",u)}finally{a(!1)}},[e]);return v.useEffect(()=>{o()},[o]),{campaigns:r,loading:s,createCampaign:async u=>{if(!e||!t)throw new Error("No organization or user selected");try{const{data:d,error:h}=await D.from("campaigns").insert({organization_id:e.id,name:u.name,description:u.description||null,campaign_type:u.campaign_type,status:"draft",content:u.content||{},settings:u.settings||{},scheduled_at:u.scheduled_at||null,created_by:t.id}).select().single();if(h)throw h;return await o(),d}catch(d){throw console.error("Error creating campaign:",d),d}},sendCampaign:async u=>{var p,y;const d=r.find(w=>w.id===u);if(!d)throw new Error("Campaign not found");const h=["test@example.com"],f=await vw.send({to:h,subject:((p=d.settings)==null?void 0:p.subject)||d.name,html:((y=d.content)==null?void 0:y.body)||`<p>Campaign Content for ${d.name}</p>`});return f.success&&(await D.from("campaigns").update({status:"active",started_at:new Date().toISOString()}).eq("id",u),await o()),f},refetch:o}}function fm(){const{currentOrganization:e}=ht(),{user:t}=et(),[r,n]=v.useState([]),[s,a]=v.useState(!0);v.useEffect(()=>{if(!e)return;o();const d=D.channel("agents_changes").on("postgres_changes",{event:"*",schema:"public",table:"ai_agents",filter:`organization_id=eq.${e.id}`},()=>{o()}).subscribe();return()=>{d.unsubscribe()}},[e]);const o=async()=>{if(e)try{const{data:d,error:h}=await D.from("ai_agents").select("*").eq("organization_id",e.id).order("created_at",{ascending:!1});if(h)throw h;n(d||[])}catch(d){console.error("Error fetching agents:",d)}finally{a(!1)}};return{agents:r,loading:s,createAgent:async d=>{if(!e||!t)return null;try{const{data:h,error:f}=await D.from("ai_agents").insert({organization_id:e.id,name:d.name,description:d.description||null,agent_type:d.agent_type,status:"active",configuration:d.configuration||{},knowledge_base:d.configuration?{referenceLinks:d.configuration.referenceLinks||[],uploadedFiles:d.configuration.uploadedFiles||[],promptTemplate:d.configuration.promptTemplate||"",memorySize:d.configuration.memorySize||1e3}:null,performance_metrics:{tasks_completed:0,tokens_used:0,success_rate:100},created_by:t.id}).select().single();if(f)throw f;return h}catch(h){throw console.error("Error creating agent:",h),h}},updateAgent:async(d,h)=>{if(!e)return null;try{const{data:f,error:p}=await D.from("ai_agents").update({name:h.name,description:h.description,agent_type:h.agent_type,status:h.status,configuration:h.configuration,knowledge_base:h.knowledge_base,updated_at:new Date().toISOString()}).eq("id",d).eq("organization_id",e.id).select().single();if(p)throw p;return f}catch(f){throw console.error("Error updating agent:",f),f}},deleteAgent:async d=>{if(!e)return null;try{const{error:h}=await D.from("ai_agents").delete().eq("id",d).eq("organization_id",e.id);if(h)throw h;return!0}catch(h){throw console.error("Error deleting agent:",h),h}},refetch:o}}function mm({isOpen:e,onClose:t,onSubmit:r,initialData:n={},title:s="Create New Project",submitButtonText:a="Create Project & Go to Projects",submitButtonAction:o}){const l=lr(),[c,u]=v.useState(!1),[d,h]=v.useState({name:n.name||"",description:n.description||"",estimated_completion:n.estimated_completion||"",tools_used:n.tools_used||[],proposed_tech:n.proposed_tech||[],project_details:n.project_details||"",cost_to_operate:n.cost_to_operate,gas_fee:n.gas_fee,budget:n.budget,priority:n.priority||"medium"}),f=async w=>{if(w.preventDefault(),!!d.name.trim()){u(!0);try{r&&await r(d),o?o():l("/Projects"),t(),p()}catch(b){console.error("Error creating project:",b)}finally{u(!1)}}},p=()=>{h({name:"",description:"",estimated_completion:"",tools_used:[],proposed_tech:[],project_details:"",cost_to_operate:void 0,gas_fee:void 0,budget:void 0,priority:"medium"})},y=()=>{t(),p()};return e?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s}),i.jsx("button",{onClick:y,className:"text-gray-400 hover:text-gray-600",children:i.jsx(be,{className:"w-6 h-6"})})]}),i.jsxs("form",{onSubmit:f,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Project Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",required:!0,value:d.name,onChange:w=>h({...d,name:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"Website Redesign Project"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),i.jsxs("select",{value:d.priority,onChange:w=>h({...d,priority:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",children:[i.jsx("option",{value:"low",children:"Low"}),i.jsx("option",{value:"medium",children:"Medium"}),i.jsx("option",{value:"high",children:"High"}),i.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Description"}),i.jsx("textarea",{value:d.description,onChange:w=>h({...d,description:w.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none resize-none",placeholder:"Brief description of the project..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Details"}),i.jsx("textarea",{value:d.project_details,onChange:w=>h({...d,project_details:w.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none resize-none",placeholder:"Detailed project requirements and specifications..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Time of Completion"}),i.jsxs("select",{value:d.estimated_completion,onChange:w=>h({...d,estimated_completion:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",children:[i.jsx("option",{value:"",children:"Select timeline"}),i.jsx("option",{value:"1-4-weeks",children:"1-4 weeks"}),i.jsx("option",{value:"1-3-months",children:"1-3 months"}),i.jsx("option",{value:"3-6-months",children:"3-6 months"}),i.jsx("option",{value:"6-months-plus",children:"6 months+"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cost to Operate ($)"}),i.jsx("input",{type:"number",min:"0",step:"0.01",value:d.cost_to_operate||"",onChange:w=>h({...d,cost_to_operate:w.target.value?parseFloat(w.target.value):null}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GAS Fee ($)"}),i.jsx("input",{type:"number",min:"0",step:"0.01",value:d.gas_fee||"",onChange:w=>h({...d,gas_fee:w.target.value?parseFloat(w.target.value):null}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Budget ($)"}),i.jsx("input",{type:"number",min:"0",step:"0.01",value:d.budget||"",onChange:w=>h({...d,budget:w.target.value?parseFloat(w.target.value):null}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"0.00"})]})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:y,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:c||!d.name.trim(),className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:c?i.jsx(te,{className:"w-5 h-5 animate-spin"}):a})]})]})]})}):null}function ww(){const{currentOrganization:e,organizations:t,loading:r,refetchOrganizations:n}=ht(),{user:s}=et(),{createCompany:a}=gw(),{contacts:o}=xa(),{projects:l,createProject:c}=ga(),{campaigns:u,createCampaign:d}=vc(),{agents:h}=fm(),{addToast:f}=yc();lr();const[p,y]=v.useState(!1),[w,b]=v.useState(!1),[g,x]=v.useState(!1),[m,j]=v.useState(!1),[_,S]=v.useState(!1);v.useState(!1);const[T,E]=v.useState(!1),[O,N]=v.useState(!1),[U,k]=v.useState(!1),[R,C]=v.useState({name:"",domain:"",industry:"",website:"",phone:"",description:""});v.useState({name:"",description:"",estimated_completion:"",tools_used:[],proposed_tech:[],project_details:"",cost_to_operate:null,gas_fee:null,budget:null,priority:"medium"});const[L,V]=v.useState({first_name:"",last_name:"",email:"",phone:"",title:"",company_name:"",notes:""}),[B,A]=v.useState({name:"",subject:"",description:"",audience:"all",sendDate:"",campaign_type:"email"}),[I,F]=v.useState({name:"",slug:""}),Z=async $=>{if($.preventDefault(),!!R.name.trim()){S(!0);try{await a(R),C({name:"",domain:"",industry:"",website:"",phone:"",description:""}),y(!1),f("success","Company created successfully!")}catch(G){console.error("Failed to create company:",G),f("error","Failed to create company")}finally{S(!1)}}},le=$=>$.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""),ft=$=>{F({name:$,slug:le($)})},he=async $=>{if($.preventDefault(),!!s){k(!0);try{const{data:G,error:Rs}=await D.from("organizations").insert({name:I.name,slug:I.slug,subscription_tier:"free",subscription_status:"trial"}).select().single();if(Rs)throw Rs;const{error:bc}=await D.from("organization_members").insert({organization_id:G.id,user_id:s.id,role:"owner",joined_at:new Date().toISOString()});if(bc)throw bc;const{error:jc}=await D.from("workspaces").insert({organization_id:G.id,name:"General",description:"Default workspace",is_default:!0,created_by:s.id});if(jc)throw jc;await n(),f("success","Organization created successfully!")}catch(G){console.error("Error creating organization:",G),f("error",G.message||"Failed to create organization")}finally{k(!1)}}},Pr=async $=>{if($.preventDefault(),!(!B.name||!B.subject)){N(!0);try{await d({name:B.name,description:B.description,campaign_type:B.campaign_type,scheduled_at:B.sendDate?new Date(B.sendDate).toISOString():void 0,settings:{subject:B.subject,audience:B.audience}}),A({name:"",subject:"",description:"",audience:"all",sendDate:"",campaign_type:"email"}),j(!1),f("success","Campaign created successfully!")}catch(G){console.error("Failed to create campaign:",G),f("error","Failed to create campaign")}finally{N(!1)}}};if(r)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsx(te,{className:"w-8 h-8 animate-spin text-blue-600"})});if(!e)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100 p-4",children:i.jsx("div",{className:"w-full max-w-md",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[i.jsxs("div",{className:"flex flex-col items-center mb-8",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center mb-4",children:i.jsx(ws,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Create Your Organization"}),i.jsx("p",{className:"text-gray-600 text-center",children:"Let's get started by setting up your workspace"})]}),i.jsxs("form",{onSubmit:he,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Organization Name"}),i.jsx("input",{type:"text",id:"name",required:!0,value:I.name,onChange:$=>ft($.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none transition",placeholder:"Acme Inc."})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-700 mb-2",children:"URL Identifier"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sm text-gray-500 mr-2",children:"app.com/"}),i.jsx("input",{type:"text",id:"slug",required:!0,value:I.slug,onChange:$=>F({...I,slug:$.target.value}),className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none transition",placeholder:"acme-inc",pattern:"[a-z0-9-]+"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only lowercase letters, numbers, and hyphens"})]}),i.jsx("button",{type:"submit",disabled:U||!I.name||!I.slug,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:U?i.jsxs(i.Fragment,{children:[i.jsx(te,{className:"w-5 h-5 animate-spin"}),"Creating..."]}):"Create Organization"})]})]})})});const wt=[{name:"Active Projects",value:l.filter($=>$.status==="active"||$.status==="in_progress").length.toString(),icon:bs,change:`${l.length} total`,trend:"neutral"},{name:"Total Contacts",value:o.length.toString(),icon:rr,change:"All time",trend:"up"},{name:"Campaigns Running",value:u.filter($=>$.status==="active"||$.status==="scheduled").length.toString(),icon:Tt,change:`${u.length} total`,trend:"neutral"},{name:"AI Agents Active",value:h.filter($=>$.status==="active").length.toString(),icon:Kt,change:`${h.length} configured`,trend:"up"}],pm=[...l.map(G=>({action:"New Project",details:G.name,time:new Date(G.created_at),type:"project"})),...o.map(G=>({action:"New Contact",details:`${G.first_name} ${G.last_name||""}`,time:new Date(G.created_at),type:"contact"})),...u.map(G=>({action:"Campaign Created",details:G.name,time:new Date(G.created_at),type:"campaign"})),...h.map(G=>({action:"Agent Configured",details:G.name,time:new Date(G.created_at||new Date().toISOString()),type:"agent"}))].sort((G,Rs)=>Rs.time.getTime()-G.time.getTime()).slice(0,5).map(G=>({...G,time:G.time.toLocaleDateString()+" "+G.time.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}));return i.jsxs("div",{className:"p-6 lg:p-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Welcome back to ",e==null?void 0:e.name]}),i.jsx("p",{className:"text-gray-600",children:"Here's what's happening with your business today"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:wt.map($=>{const G=$.icon;return i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-lg flex items-center justify-center",children:i.jsx(G,{className:"w-6 h-6 text-blue-600"})}),$.trend==="up"&&i.jsx(um,{className:"w-5 h-5 text-green-600"})]}),i.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:$.name}),i.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:$.value}),i.jsx("p",{className:"text-sm text-gray-500",children:$.change})]},$.name)})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),i.jsx(qi,{className:"w-5 h-5 text-gray-400"})]}),i.jsx("div",{className:"space-y-4",children:pm.map(($,G)=>i.jsxs("div",{className:"flex items-start gap-3 pb-4 border-b border-gray-100 last:border-0 last:pb-0",children:[i.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:$.action}),i.jsx("p",{className:"text-sm text-gray-600",children:$.details}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:$.time})]})]},G))})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Quick Actions"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("button",{onClick:()=>b(!0),className:"flex flex-col items-center justify-center p-4 border-2 border-gray-200 rounded-lg hover:border-blue-600 hover:bg-blue-50 transition group",children:[i.jsx(bs,{className:"w-8 h-8 text-gray-600 group-hover:text-blue-600 mb-2"}),i.jsx("span",{className:"text-sm font-medium text-gray-700 group-hover:text-blue-700",children:"New Project"})]}),i.jsxs("button",{onClick:()=>x(!0),className:"flex flex-col items-center justify-center p-4 border-2 border-gray-200 rounded-lg hover:border-blue-600 hover:bg-blue-50 transition group",children:[i.jsx(rr,{className:"w-8 h-8 text-gray-600 group-hover:text-blue-600 mb-2"}),i.jsx("span",{className:"text-sm font-medium text-gray-700 group-hover:text-blue-700",children:"Add Contact"})]}),i.jsxs("button",{onClick:()=>j(!0),className:"flex flex-col items-center justify-center p-4 border-2 border-gray-200 rounded-lg hover:border-blue-600 hover:bg-blue-50 transition group",children:[i.jsx(Tt,{className:"w-8 h-8 text-gray-600 group-hover:text-blue-600 mb-2"}),i.jsx("span",{className:"text-sm font-medium text-gray-700 group-hover:text-blue-700",children:"New Campaign"})]}),i.jsxs("button",{onClick:()=>y(!0),className:"flex flex-col items-center justify-center p-4 border-2 border-gray-200 rounded-lg hover:border-blue-600 hover:bg-blue-50 transition group",children:[i.jsx(ws,{className:"w-8 h-8 text-gray-600 group-hover:text-blue-600 mb-2"}),i.jsx("span",{className:"text-sm font-medium text-gray-700 group-hover:text-blue-700",children:"Add Company"})]})]})]})]}),p&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create New Company"}),i.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:i.jsx(be,{className:"w-6 h-6"})})]}),i.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Company Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",required:!0,value:R.name,onChange:$=>C({...R,name:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"Acme Corporation"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Domain"}),i.jsx("input",{type:"text",value:R.domain,onChange:$=>C({...R,domain:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"acme.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Industry"}),i.jsx("input",{type:"text",value:R.industry,onChange:$=>C({...R,industry:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"Software"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),i.jsx("input",{type:"url",value:R.website,onChange:$=>C({...R,website:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"https://acme.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),i.jsx("input",{type:"tel",value:R.phone,onChange:$=>C({...R,phone:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"+1 (555) 123-4567"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),i.jsx("textarea",{value:R.description,onChange:$=>C({...R,description:$.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"Brief description of the company..."})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>y(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:_||!R.name.trim(),className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:_?i.jsx(te,{className:"w-5 h-5 animate-spin"}):"Create Company"})]})]})]})}),i.jsx(mm,{isOpen:w,onClose:()=>b(!1),onSubmit:$=>c($).then(()=>{}),submitButtonText:"Create Project & Go to Projects"}),g&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create New Contact"}),i.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600",children:i.jsx(be,{className:"w-6 h-6"})})]}),i.jsxs("form",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["First Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",required:!0,value:L.first_name,onChange:$=>V({...L,first_name:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"John"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),i.jsx("input",{type:"text",value:L.last_name,onChange:$=>V({...L,last_name:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"Doe"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),i.jsx("input",{type:"email",value:L.email,onChange:$=>V({...L,email:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"john@example.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),i.jsx("input",{type:"tel",value:L.phone,onChange:$=>V({...L,phone:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"+1 (555) 123-4567"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),i.jsx("input",{type:"text",value:L.title,onChange:$=>V({...L,title:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"CEO"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name"}),i.jsx("input",{type:"text",value:L.company_name,onChange:$=>V({...L,company_name:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"Acme Corp"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),i.jsx("textarea",{value:L.notes,onChange:$=>V({...L,notes:$.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none resize-none",placeholder:"Additional notes about this contact..."})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>x(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:T||!L.first_name.trim(),className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:T?i.jsx(te,{className:"w-5 h-5 animate-spin"}):"Create Contact & Go to CRM"})]})]})]})}),m&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create New Marketing Campaign"}),i.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-600",children:i.jsx(be,{className:"w-6 h-6"})})]}),i.jsxs("form",{onSubmit:Pr,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Campaign Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",value:B.name,onChange:$=>A({...B,name:$.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 outline-none",placeholder:"e.g., Summer Sale",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Subject Line ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",value:B.subject,onChange:$=>A({...B,subject:$.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 outline-none",placeholder:"Subject...",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),i.jsx("textarea",{value:B.description,onChange:$=>A({...B,description:$.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 outline-none",rows:3})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Scheduled Date (Optional)"}),i.jsx("input",{type:"date",value:B.sendDate,onChange:$=>A({...B,sendDate:$.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 outline-none"})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>j(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:O||!B.name,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition flex items-center justify-center gap-2",children:O?i.jsx(te,{className:"w-4 h-4 animate-spin"}):"Create Campaign"})]})]})]})})]})}function bw(e){const[t,r]=v.useState([]),[n,s]=v.useState(!0),[a,o]=v.useState(null),l=v.useCallback(async()=>{if(!e){r([]),s(!1);return}try{s(!0);const{data:h,error:f}=await D.from("tasks").select("*").eq("project_id",e).order("created_at",{ascending:!1});if(f)throw f;r(h||[]),o(null)}catch(h){console.error("Error fetching tasks:",h),o(h instanceof Error?h.message:"Failed to fetch tasks"),r([])}finally{s(!1)}},[e]);return v.useEffect(()=>{l()},[l]),{tasks:t,loading:n,error:a,createTask:async h=>{var f;if(!e)throw new Error("No project selected");try{const{data:p,error:y}=await D.from("tasks").insert({project_id:e,name:h.name,description:h.description||null,status:"todo",priority:h.priority||"medium",due_date:h.due_date||null,assigned_to:h.assigned_to||null,created_by:((f=(await D.auth.getUser()).data.user)==null?void 0:f.id)||""}).select().single();if(y)throw y;return await l(),p}catch(p){throw console.error("Error creating task:",p),p}},updateTask:async(h,f)=>{try{const{data:p,error:y}=await D.from("tasks").update(f).eq("id",h).select().single();if(y)throw y;return r(w=>w.map(b=>b.id===h?{...b,...f}:b)),p}catch(p){throw console.error("Error updating task:",p),p}},deleteTask:async h=>{try{const{error:f}=await D.from("tasks").delete().eq("id",h);if(f)throw f;r(p=>p.filter(y=>y.id!==h))}catch(f){throw console.error("Error deleting task:",f),f}},refetch:l}}function jw(){const{projects:e,loading:t,createProject:r,deleteProject:n}=ga(),[s,a]=v.useState(null),[o,l]=v.useState("kanban"),[c,u]=v.useState(!1),[d,h]=v.useState(!1),[f,p]=v.useState(""),[y,w]=v.useState(!1),[b,g]=v.useState(new Date),{tasks:x,loading:m,createTask:j,updateTask:_}=bw(s||void 0),S=async k=>{if(k.preventDefault(),!!f.trim()){w(!0);try{await j({name:f}),p(""),h(!1)}catch(R){console.error("Failed to create task:",R)}finally{w(!1)}}},T=async(k,R)=>{await _(k,{status:R})},E=async k=>{const R=e.find(C=>C.id===k);if(confirm(`Are you sure you want to delete Project "${R==null?void 0:R.name}"? This action cannot be undone.`))try{await n(k),s===k&&a(null)}catch(C){console.error("Failed to delete project:",C),alert("Failed to delete project. Please try again.")}},O=e.find(k=>k.id===s),N=[{id:"todo",name:"To Do",icon:qi,color:"bg-gray-100 text-gray-700"},{id:"in_progress",name:"In Progress",icon:pc,color:"bg-blue-100 text-blue-700"},{id:"review",name:"Review",icon:ew,color:"bg-yellow-100 text-yellow-700"},{id:"done",name:"Done",icon:Iv,color:"bg-green-100 text-green-700"}],U={low:"bg-gray-100 text-gray-700",medium:"bg-blue-100 text-blue-700",high:"bg-orange-100 text-orange-700",urgent:"bg-red-100 text-red-700"};return t?i.jsx("div",{className:"p-6 lg:p-8 flex items-center justify-center min-h-[400px]",children:i.jsx(te,{className:"w-8 h-8 animate-spin text-blue-600"})}):i.jsxs("div",{className:"h-screen flex flex-col",children:[i.jsxs("div",{className:"p-6 lg:p-8 border-b border-gray-200 bg-white",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(bs,{className:"w-8 h-8 text-blue-600"}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Projects"})]}),i.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition",children:[i.jsx(Ie,{className:"w-5 h-5"}),"New Project"]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"flex-1 flex items-center gap-2 overflow-x-auto pb-2",children:e.map(k=>i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:()=>a(k.id),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition ${s===k.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:k.name}),i.jsx("button",{onClick:R=>{R.stopPropagation(),E(k.id)},className:"p-1 text-gray-400 hover:text-red-600 transition",title:"Delete project",children:i.jsx(br,{className:"w-4 h-4"})})]},k.id))}),s&&i.jsxs("div",{className:"flex items-center gap-2 border-l border-gray-300 pl-4",children:[i.jsx("button",{onClick:()=>l("kanban"),className:`p-2 rounded-lg transition ${o==="kanban"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:i.jsx(Gv,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>l("list"),className:`p-2 rounded-lg transition ${o==="list"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:i.jsx(Jv,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>l("calendar"),className:`p-2 rounded-lg transition ${o==="calendar"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:i.jsx(al,{className:"w-5 h-5"})})]})]})]}),i.jsxs("div",{className:"flex-1 flex flex-col bg-gray-50",children:[s&&O&&i.jsx("div",{className:"p-6 bg-white border-b border-gray-200",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:O.name}),i.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${O.priority==="urgent"?"bg-red-100 text-red-800":O.priority==="high"?"bg-orange-100 text-orange-800":O.priority==="medium"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:O.priority}),i.jsx("span",{className:"px-3 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800 capitalize",children:O.status})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Timeline:"}),i.jsx("p",{className:"text-gray-900",children:O.estimated_completion?O.estimated_completion.replace("-"," to "):"Not set"})]}),O.cost_to_operate&&i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Cost to Operate:"}),i.jsxs("p",{className:"text-gray-900 font-semibold text-green-600",children:["$",O.cost_to_operate.toLocaleString()]})]}),O.gas_fee&&i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"GAS Fee:"}),i.jsxs("p",{className:"text-gray-900 font-semibold text-blue-600",children:["$",O.gas_fee.toLocaleString()]})]}),O.budget&&i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Budget:"}),i.jsxs("p",{className:"text-gray-900 font-semibold text-purple-600",children:["$",O.budget.toLocaleString()]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Tasks:"}),i.jsx("p",{className:"text-gray-900 font-semibold",children:x.length})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Created:"}),i.jsx("p",{className:"text-gray-900",children:new Date(O.created_at).toLocaleDateString()})]})]}),O.description&&i.jsxs("div",{className:"mt-4",children:[i.jsx("span",{className:"text-gray-500 text-sm",children:"Description:"}),i.jsx("p",{className:"text-gray-900 mt-1",children:O.description})]})]}),i.jsx("button",{onClick:()=>E(O.id),className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition ml-4",title:"Delete project",children:i.jsx(br,{className:"w-5 h-5"})})]})}),i.jsx("div",{className:"flex-1 overflow-auto p-6 lg:p-8",children:s?i.jsxs(i.Fragment,{children:[o==="kanban"&&i.jsx("div",{className:"flex gap-4 h-full overflow-x-auto pb-4",children:N.map(k=>{const R=k.icon,C=x.filter(L=>L.status===k.id);return i.jsxs("div",{className:"flex-shrink-0 w-80 flex flex-col",children:[i.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 mb-3",children:i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`p-1.5 rounded ${k.color}`,children:i.jsx(R,{className:"w-4 h-4"})}),i.jsx("h3",{className:"font-semibold text-gray-900",children:k.name}),i.jsxs("span",{className:"text-sm text-gray-500",children:["(",C.length,")"]})]})})}),i.jsxs("div",{className:"flex-1 space-y-3 overflow-y-auto",children:[C.map(L=>i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition cursor-pointer",children:[i.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:L.name}),L.description&&i.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:L.description}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:`text-xs px-2 py-1 rounded ${U[L.priority]}`,children:L.priority}),L.due_date&&i.jsx("span",{className:"text-xs text-gray-500",children:new Date(L.due_date).toLocaleDateString()})]})]},L.id)),k.id==="todo"&&i.jsx("button",{onClick:()=>h(!0),className:"w-full p-4 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-blue-600 hover:text-blue-600 transition",children:i.jsx(Ie,{className:"w-5 h-5 mx-auto"})})]})]},k.id)})}),o==="list"&&i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[i.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"All Tasks"}),i.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded-lg transition text-sm",children:[i.jsx(Ie,{className:"w-4 h-4"}),"Add Task"]})]}),i.jsx("div",{className:"divide-y divide-gray-200",children:m?i.jsx("div",{className:"p-8 text-center",children:i.jsx(te,{className:"w-6 h-6 animate-spin text-blue-600 mx-auto"})}):x.length===0?i.jsx("div",{className:"p-8 text-center text-gray-600",children:"No tasks yet"}):x.map(k=>i.jsxs("div",{className:"p-4 hover:bg-gray-50 transition flex items-center gap-4",children:[i.jsx("input",{type:"checkbox",className:"w-5 h-5 text-blue-600 rounded",checked:k.status==="done",onChange:()=>T(k.id,k.status==="done"?"todo":"done")}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:k.name}),k.description&&i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:k.description})]}),i.jsx("span",{className:`text-xs px-2 py-1 rounded whitespace-nowrap ${U[k.priority]}`,children:k.priority}),i.jsx("span",{className:"text-sm text-gray-500 whitespace-nowrap",children:k.status.replace("_"," ")})]},k.id))})]}),o==="calendar"&&i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("button",{onClick:()=>g(new Date(b.getFullYear(),b.getMonth()-1,1)),className:"p-2 hover:bg-gray-100 rounded-lg transition",children:i.jsx(zv,{className:"w-5 h-5 text-gray-600"})}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:b.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),i.jsx("button",{onClick:()=>g(new Date(b.getFullYear(),b.getMonth()+1,1)),className:"p-2 hover:bg-gray-100 rounded-lg transition",children:i.jsx(Dv,{className:"w-5 h-5 text-gray-600"})})]})}),i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(k=>i.jsx("div",{className:"text-center text-sm font-medium text-gray-500 py-2",children:k},k))}),i.jsx("div",{className:"grid grid-cols-7 gap-2",children:(()=>{const k=b.getFullYear(),R=b.getMonth(),C=new Date(k,R,1).getDay(),L=new Date(k,R+1,0).getDate(),V=new Date(k,R,0).getDate(),B=[];for(let I=C-1;I>=0;I--)B.push(i.jsx("div",{className:"text-center text-sm text-gray-400 p-3",children:V-I},`prev-${I}`));for(let I=1;I<=L;I++){const F=new Date(k,R,I),Z=new Date,le=F.toDateString()===Z.toDateString(),ft=x.filter(he=>he.due_date?new Date(he.due_date).toDateString()===F.toDateString():!1);B.push(i.jsxs("div",{className:`text-center text-sm p-1 min-h-[80px] border rounded-lg ${le?"bg-blue-50 border-blue-300":"border-gray-200 hover:border-blue-300"} transition cursor-pointer`,children:[i.jsx("div",{className:"font-medium text-gray-900 mb-1",children:I}),i.jsxs("div",{className:"space-y-1",children:[ft.slice(0,3).map(he=>i.jsx("div",{className:`text-xs px-1 py-0.5 rounded text-white ${he.priority==="urgent"?"bg-red-500":he.priority==="high"?"bg-orange-500":he.priority==="medium"?"bg-blue-500":"bg-gray-500"} truncate`,title:he.name,children:he.name},he.id)),ft.length>3&&i.jsxs("div",{className:"text-xs text-gray-500",children:["+",ft.length-3," more"]})]})]},`current-${I}`))}const A=42-B.length;for(let I=1;I<=A;I++)B.push(i.jsx("div",{className:"text-center text-sm text-gray-400 p-3",children:I},`next-${I}`));return B})()})]}),i.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 bg-red-500 rounded"}),i.jsx("span",{children:"Urgent"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded"}),i.jsx("span",{children:"High"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded"}),i.jsx("span",{children:"Medium"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded"}),i.jsx("span",{children:"Low"})]})]}),i.jsxs("div",{className:"text-gray-600",children:[i.jsx(al,{className:"w-4 h-4 inline mr-2"}),x.length," total tasks"]})]})})]})]}):i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsxs("div",{className:"text-center",children:[i.jsx(bs,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No project selected"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Create a project or select one to get started"}),i.jsx("button",{onClick:()=>u(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition",children:"Create Your First Project"})]})})})]}),i.jsx(mm,{isOpen:c,onClose:()=>u(!1),onSubmit:async k=>{try{const R=await r(k);a(R.id),u(!1)}catch(R){console.error("Failed to create project:",R),alert("Failed to create project: "+R.message)}},submitButtonText:"Create Project"}),d&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Create New Task"}),i.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600",children:i.jsx(be,{className:"w-6 h-6"})})]}),i.jsxs("form",{onSubmit:S,children:[i.jsx("input",{type:"text",value:f,onChange:k=>p(k.target.value),placeholder:"Task name",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none mb-4",autoFocus:!0}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"button",onClick:()=>h(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:y||!f.trim(),className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:y?i.jsx(te,{className:"w-5 h-5 animate-spin"}):"Create"})]})]})]})})]})}function _w(){const{contacts:e,loading:t,createContact:r,updateContact:n}=xa(),[s,a]=v.useState("contacts"),[o,l]=v.useState(!1),[c,u]=v.useState(null),[d,h]=v.useState(!1),[f,p]=v.useState(""),[y,w]=v.useState("all"),[b,g]=v.useState(!1),[x,m]=v.useState(!1),[j,_]=v.useState({first_name:"",last_name:"",email:"",phone:"",title:"",company_name:"",date_of_birth:"",notes:""}),[S,T]=v.useState({first_name:"",last_name:"",email:"",phone:"",title:"",company_name:"",date_of_birth:"",notes:""}),E=C=>{if(!C)return"-";const L=C.replace(/\D/g,"");return L.length===10?`${L.slice(0,3)}-${L.slice(3,6)}-${L.slice(6)}`:L.length===11&&L.startsWith("1")?`+1 ${L.slice(1,4)}-${L.slice(4,7)}-${L.slice(7)}`:C},O=C=>{const L=C.split("").reduce((A,I)=>(A<<5)-A+I.charCodeAt(0)|0,0),V=Math.abs(L)%30,B=new Date;return B.setDate(B.getDate()-V),B.setHours(Math.abs(L)%24),B.setMinutes(Math.abs(L)%60),B},N=async C=>{if(C.preventDefault(),!!j.first_name.trim()){g(!0);try{const L=await r(j);L?(_({first_name:"",last_name:"",email:"",phone:"",title:"",company_name:"",date_of_birth:"",notes:""}),l(!1),console.log("Contact created successfully:",L)):(console.error("Contact creation failed - no organization or user context"),alert("Failed to create contact. Please make sure you are logged in and have an organization selected."))}catch(L){console.error("Failed to create contact:",L),alert("Failed to create contact: "+(L instanceof Error?L.message:"Unknown error"))}finally{g(!1)}}},U=async C=>{if(C.preventDefault(),!(!c||!S.first_name.trim())){m(!0);try{await n(c.id,{first_name:S.first_name,last_name:S.last_name,email:S.email,phone:S.phone,title:S.title,company_name:S.company_name,date_of_birth:S.date_of_birth,notes:S.notes}),h(!1),u(null)}catch(L){console.error("Failed to update contact:",L)}finally{m(!1)}}},k=e.filter(C=>{var B,A;const L=C.first_name.toLowerCase().includes(f.toLowerCase())||((B=C.last_name)==null?void 0:B.toLowerCase().includes(f.toLowerCase()))||((A=C.email)==null?void 0:A.toLowerCase().includes(f.toLowerCase())),V=y==="all"||C.lead_status===y;return L&&V}),R=C=>({new:"bg-blue-100 text-blue-700",qualified:"bg-green-100 text-green-700",unqualified:"bg-gray-100 text-gray-700",contacted:"bg-yellow-100 text-yellow-700"})[C]||"bg-gray-100 text-gray-700";return t?i.jsx("div",{className:"p-6 lg:p-8 flex items-center justify-center min-h-[400px]",children:i.jsx(te,{className:"w-8 h-8 animate-spin text-blue-600"})}):i.jsxs("div",{className:"p-6 lg:p-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(rr,{className:"w-8 h-8 text-blue-600"}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"CRM"})]}),i.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition",children:[i.jsx(Ie,{className:"w-5 h-5"}),"New Contact"]})]}),i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"border-b border-gray-200",children:i.jsxs("nav",{className:"-mb-px flex space-x-8",children:[i.jsxs("button",{onClick:()=>a("contacts"),className:`py-2 px-1 border-b-2 font-medium text-sm ${s==="contacts"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[i.jsx(rr,{className:"w-4 h-4 inline mr-2"}),"Contacts"]}),i.jsxs("button",{onClick:()=>a("messages"),className:`py-2 px-1 border-b-2 font-medium text-sm ${s==="messages"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[i.jsx(Dn,{className:"w-4 h-4 inline mr-2"}),"Unified Messages"]})]})})}),s==="contacts"&&i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6",children:[i.jsx("div",{className:"p-4 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"text",value:f,onChange:C=>p(C.target.value),placeholder:"Search contacts...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Wv,{className:"w-5 h-5 text-gray-400"}),i.jsxs("select",{value:y,onChange:C=>w(C.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"new",children:"New"}),i.jsx("option",{value:"contacted",children:"Contacted"}),i.jsx("option",{value:"qualified",children:"Qualified"}),i.jsx("option",{value:"unqualified",children:"Unqualified"})]})]})]})}),k.length===0?i.jsxs("div",{className:"p-12 text-center",children:[i.jsx(rr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.length===0?"No contacts yet":"No contacts found"}),i.jsx("p",{className:"text-gray-600 mb-4",children:e.length===0?"Add your first contact to get started":"Try adjusting your search or filters"}),e.length===0&&i.jsx("button",{onClick:()=>l(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition",children:"Add Your First Contact"})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),i.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),i.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),i.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),i.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),i.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Correspondence"}),i.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(C=>{var L;return i.jsxs("tr",{onClick:()=>{u(C),T({first_name:C.first_name,last_name:C.last_name||"",email:C.email||"",phone:C.phone||"",title:C.title||"",company_name:C.company_name||"",date_of_birth:C.date_of_birth||"",notes:C.notes||""}),h(!0)},className:"hover:bg-gray-50 cursor-pointer transition",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-full flex items-center justify-center text-white font-semibold text-sm mr-3",children:[C.first_name.charAt(0),(L=C.last_name)==null?void 0:L.charAt(0)]}),i.jsxs("div",{children:[i.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[C.first_name," ",C.last_name]}),C.date_of_birth&&i.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-1",children:[i.jsx(al,{className:"w-3 h-3"}),new Date(C.date_of_birth).toLocaleDateString()]})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"text-sm text-gray-900 flex items-center gap-2",children:[i.jsx(ws,{className:"w-4 h-4 text-gray-400"}),C.company_name||"-"]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm text-gray-900",children:C.title||"-"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm text-gray-900 flex items-center gap-2",children:C.email?i.jsxs(i.Fragment,{children:[i.jsx(Tt,{className:"w-4 h-4 text-gray-400"}),C.email]}):"-"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm text-gray-900 flex items-center gap-2",children:C.phone?i.jsxs(i.Fragment,{children:[i.jsx(om,{className:"w-4 h-4 text-gray-400"}),E(C.phone)]}):"-"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm text-gray-900",children:i.jsxs("button",{onClick:V=>{V.stopPropagation(),a("messages")},className:"text-blue-600 hover:text-blue-800 flex items-center gap-2 transition",children:[i.jsx(qi,{className:"w-4 h-4"}),O(C.id).toLocaleDateString()]})})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${R(C.lead_status)}`,children:C.lead_status})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsx("button",{onClick:V=>{V.stopPropagation(),u(C),T({first_name:C.first_name,last_name:C.last_name||"",email:C.email||"",phone:C.phone||"",title:C.title||"",company_name:C.company_name||"",date_of_birth:C.date_of_birth||"",notes:C.notes||""}),h(!0)},className:"text-indigo-600 hover:text-indigo-900 p-2 rounded-lg hover:bg-indigo-50 transition",children:i.jsx(rw,{className:"w-4 h-4"})})})]},C.id)})})]})})]}),s==="messages"&&i.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(Dn,{className:"w-8 h-8 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Unified Messages"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Communication Channels"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded border",children:[i.jsx(Tt,{className:"w-5 h-5 text-blue-600"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:"Email"}),i.jsx("div",{className:"text-sm text-gray-500",children:"12 unread"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded border",children:[i.jsx(Dn,{className:"w-5 h-5 text-green-600"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:"SMS"}),i.jsx("div",{className:"text-sm text-gray-500",children:"3 unread"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded border",children:[i.jsx(es,{className:"w-5 h-5 text-purple-600"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:"Social DMs"}),i.jsx("div",{className:"text-sm text-gray-500",children:"8 unread"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded border",children:[i.jsx(qv,{className:"w-5 h-5 text-orange-600"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:"Forms"}),i.jsx("div",{className:"text-sm text-gray-500",children:"5 unread"})]})]})]})]})}),i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Recent Communications"}),i.jsxs("select",{className:"px-3 py-1 text-sm border border-gray-300 rounded",children:[i.jsx("option",{children:"All Contacts"}),i.jsx("option",{children:"Unanswered"}),i.jsx("option",{children:"This Week"})]})]}),i.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:e.slice(0,6).map((C,L)=>{var V;return i.jsx("div",{className:"bg-white rounded-lg border p-4 hover:shadow-sm transition",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-600 to-blue-700 rounded-full flex items-center justify-center text-white font-semibold text-xs",children:[C.first_name.charAt(0),(V=C.last_name)==null?void 0:V.charAt(0)]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("span",{className:"font-medium text-gray-900",children:[C.first_name," ",C.last_name]}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${L%3===0?"bg-blue-100 text-blue-700":L%3===1?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:L%3===0?"Email":L%3===1?"SMS":"Social"})]}),i.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:L%3===0?"Following up on our conversation about AI solutions...":L%3===1?"Thanks for your interest! Here are more details...":"Check out our latest campaign on LinkedIn!"}),i.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-gray-500",children:[i.jsx(qi,{className:"w-3 h-3"}),O(C.id).toLocaleDateString()," at ",O(C.id).toLocaleTimeString()]})]})]}),i.jsx("button",{className:"text-blue-600 hover:text-blue-800 p-1",children:i.jsx(es,{className:"w-4 h-4"})})]})},C.id)})})]})})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Quick Actions"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("button",{className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition",children:[i.jsx(Tt,{className:"w-4 h-4"}),"Compose Email"]}),i.jsxs("button",{className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition",children:[i.jsx(Dn,{className:"w-4 h-4"}),"Send SMS"]}),i.jsxs("button",{className:"flex items-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition",children:[i.jsx(es,{className:"w-4 h-4"}),"Start Sequence"]})]})]})]})}),o&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create New Contact"}),i.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-600",children:i.jsx(be,{className:"w-6 h-6"})})]}),i.jsxs("form",{onSubmit:N,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["First Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",required:!0,value:j.first_name,onChange:C=>_({...j,first_name:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"John"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),i.jsx("input",{type:"text",value:j.last_name,onChange:C=>_({...j,last_name:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"Doe"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),i.jsx("input",{type:"email",value:j.email,onChange:C=>_({...j,email:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"john@example.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),i.jsx("input",{type:"tel",value:j.phone,onChange:C=>_({...j,phone:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"+1 (555) 123-4567"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name"}),i.jsx("input",{type:"text",value:j.company_name,onChange:C=>_({...j,company_name:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"Acme Corporation"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),i.jsx("input",{type:"date",value:j.date_of_birth,onChange:C=>_({...j,date_of_birth:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Title"}),i.jsx("input",{type:"text",value:j.title,onChange:C=>_({...j,title:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"Marketing Manager"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),i.jsx("textarea",{value:j.notes,onChange:C=>_({...j,notes:C.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none resize-none",placeholder:"Additional notes about this contact..."})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>l(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:b||!j.first_name.trim(),className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:b?i.jsx(te,{className:"w-5 h-5 animate-spin"}):"Create Contact"})]})]})]})}),d&&c&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Contact"}),i.jsx("button",{onClick:()=>{h(!1),u(null)},className:"text-gray-400 hover:text-gray-600",children:i.jsx(be,{className:"w-6 h-6"})})]}),i.jsxs("form",{onSubmit:U,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["First Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",required:!0,value:S.first_name,onChange:C=>T({...S,first_name:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"John"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),i.jsx("input",{type:"text",value:S.last_name,onChange:C=>T({...S,last_name:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"Doe"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),i.jsx("input",{type:"email",value:S.email,onChange:C=>T({...S,email:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"john@example.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),i.jsx("input",{type:"tel",value:S.phone,onChange:C=>T({...S,phone:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"+1 (555) 123-4567"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name"}),i.jsx("input",{type:"text",value:S.company_name,onChange:C=>T({...S,company_name:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"Acme Corporation"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),i.jsx("input",{type:"date",value:S.date_of_birth,onChange:C=>T({...S,date_of_birth:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Title"}),i.jsx("input",{type:"text",value:S.title,onChange:C=>T({...S,title:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"Marketing Manager"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),i.jsx("textarea",{value:S.notes,onChange:C=>T({...S,notes:C.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none resize-none",placeholder:"Additional notes about this contact..."})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{h(!1),u(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:x||!S.first_name.trim(),className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:x?i.jsx(te,{className:"w-5 h-5 animate-spin"}):"Update Contact"})]})]})]})})]})}function Nw(){const{currentOrganization:e}=ht(),{user:t}=et(),[r,n]=v.useState([]),[s,a]=v.useState(!0),o=v.useCallback(async()=>{if(!e){n([]),a(!1);return}a(!0);try{const{data:c,error:u}=await D.from("social_media_posts").select("*").eq("organization_id",e.id).order("created_at",{ascending:!1});if(u)throw u;n(c||[])}catch(c){console.error("Error fetching social posts:",c)}finally{a(!1)}},[e]);return v.useEffect(()=>{o()},[o]),{posts:r,loading:s,createPost:async c=>{if(!e||!t)throw new Error("No organization or user selected");try{const{data:u,error:d}=await D.from("social_media_posts").insert({organization_id:e.id,content:c.content,scheduled_at:c.scheduled_at||null,media_urls:c.media_urls||[],status:c.scheduled_at?"scheduled":"draft",created_by:t.id,account_ids:[]}).select().single();if(d)throw d;return await o(),u}catch(u){throw console.error("Error creating social post:",u),u}},refetch:o}}function kw(){const[e,t]=v.useState("campaigns"),{campaigns:r,loading:n,createCampaign:s,sendCampaign:a}=vc(),{posts:o,loading:l,createPost:c}=Nw(),{addToast:u}=yc(),[d,h]=v.useState(null),f=async N=>{h(N);try{await a(N),u("success","Campaign sent successfully!")}catch{u("error","Failed to send campaign")}finally{h(null)}},[p,y]=v.useState(!1),[w,b]=v.useState(!1),[g,x]=v.useState(!1),[m,j]=v.useState({name:"",subject:"",description:"",audience:"all",sendDate:"",campaign_type:"email"}),[_,S]=v.useState({content:"",scheduledDate:""}),T=async()=>{if(!(!m.name||!m.subject)){x(!0);try{await s({name:m.name,description:m.description,campaign_type:m.campaign_type,scheduled_at:m.sendDate?new Date(m.sendDate).toISOString():void 0,settings:{subject:m.subject,audience:m.audience}}),y(!1),j({name:"",subject:"",description:"",audience:"all",sendDate:"",campaign_type:"email"}),u("success","Campaign created successfully!")}catch(N){console.error("Failed to create campaign:",N),u("error","Failed to create campaign")}finally{x(!1)}}},E=async()=>{if(_.content){x(!0);try{await c({content:_.content,scheduled_at:_.scheduledDate?new Date(_.scheduledDate).toISOString():void 0}),b(!1),S({content:"",scheduledDate:""}),u("success","Social post created successfully!")}catch(N){console.error("Failed to create post:",N),u("error","Failed to create post")}finally{x(!1)}}},O=[{id:"campaigns",name:"Campaigns & Marketing",icon:Tt},{id:"social",name:"Social Media",icon:cm}];return n||l?i.jsx("div",{className:"p-6 lg:p-8 flex items-center justify-center min-h-[400px]",children:i.jsx(te,{className:"w-8 h-8 animate-spin text-blue-600"})}):i.jsxs("div",{className:"p-6 lg:p-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(Tt,{className:"w-8 h-8 text-blue-600"}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Marketing & Social Media"})]}),i.jsx("div",{className:"border-b border-gray-200 mb-6",children:i.jsx("nav",{className:"-mb-px flex space-x-8",children:O.map(N=>{const U=N.icon;return i.jsxs("button",{onClick:()=>t(N.id),className:`group inline-flex items-center py-2 px-1 border-b-2 font-medium text-sm ${e===N.id?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[i.jsx(U,{className:`-ml-0.5 mr-2 h-5 w-5 ${e===N.id?"text-blue-600":"text-gray-400 group-hover:text-gray-500"}`}),N.name]},N.id)})})}),e==="campaigns"&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Marketing Campaigns"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Create and manage email campaigns and marketing automation"})]}),i.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition",children:[i.jsx(Ie,{className:"w-5 h-5"}),"New Campaign"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Campaigns"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:r.length})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Active"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:r.filter(N=>N.status==="active").length})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Scheduled"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:r.filter(N=>N.status==="scheduled").length})]})]}),i.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:r.length===0?i.jsx("div",{className:"p-8 text-center text-gray-500",children:"No campaigns found. Create one to get started."}):i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created At"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(N=>i.jsxs("tr",{children:[i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[i.jsx("div",{className:"font-medium text-gray-900",children:N.name}),i.jsx("div",{className:"text-sm text-gray-500",children:N.description})]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap capitalize",children:N.campaign_type}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${N.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:N.status})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(N.created_at).toLocaleDateString()}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:N.status==="draft"&&i.jsxs("button",{onClick:()=>f(N.id),disabled:d===N.id,className:"text-blue-600 hover:text-blue-900 disabled:opacity-50 flex items-center gap-1 ml-auto",children:[d===N.id?i.jsx(te,{className:"w-3 h-3 animate-spin"}):i.jsx(es,{className:"w-3 h-3"}),"Send"]})})]},N.id))})]})})]}),e==="social"&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Social Media Management"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Schedule posts and manage social media accounts"})]}),i.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition",children:[i.jsx(Ie,{className:"w-5 h-5"}),"New Post"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Posts"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:o.length})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Scheduled"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:o.filter(N=>N.status==="scheduled").length})]})]}),i.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:o.length===0?i.jsx("div",{className:"p-8 text-center text-gray-500",children:"No social posts found."}):i.jsx("div",{className:"divide-y divide-gray-200",children:o.map(N=>i.jsx("div",{className:"p-6 hover:bg-gray-50 transition",children:i.jsx("div",{className:"flex justify-between items-start",children:i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-900 mb-2",children:N.content}),i.jsxs("div",{className:"flex gap-2 text-sm text-gray-500",children:[i.jsx("span",{children:N.status}),i.jsx("span",{children:""}),i.jsx("span",{children:new Date(N.created_at).toLocaleDateString()})]})]})})},N.id))})})]}),p&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Create Campaign"}),i.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:i.jsx(be,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Campaign Name"}),i.jsx("input",{type:"text",value:m.name,onChange:N=>j({...m,name:N.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 outline-none",placeholder:"e.g., Summer Sale"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject Line"}),i.jsx("input",{type:"text",value:m.subject,onChange:N=>j({...m,subject:N.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 outline-none",placeholder:"Subject..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),i.jsx("textarea",{value:m.description,onChange:N=>j({...m,description:N.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 outline-none",rows:3})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Scheduled Date (Optional)"}),i.jsx("input",{type:"date",value:m.sendDate,onChange:N=>j({...m,sendDate:N.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 outline-none"})]}),i.jsxs("div",{className:"flex gap-3 pt-6 border-t border-gray-200",children:[i.jsx("button",{onClick:()=>y(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),i.jsx("button",{onClick:T,disabled:g||!m.name,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center justify-center gap-2",children:g?i.jsx(te,{className:"w-4 h-4 animate-spin"}):"Create Campaign"})]})]})]})}),w&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"New Social Post"}),i.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:i.jsx(be,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),i.jsx("textarea",{value:_.content,onChange:N=>S({..._,content:N.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 outline-none",rows:4,placeholder:"What's on your mind?"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Schedule (Optional)"}),i.jsx("input",{type:"datetime-local",value:_.scheduledDate,onChange:N=>S({..._,scheduledDate:N.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 outline-none"})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{onClick:()=>b(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg",children:"Cancel"}),i.jsx("button",{onClick:E,disabled:g||!_.content,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg flex justify-center items-center",children:g?i.jsx(te,{className:"w-4 h-4 animate-spin"}):"Post"})]})]})]})})]})}function wc(){const{currentOrganization:e}=ht(),{user:t}=et(),[r,n]=v.useState([]),[s,a]=v.useState(!0);v.useEffect(()=>{if(!e)return;o();const c=D.channel("mcp_servers_changes").on("postgres_changes",{event:"*",schema:"public",table:"mcp_servers",filter:`organization_id=eq.${e.id}`},()=>{o()}).subscribe();return()=>{c.unsubscribe()}},[e]);const o=async()=>{if(e)try{const{data:c,error:u}=await D.from("mcp_servers").select("*").eq("organization_id",e.id).order("created_at",{ascending:!1});if(u)throw u;n(c||[])}catch(c){console.error("Error fetching MCP servers:",c)}finally{a(!1)}};return{servers:r,loading:s,createServer:async c=>{if(!e||!t)return null;try{const{data:u,error:d}=await D.from("mcp_servers").insert({organization_id:e.id,name:c.name,description:c.description||null,server_type:c.server_type,endpoint_url:c.endpoint_url||null,status:"active",health_status:"healthy",capabilities:{},created_by:t.id}).select().single();if(d)throw d;return u}catch(u){throw console.error("Error creating MCP server:",u),u}},refetch:o}}const Sw=[{id:"content_generation",name:"Content Generation",description:"Create blog posts, social media content, emails",icon:"",color:"bg-purple-100 text-purple-800"},{id:"voice",name:"Voice Agent",description:"Handle phone calls with real-time speech processing",icon:"",color:"bg-green-100 text-green-800"},{id:"operating",name:"Operating Agent",description:"Knowledgeable assistant for entire operations",icon:"",color:"bg-blue-100 text-blue-800"},{id:"social_media",name:"Social Media Bot",description:"Automate posting and content curation",icon:"",color:"bg-pink-100 text-pink-800"},{id:"lead_qualification",name:"Lead Qualification",description:"Automatically score and qualify leads",icon:"",color:"bg-orange-100 text-orange-800"}],Cw=({isOpen:e,onClose:t,onSave:r})=>{const{servers:n}=wc(),[s,a]=v.useState("wizard"),[o,l]=v.useState(""),[c,u]=v.useState(""),[d,h]=v.useState(""),[f,p]=v.useState({name:"",description:"",agentType:"",aiModel:"gemini",mcpServerIds:[],temperature:.7,maxTokens:2e3,referenceLinks:[],uploadedFiles:[],promptTemplate:"",memorySize:1e3}),[y,w]=v.useState({url:"",title:"",description:""}),[b,g]=v.useState(!1),x=async()=>{if(!(!f.name.trim()||!f.agentType))try{await r(f),t(),m()}catch(N){console.error("Failed to create agent:",N)}},m=()=>{p({name:"",description:"",agentType:"",aiModel:"gemini",mcpServerIds:[],temperature:.7,maxTokens:2e3,referenceLinks:[],uploadedFiles:[],promptTemplate:"",memorySize:1e3}),w({url:"",title:"",description:""}),a("wizard"),l(""),u(""),h("")},j=()=>{try{const N=JSON.parse(o);p({...f,...N,referenceLinks:N.referenceLinks||[],uploadedFiles:N.uploadedFiles||[]})}catch{alert("Invalid JSON configuration")}},_=()=>{!y.url.trim()||!y.title.trim()||(p({...f,referenceLinks:[...f.referenceLinks,{id:Date.now().toString(),...y}]}),w({url:"",title:"",description:""}))},S=N=>{p({...f,referenceLinks:f.referenceLinks.filter(U=>U.id!==N)})},T=async N=>{g(!0);for(let U of Array.from(N)){const k=U.type.startsWith("image/")?"image":U.type.startsWith("video/")?"video":"document",R={id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:U.name,type:k,size:U.size,url:`https://storage.example.com/${U.name}`};p(C=>({...C,uploadedFiles:[...C.uploadedFiles,R]}))}g(!1)},E=N=>{p({...f,uploadedFiles:f.uploadedFiles.filter(U=>U.id!==N)})},O=async()=>{!c.trim()||!d.trim()||(alert(`Connected to n8n instance at ${c}`),a("wizard"))};return e?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create AI Agent"}),i.jsx("button",{onClick:()=>{t(),m()},className:"text-gray-400 hover:text-gray-600",children:i.jsx(be,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"flex h-[calc(90vh-120px)]",children:[i.jsxs("div",{className:"w-80 border-r border-gray-200 p-6",children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Creation Method"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("button",{onClick:()=>a("wizard"),className:`w-full p-4 border-2 rounded-lg text-left transition ${s==="wizard"?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Vi,{className:"w-5 h-5 text-blue-600"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:"Wizard Setup"}),i.jsx("div",{className:"text-sm text-gray-600",children:"Step-by-step configuration"})]})]})}),i.jsx("button",{onClick:()=>a("json"),className:`w-full p-4 border-2 rounded-lg text-left transition ${s==="json"?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Xn,{className:"w-5 h-5 text-green-600"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:"JSON Config"}),i.jsx("div",{className:"text-sm text-gray-600",children:"Import agent configuration"})]})]})}),i.jsx("button",{onClick:()=>a("n8n"),className:`w-full p-4 border-2 rounded-lg text-left transition ${s==="n8n"?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Vi,{className:"w-5 h-5 text-orange-600"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:"n8n Integration"}),i.jsx("div",{className:"text-sm text-gray-600",children:"Connect workflow automation"})]})]})})]})]}),i.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[s==="wizard"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Agent Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",value:f.name,onChange:N=>p({...f,name:N.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"My AI Assistant"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Agent Type ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("select",{value:f.agentType,onChange:N=>p({...f,agentType:N.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",children:[i.jsx("option",{value:"",children:"Select agent type"}),Sw.map(N=>i.jsx("option",{value:N.id,children:N.name},N.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),i.jsx("textarea",{value:f.description,onChange:N=>p({...f,description:N.target.value}),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none resize-none",placeholder:"Describe what this agent does..."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"AI Model"}),i.jsxs("select",{value:f.aiModel,onChange:N=>p({...f,aiModel:N.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",children:[i.jsx("option",{value:"gemini",children:" Google Gemini"}),i.jsx("option",{value:"gpt-4",children:" GPT-4"}),i.jsx("option",{value:"claude",children:" Claude"}),i.jsx("option",{value:"gpt-3.5",children:" GPT-3.5 Turbo"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temperature"}),i.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:f.temperature,onChange:N=>p({...f,temperature:parseFloat(N.target.value)}),className:"w-full"}),i.jsx("span",{className:"text-sm text-gray-600",children:f.temperature})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Tokens"}),i.jsx("input",{type:"number",value:f.maxTokens,onChange:N=>p({...f,maxTokens:parseInt(N.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",min:"100",max:"4000"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Connected MCP Servers"}),i.jsxs("div",{className:"space-y-2 mb-4",children:[n.map(N=>i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"checkbox",id:N.id,checked:f.mcpServerIds.includes(N.id),onChange:U=>{const k=U.target.checked;p({...f,mcpServerIds:k?[...f.mcpServerIds,N.id]:f.mcpServerIds.filter(R=>R!==N.id)})},className:"w-4 h-4 text-blue-600"}),i.jsxs("label",{htmlFor:N.id,className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:N.name}),i.jsxs("span",{className:"text-gray-600 ml-2",children:["(",N.server_type,")"]})]})]},N.id)),n.length===0&&i.jsx("p",{className:"text-sm text-gray-500",children:"No MCP servers available. Add servers from the MCP page."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reference Links"}),i.jsx("div",{className:"space-y-2",children:f.referenceLinks.map(N=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ol,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),i.jsx("a",{href:N.url,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-blue-600 hover:underline truncate",children:N.title})]}),N.description&&i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:N.description})]}),i.jsx("button",{onClick:()=>S(N.id),className:"text-red-600 hover:text-red-700 p-1",children:i.jsx(br,{className:"w-4 h-4"})})]},N.id))}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-3",children:[i.jsx("input",{type:"url",placeholder:"https://...",value:y.url,onChange:N=>w({...y,url:N.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none"}),i.jsx("input",{type:"text",placeholder:"Link title",value:y.title,onChange:N=>w({...y,title:N.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none"}),i.jsxs("button",{onClick:_,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition flex items-center gap-2",children:[i.jsx(Ie,{className:"w-4 h-4"}),"Add Link"]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Knowledge Base (Upload Files)"}),i.jsx("div",{className:"space-y-2",children:f.uploadedFiles.map(N=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[N.type==="image"&&i.jsx(am,{className:"w-4 h-4 text-green-600"}),N.type==="video"&&i.jsx(dm,{className:"w-4 h-4 text-blue-600"}),N.type==="document"&&i.jsx(Zn,{className:"w-4 h-4 text-red-600"}),i.jsx("span",{className:"font-medium",children:N.name}),i.jsxs("span",{className:"text-sm text-gray-500",children:["(",(N.size/1024).toFixed(1)," KB)"]})]}),i.jsx("button",{onClick:()=>E(N.id),className:"text-red-600 hover:text-red-700 p-1",children:i.jsx(br,{className:"w-4 h-4"})})]},N.id))}),i.jsxs("div",{className:"mt-3",children:[i.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*,.pdf,.doc,.docx,.txt",onChange:N=>N.target.files&&T(N.target.files),className:"hidden",id:"file-upload"}),i.jsxs("label",{htmlFor:"file-upload",className:"inline-flex items-center gap-2 px-4 py-2 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-600 transition cursor-pointer",children:[i.jsx(ow,{className:`w-4 h-4 ${b?"animate-spin":""}`}),b?"Uploading...":"Upload Files (Docs, Images, Videos)"]})]})]})]}),s==="json"&&i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Import JSON Configuration"}),i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Paste a JSON configuration to import an agent setup. This is useful for sharing agent configurations or backing up agents."}),i.jsx("textarea",{value:o,onChange:N=>l(N.target.value),rows:15,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none font-mono text-sm",placeholder:"Paste your JSON agent configuration here..."}),i.jsxs("div",{className:"flex gap-3 mt-4",children:[i.jsx("button",{onClick:j,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition",children:"Import Configuration"}),i.jsx("button",{onClick:()=>l(JSON.stringify(f,null,2)),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Export Current Config"})]})]})}),s==="n8n"&&i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Connect to n8n Workflow"}),i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Connect your GAS OS agent to an n8n workflow for automated data processing and integration capabilities."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"n8n Instance URL"}),i.jsx("input",{type:"url",value:c,onChange:N=>u(N.target.value),placeholder:"https://your-n8n-instance.com",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key"}),i.jsx("input",{type:"password",value:d,onChange:N=>h(N.target.value),placeholder:"Your n8n API key",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none"})]}),i.jsx("button",{onClick:O,disabled:!c.trim()||!d.trim(),className:"px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition disabled:opacity-50",children:"Connect to n8n"})]})]})})]})]}),i.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:[i.jsx("button",{onClick:()=>{t(),m()},className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancel"}),i.jsx("button",{onClick:x,disabled:!f.name.trim()||!f.agentType,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:"Create Agent"})]})]})}):null},Ew=({isOpen:e,onClose:t,agent:r,onSave:n,onDelete:s})=>{var O,N,U;const{servers:a}=wc(),[o,l]=v.useState("overview"),[c,u]=v.useState(!1),[d,h]=v.useState({name:"",description:"",agent_type:"",status:"active",aiModel:"gemini",temperature:.7,maxTokens:2e3,mcpServerIds:[],referenceLinks:[],uploadedFiles:[],promptTemplate:""}),[f,p]=v.useState({url:"",title:"",description:""}),[y,w]=v.useState(!1);v.useEffect(()=>{var k,R,C,L,V,B,A;r&&h({name:r.name||"",description:r.description||"",agent_type:r.agent_type||"",status:r.status||"active",aiModel:((k=r.configuration)==null?void 0:k.aiModel)||"gemini",temperature:((R=r.configuration)==null?void 0:R.temperature)||.7,maxTokens:((C=r.configuration)==null?void 0:C.maxTokens)||2e3,mcpServerIds:((L=r.configuration)==null?void 0:L.mcpServerIds)||[],referenceLinks:((V=r.knowledge_base)==null?void 0:V.referenceLinks)||[],uploadedFiles:((B=r.knowledge_base)==null?void 0:B.uploadedFiles)||[],promptTemplate:((A=r.knowledge_base)==null?void 0:A.promptTemplate)||""})},[r]);const b=async()=>{if(r)try{const k={name:d.name,description:d.description,agent_type:d.agent_type,status:d.status,configuration:{aiModel:d.aiModel,temperature:d.temperature,maxTokens:d.maxTokens,mcpServerIds:d.mcpServerIds},knowledge_base:{referenceLinks:d.referenceLinks,uploadedFiles:d.uploadedFiles,promptTemplate:d.promptTemplate,memorySize:1e3}};await n(r.id,k),u(!1)}catch(k){console.error("Failed to update agent:",k)}},g=async()=>{if(!r)return;const k=d.status==="active"?"inactive":"active";h({...d,status:k});try{await n(r.id,{status:k})}catch{h({...d,status:d.status})}},x=()=>{!f.url.trim()||!f.title.trim()||(h({...d,referenceLinks:[...d.referenceLinks,{id:Date.now().toString(),...f}]}),p({url:"",title:"",description:""}))},m=k=>{h({...d,referenceLinks:d.referenceLinks.filter(R=>R.id!==k)})},j=k=>{h({...d,uploadedFiles:d.uploadedFiles.filter(R=>R.id!==k)})},_=async k=>{w(!0);for(let R of Array.from(k)){const C=R.type.startsWith("image/")?"image":R.type.startsWith("video/")?"video":"document",L={id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:R.name,type:C,size:R.size,url:`https://storage.example.com/${R.name}`};h(V=>({...V,uploadedFiles:[...V.uploadedFiles,L]}))}w(!1)},S=async()=>{if(!(!r||!window.confirm("Are you sure you want to delete this agent? This action cannot be undone.")))try{await s(r.id),t()}catch(k){console.error("Failed to delete agent:",k)}};if(!e||!r)return null;const E=(k=>{const R={content_generation:{name:"Content Generation",icon:"",color:"bg-purple-100 text-purple-800"},voice:{name:"Voice Agent",icon:"",color:"bg-green-100 text-green-800"},operating:{name:"Operating Agent",icon:"",color:"bg-blue-100 text-blue-800"},social_media:{name:"Social Media Bot",icon:"",color:"bg-pink-100 text-pink-800"},lead_qualification:{name:"Lead Qualification",icon:"",color:"bg-orange-100 text-orange-800"}};return R[k]||R.content_generation})(r.agent_type);return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br rounded-xl flex items-center justify-center text-2xl",children:E.icon}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:r.name}),i.jsx("p",{className:"text-sm text-gray-600",children:E.name})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("button",{onClick:g,className:`flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium transition ${d.status==="active"?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[d.status==="active"?i.jsx(xc,{className:"w-4 h-4"}):i.jsx(tw,{className:"w-4 h-4"}),d.status==="active"?"Active":"Inactive"]}),i.jsx("button",{onClick:()=>u(!c),className:"p-2 text-gray-600 hover:text-gray-800 transition",children:i.jsx(iw,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>t(),className:"text-gray-400 hover:text-gray-600",children:i.jsx(be,{className:"w-6 h-6"})})]})]}),i.jsxs("div",{className:"flex h-[calc(90vh-140px)]",children:[i.jsxs("div",{className:"w-64 border-r border-gray-200 p-6",children:[i.jsx("nav",{className:"space-y-2",children:[{id:"overview",label:"Overview",icon:fn},{id:"configuration",label:"Configuration",icon:fn},{id:"resources",label:"Resources & Knowledge",icon:Zn}].map(k=>{const R=k.icon;return i.jsxs("button",{onClick:()=>l(k.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition ${o===k.id?"bg-blue-50 border-r-2 border-blue-600 text-blue-700":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx(R,{className:"w-5 h-5"}),k.label]},k.id)})}),c&&i.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:i.jsxs("button",{onClick:S,className:"w-full flex items-center gap-2 px-4 py-2 text-red-600 hover:text-red-700 border border-red-200 hover:border-red-300 rounded-lg transition",children:[i.jsx(br,{className:"w-4 h-4"}),"Delete Agent"]})})]}),i.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[o==="overview"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Agent Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),c?i.jsx("input",{type:"text",value:d.name,onChange:k=>h({...d,name:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none"}):i.jsx("p",{className:"text-gray-900",children:r.name})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),i.jsx("p",{className:"text-gray-900",children:E.name})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),c?i.jsx("textarea",{value:d.description,onChange:k=>h({...d,description:k.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none resize-none"}):i.jsx("p",{className:"text-gray-900",children:r.description||"No description provided"})]})]})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Metrics"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:((O=r.performance_metrics)==null?void 0:O.tasks_completed)||0}),i.jsx("div",{className:"text-sm text-gray-600",children:"Tasks Completed"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[((N=r.performance_metrics)==null?void 0:N.success_rate)||0,"%"]}),i.jsx("div",{className:"text-sm text-gray-600",children:"Success Rate"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-purple-600",children:((U=r.performance_metrics)==null?void 0:U.tokens_used)||0}),i.jsx("div",{className:"text-sm text-gray-600",children:"Tokens Used"})]})]})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Connected MCP Servers"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:d.mcpServerIds.length>0?d.mcpServerIds.map(k=>{const R=a.find(C=>C.id===k);return i.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm",children:(R==null?void 0:R.name)||"Unknown Server"},k)}):i.jsx("p",{className:"text-gray-500",children:"No MCP servers connected"})})]})]}),o==="configuration"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"AI Model Configuration"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"AI Model"}),c?i.jsxs("select",{value:d.aiModel,onChange:k=>h({...d,aiModel:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",children:[i.jsx("option",{value:"gemini",children:" Google Gemini"}),i.jsx("option",{value:"gpt-4",children:" GPT-4"}),i.jsx("option",{value:"claude",children:" Claude"}),i.jsx("option",{value:"gpt-3.5",children:" GPT-3.5 Turbo"})]}):i.jsx("p",{className:"text-gray-900",children:d.aiModel})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temperature"}),c?i.jsxs("div",{children:[i.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:d.temperature,onChange:k=>h({...d,temperature:parseFloat(k.target.value)}),className:"w-full"}),i.jsx("span",{className:"text-sm text-gray-600 block mt-1",children:d.temperature})]}):i.jsx("p",{className:"text-gray-900",children:d.temperature})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Tokens"}),c?i.jsx("input",{type:"number",value:d.maxTokens,onChange:k=>h({...d,maxTokens:parseInt(k.target.value)}),min:"100",max:"4000",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none"}):i.jsx("p",{className:"text-gray-900",children:d.maxTokens})]})]})]}),c&&i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Connected MCP Servers"}),i.jsxs("div",{className:"space-y-3",children:[a.map(k=>i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"checkbox",id:k.id,checked:d.mcpServerIds.includes(k.id),onChange:R=>{const C=R.target.checked;h({...d,mcpServerIds:C?[...d.mcpServerIds,k.id]:d.mcpServerIds.filter(L=>L!==k.id)})},className:"w-4 h-4 text-blue-600"}),i.jsxs("label",{htmlFor:k.id,className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:k.name}),i.jsxs("span",{className:"text-gray-600 ml-2",children:["(",k.server_type,")"]})]})]},k.id)),a.length===0&&i.jsx("p",{className:"text-sm text-gray-500",children:"No MCP servers available. Add servers from the MCP page."})]})]})]}),o==="resources"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Custom Prompt Template"}),c?i.jsx("textarea",{value:d.promptTemplate,onChange:k=>h({...d,promptTemplate:k.target.value}),rows:8,placeholder:"Enter your custom prompt template... Use {input} for user input, {context} for additional context, etc.",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none font-mono text-sm"}):i.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:i.jsx("p",{className:"text-gray-700 whitespace-pre-wrap font-mono text-sm",children:d.promptTemplate||"No custom prompt template set"})})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Reference Links"}),i.jsxs("div",{className:"space-y-3",children:[d.referenceLinks.map(k=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ol,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),i.jsx("a",{href:k.url,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-blue-600 hover:underline truncate",children:k.title})]}),k.description&&i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:k.description})]}),c&&i.jsx("button",{onClick:()=>m(k.id),className:"text-red-600 hover:text-red-700 p-1",children:i.jsx(br,{className:"w-4 h-4"})})]},k.id)),d.referenceLinks.length===0&&i.jsx("p",{className:"text-gray-500 text-sm",children:"No reference links added yet"}),c&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-4",children:[i.jsx("input",{type:"url",placeholder:"https://...",value:f.url,onChange:k=>p({...f,url:k.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none"}),i.jsx("input",{type:"text",placeholder:"Link title",value:f.title,onChange:k=>p({...f,title:k.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none"}),i.jsxs("button",{onClick:x,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition flex items-center gap-2",children:[i.jsx(ol,{className:"w-4 h-4"}),"Add Link"]})]})]})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Knowledge Base Files"}),i.jsxs("div",{className:"space-y-3",children:[d.uploadedFiles.map(k=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[k.type==="image"&&i.jsx(am,{className:"w-4 h-4 text-green-600"}),k.type==="video"&&i.jsx(dm,{className:"w-4 h-4 text-blue-600"}),k.type==="document"&&i.jsx(Zn,{className:"w-4 h-4 text-red-600"}),i.jsx("span",{className:"font-medium",children:k.name}),i.jsxs("span",{className:"text-sm text-gray-500",children:["(",(k.size/1024).toFixed(1)," KB)"]})]}),c&&i.jsx("button",{onClick:()=>j(k.id),className:"text-red-600 hover:text-red-700 p-1",children:i.jsx(br,{className:"w-4 h-4"})})]},k.id)),d.uploadedFiles.length===0&&i.jsx("p",{className:"text-gray-500 text-sm",children:"No files uploaded yet"}),c&&i.jsxs("div",{className:"mt-4",children:[i.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*,.pdf,.doc,.docx,.txt",onChange:k=>k.target.files&&_(k.target.files),className:"hidden",id:"resource-upload"}),i.jsx("label",{htmlFor:"resource-upload",className:`inline-flex items-center gap-2 px-4 py-2 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-600 transition cursor-pointer ${y?"opacity-50 cursor-wait":""}`,children:y?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-gray-600 border-t-transparent rounded-full animate-spin"}),"Uploading..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Zn,{className:"w-4 h-4"}),"Add More Files"]})})]})]})]})]})]})]}),c&&i.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:[i.jsx("button",{onClick:()=>{var k,R,C,L,V,B,A;u(!1),r&&h({name:r.name||"",description:r.description||"",agent_type:r.agent_type||"",status:r.status||"active",aiModel:((k=r.configuration)==null?void 0:k.aiModel)||"gemini",temperature:((R=r.configuration)==null?void 0:R.temperature)||.7,maxTokens:((C=r.configuration)==null?void 0:C.maxTokens)||2e3,mcpServerIds:((L=r.configuration)==null?void 0:L.mcpServerIds)||[],referenceLinks:((V=r.knowledge_base)==null?void 0:V.referenceLinks)||[],uploadedFiles:((B=r.knowledge_base)==null?void 0:B.uploadedFiles)||[],promptTemplate:((A=r.knowledge_base)==null?void 0:A.promptTemplate)||""})},className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancel"}),i.jsxs("button",{onClick:b,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition flex items-center gap-2",children:[i.jsx(sw,{className:"w-4 h-4"}),"Save Changes"]})]})]})})};function Tw({isOpen:e,onClose:t,agent:r}){const[n,s]=v.useState(""),[a,o]=v.useState(!1),[l,c]=v.useState([]),[u,d]=v.useState(""),h=v.useRef(null),{addToast:f}=yc();v.useEffect(()=>{e&&(c([{timestamp:new Date().toLocaleTimeString(),message:`System initialized. Ready to run agent: ${(r==null?void 0:r.name)||"Unknown Agent"}`,type:"system"}]),d(""),s(""),o(!1))},[e,r]),v.useEffect(()=>{var w;(w=h.current)==null||w.scrollIntoView({behavior:"smooth"})},[l]);const p=(w,b="info")=>{c(g=>[...g,{timestamp:new Date().toLocaleTimeString(),message:w,type:b}])},y=async()=>{if(!n.trim())return;o(!0),d(""),c([{timestamp:new Date().toLocaleTimeString(),message:`Starting execution cycle for: ${r.name}`,type:"system"}]),p(`Input received: "${n}"`,"info");const w=[{msg:"Analyzing intent and context...",delay:800},{msg:"Retrieving relevant knowledge base documents...",delay:1500},{msg:`Querying ${r.agent_type} model (Temperature: 0.7)...`,delay:2200},{msg:"Processing response...",delay:3e3},{msg:"Formatting output...",delay:3500}];for(const g of w)await new Promise(x=>setTimeout(x,Math.random()*500+500)),p(g.msg,"info");await new Promise(g=>setTimeout(g,800)),p("Execution completed successfully.","success");let b="";r.agent_type==="content_generation"?b=`## Content Generated for: ${n}

Here is a draft based on your request:

**Headline:** Unlocking the Future of AI with ${r.name}

**Body:** In today's rapidly evolving digital landscape, leveraging advanced AI agents is no longer a luxuryit's a necessity. Our platform provides the tools you need to automate workflows, analyze data, and engage customers like never before.

*Key Takeaways:*
- Automation saves time
- Data-driven decisions
- Enhanced customer experience`:r.agent_type==="operating"?b=`**Analysis Report**

Based on the operational data provided in "${n}", I have identified three key areas for optimization:

1. **Workflow Redundancy:** Detected duplicate processes in the intake phase.
2. **Resource Allocation:** Team B is currently over-utilized by 15%.
3. **Cost Saving:** Switching provider X could save $200/mo.

**Action Items:**
- Review intake automation rules.
- Rebalance Team B workload.`:b=`I have processed your request: "${n}".

Task status: COMPLETED
Confidence Score: 98%

Actions taken:
- Parsed input
- Executed internal logic
- Validated results`,d(b),o(!1),f("success","Agent finished execution")};return e?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 bg-gray-50",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(Kt,{className:"w-6 h-6 text-blue-600"})}),i.jsxs("div",{children:[i.jsxs("h2",{className:"text-lg font-bold text-gray-900",children:[r==null?void 0:r.name," Playground"]}),i.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[i.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Online  ",r==null?void 0:r.agent_type]})]})]}),i.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:i.jsx(be,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[i.jsxs("div",{className:"w-1/3 border-r border-gray-200 p-6 flex flex-col bg-white",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task / Prompt"}),i.jsx("textarea",{value:n,onChange:w=>s(w.target.value),disabled:a,className:"w-full h-64 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none resize-none text-sm",placeholder:"Describe the task you want the agent to perform..."}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Be specific about the desired output format and constraints."})]}),i.jsx("button",{onClick:y,disabled:a||!n.trim(),className:"mt-4 w-full bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg font-medium flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:a?i.jsxs(i.Fragment,{children:[i.jsx(te,{className:"w-5 h-5 animate-spin"}),"Running..."]}):i.jsxs(i.Fragment,{children:[i.jsx(xc,{className:"w-5 h-5"}),"Run Agent"]})})]}),i.jsxs("div",{className:"w-2/3 flex flex-col bg-gray-900",children:[i.jsxs("div",{className:"h-1/2 border-b border-gray-800 p-4 overflow-y-auto font-mono text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2 text-gray-400 mb-4 sticky top-0 bg-gray-900 pb-2 border-b border-gray-800",children:[i.jsx(aw,{className:"w-4 h-4"}),i.jsx("span",{className:"text-xs uppercase tracking-wider font-semibold",children:"Live Execution Logs"})]}),i.jsxs("div",{className:"space-y-1.5",children:[l.map((w,b)=>i.jsxs("div",{className:`flex gap-3 ${w.type==="error"?"text-red-400":w.type==="success"?"text-green-400":w.type==="system"?"text-blue-400":"text-gray-300"}`,children:[i.jsxs("span",{className:"text-gray-600 shrink-0",children:["[",w.timestamp,"]"]}),i.jsxs("span",{children:[w.type==="system"?">":""," ",w.message]})]},b)),i.jsx("div",{ref:h})]})]}),i.jsxs("div",{className:"h-1/2 p-6 overflow-y-auto bg-gray-50",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-sm font-bold text-gray-700 uppercase tracking-wider",children:"Result Output"}),u&&i.jsxs("button",{className:"text-xs text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[i.jsx(nw,{className:"w-3 h-3"})," Copy"]})]}),u?i.jsx("div",{className:"prose prose-sm max-w-none text-gray-800 whitespace-pre-wrap font-sans bg-white p-4 rounded border border-gray-200 shadow-sm",children:u}):i.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[i.jsx(Kt,{className:"w-12 h-12 mb-2 opacity-20"}),i.jsx("p",{className:"text-sm",children:"Run the agent to see output here"})]})]})]})]})]})}):null}const td=[{id:"content_generation",name:"Content Generation",description:"Create blog posts, social media content, emails, and more",icon:js,color:"from-purple-600 to-purple-700"},{id:"voice",name:"Voice Agent",description:"Handle phone calls with real-time speech processing",icon:om,color:"from-green-600 to-green-700"},{id:"operating",name:"Operating Agent",description:"Knowledgeable assistant for entire company/project operations",icon:Vi,color:"from-blue-600 to-blue-700"},{id:"social_media",name:"Social Media Bot",description:"Automate posting, engagement, and content curation",icon:cm,color:"from-pink-600 to-pink-700"},{id:"lead_qualification",name:"Lead Qualification",description:"Automatically score and qualify leads based on criteria",icon:Xv,color:"from-orange-600 to-orange-700"}];function Pw(){const{agents:e,loading:t,createAgent:r,updateAgent:n,deleteAgent:s}=fm(),[a,o]=v.useState("agents"),[l,c]=v.useState(!1),[u,d]=v.useState(null),[h,f]=v.useState(!1),[p,y]=v.useState(!1),[w,b]=v.useState(null),g=async E=>{try{await r({name:E.name,description:E.description,agent_type:E.agentType,configuration:{aiModel:E.aiModel,mcpServerIds:E.mcpServerIds,temperature:E.temperature,maxTokens:E.maxTokens,referenceLinks:E.referenceLinks,uploadedFiles:E.uploadedFiles,promptTemplate:E.promptTemplate,memorySize:E.memorySize}})}catch(O){throw console.error("Failed to create agent:",O),O}},x=E=>td.find(O=>O.id===E)||td[0],m=E=>E==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700",j=E=>{d(E),f(!0)},_=async(E,O)=>{try{await n(E,O),f(!1)}catch(N){console.error("Failed to update agent:",N)}},S=async E=>{try{await s(E),f(!1)}catch(O){console.error("Failed to delete agent:",O)}},T=(E,O)=>{E.stopPropagation(),b(O),y(!0)};return t?i.jsx("div",{className:"p-6 lg:p-8 flex items-center justify-center min-h-[400px]",children:i.jsx(te,{className:"w-8 h-8 animate-spin text-blue-600"})}):i.jsxs("div",{className:"p-6 lg:p-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Kt,{className:"w-8 h-8 text-blue-600"}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"AI Agents & Coding"})]}),a==="agents"&&i.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition",children:[i.jsx(Ie,{className:"w-5 h-5"}),"Create Agent"]})]}),i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"border-b border-gray-200",children:i.jsxs("nav",{className:"-mb-px flex space-x-8",children:[i.jsxs("button",{onClick:()=>o("agents"),className:`py-2 px-1 border-b-2 font-medium text-sm ${a==="agents"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[i.jsx(Kt,{className:"w-4 h-4 inline mr-2"}),"AI Agents"]}),i.jsxs("button",{onClick:()=>o("coding"),className:`py-2 px-1 border-b-2 font-medium text-sm ${a==="coding"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[i.jsx(Xn,{className:"w-4 h-4 inline mr-2"}),"Codes"]})]})})}),a==="agents"&&i.jsx(i.Fragment,{children:e.length===0?i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[i.jsx(Kt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No agents yet"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first AI agent to automate tasks and enhance productivity"}),i.jsx("button",{onClick:()=>c(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition",children:"Create Your First Agent"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(E=>{var U;const O=x(E.agent_type),N=O.icon;return i.jsxs("div",{onClick:()=>j(E),className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition cursor-pointer group",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${O.color} rounded-xl flex items-center justify-center`,children:i.jsx(N,{className:"w-6 h-6 text-white"})}),i.jsx("span",{className:`text-xs px-2 py-1 rounded ${m(E.status)}`,children:E.status})]}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:E.name}),i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:E.description||O.description}),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[i.jsx(im,{className:"w-4 h-4"}),i.jsxs("span",{children:[((U=E.performance_metrics)==null?void 0:U.tasks_completed)||0," tasks"]})]}),i.jsxs("button",{onClick:k=>T(k,E),className:"flex items-center gap-1 text-xs font-medium bg-blue-50 text-blue-600 px-2 py-1 rounded hover:bg-blue-100 transition",children:[i.jsx(xc,{className:"w-3 h-3"})," Run"]})]})]},E.id)})})}),a==="coding"&&i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Company Codes & Scripts"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Customized codes and automation scripts for your organization"})]}),i.jsxs("button",{className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition",children:[i.jsx(Ie,{className:"w-4 h-4"}),"New Code"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-gray-50 rounded-lg border p-4 hover:shadow-md transition",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:i.jsx(Xn,{className:"w-5 h-5 text-white"})}),i.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded",children:"JavaScript"})]}),i.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"CRM Integration Script"}),i.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Syncs customer data across all platforms automatically"}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[i.jsx("span",{children:"Last updated: Nov 18"}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{className:"text-blue-600 hover:text-blue-800 p-1",title:"View Code",children:i.jsx(Dr,{className:"w-3 h-3"})}),i.jsx("button",{className:"text-blue-600 hover:text-blue-800 p-1",title:"Copy Code",children:i.jsx(Rn,{className:"w-3 h-3"})})]})]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg border p-4 hover:shadow-md transition",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-600 to-green-700 rounded-lg flex items-center justify-center",children:i.jsx(Zn,{className:"w-5 h-5 text-white"})}),i.jsx("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded",children:"Python"})]}),i.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Data Processing Pipeline"}),i.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Processes incoming data and generates business insights"}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[i.jsx("span",{children:"Last updated: Nov 17"}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{className:"text-blue-600 hover:text-blue-800 p-1",title:"View Code",children:i.jsx(Dr,{className:"w-3 h-3"})}),i.jsx("button",{className:"text-blue-600 hover:text-blue-800 p-1",title:"Copy Code",children:i.jsx(Rn,{className:"w-3 h-3"})})]})]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg border p-4 hover:shadow-md transition",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-600 to-purple-700 rounded-lg flex items-center justify-center",children:i.jsx(fn,{className:"w-5 h-5 text-white"})}),i.jsx("span",{className:"text-xs px-2 py-1 bg-orange-100 text-orange-700 rounded",children:"SQL"})]}),i.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Analytics Queries"}),i.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Custom database queries for company-specific reporting"}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[i.jsx("span",{children:"Last updated: Nov 16"}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{className:"text-blue-600 hover:text-blue-800 p-1",title:"View Code",children:i.jsx(Dr,{className:"w-3 h-3"})}),i.jsx("button",{className:"text-blue-600 hover:text-blue-800 p-1",title:"Copy Code",children:i.jsx(Rn,{className:"w-3 h-3"})})]})]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg border p-4 hover:shadow-md transition",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-600 to-red-700 rounded-lg flex items-center justify-center",children:i.jsx(Vi,{className:"w-5 h-5 text-white"})}),i.jsx("span",{className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-700 rounded",children:"API"})]}),i.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Webhook Integrations"}),i.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Custom webhook handlers for third-party service integrations"}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[i.jsx("span",{children:"Last updated: Nov 15"}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{className:"text-blue-600 hover:text-blue-800 p-1",title:"View Code",children:i.jsx(Dr,{className:"w-3 h-3"})}),i.jsx("button",{className:"text-blue-600 hover:text-blue-800 p-1",title:"Copy Code",children:i.jsx(Rn,{className:"w-3 h-3"})})]})]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg border p-4 hover:shadow-md transition",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-600 to-indigo-700 rounded-lg flex items-center justify-center",children:i.jsx(Kt,{className:"w-5 h-5 text-white"})}),i.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded",children:"Agent"})]}),i.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"AI Workflow Scripts"}),i.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Custom scripts for AI agent automation and processing"}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[i.jsx("span",{children:"Last updated: Nov 14"}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{className:"text-blue-600 hover:text-blue-800 p-1",title:"View Code",children:i.jsx(Dr,{className:"w-3 h-3"})}),i.jsx("button",{className:"text-blue-600 hover:text-blue-800 p-1",title:"Copy Code",children:i.jsx(Rn,{className:"w-3 h-3"})})]})]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-dashed border-blue-200 rounded-lg p-4 flex flex-col items-center justify-center text-center",children:[i.jsx(Xn,{className:"w-12 h-12 text-blue-400 mb-2"}),i.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:"Add Custom Code"}),i.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Create company-specific scripts and automation"}),i.jsx("button",{className:"text-blue-600 text-sm hover:text-blue-800 font-medium",children:"+ Create Code"})]})]})]})}),i.jsx(Cw,{isOpen:l,onClose:()=>c(!1),onSave:g}),i.jsx(Ew,{isOpen:h,onClose:()=>f(!1),agent:u,onSave:_,onDelete:S}),i.jsx(Tw,{isOpen:p,onClose:()=>y(!1),agent:w})]})}const Aw=[{id:"hosted",name:"Hosted Server",description:"Create and deploy a custom MCP server in the cloud",icon:Fv},{id:"external",name:"External Server",description:"Connect to an existing MCP server via URL",icon:xi},{id:"custom",name:"Custom Server",description:"Build a custom server with TypeScript, Python, or .NET",icon:Xn}];function Ow(){const{servers:e,loading:t,createServer:r}=wc(),[n,s]=v.useState(!1),[a,o]=v.useState(null),[l,c]=v.useState(!1),[u,d]=v.useState(null),[h,f]=v.useState(!1),[p,y]=v.useState({name:"",description:"",endpoint_url:""}),[w,b]=v.useState({name:"",description:"",endpoint_url:""}),g=async _=>{if(_.preventDefault(),!(!p.name.trim()||!a)){c(!0);try{await r({name:p.name,description:p.description,server_type:a,endpoint_url:p.endpoint_url||void 0}),y({name:"",description:"",endpoint_url:""}),o(null),s(!1)}catch(S){console.error("Failed to create MCP server:",S)}finally{c(!1)}}},x=_=>_==="healthy"?gc:pc,m=_=>_==="healthy"?"text-green-600":"text-red-600",j=_=>_==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700";return t?i.jsx("div",{className:"p-6 lg:p-8 flex items-center justify-center min-h-[400px]",children:i.jsx(te,{className:"w-8 h-8 animate-spin text-blue-600"})}):i.jsxs("div",{className:"p-6 lg:p-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(xi,{className:"w-8 h-8 text-blue-600"}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"MCP Servers"})]}),i.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition",children:[i.jsx(Ie,{className:"w-5 h-5"}),"Add Server"]})]}),e.length===0?i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[i.jsx(xi,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No MCP servers yet"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Connect or create MCP servers to extend your AI capabilities with custom tools and resources"}),i.jsx("button",{onClick:()=>s(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition",children:"Add Your First Server"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(_=>{const S=x(_.health_status),T=m(_.health_status);return i.jsxs("div",{onClick:()=>{d(_),b({name:_.name,description:_.description||"",endpoint_url:_.endpoint_url||""}),f(!0)},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition cursor-pointer",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center",children:i.jsx(xi,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(S,{className:`w-5 h-5 ${T}`}),i.jsx("span",{className:`text-xs px-2 py-1 rounded ${j(_.status)}`,children:_.status})]})]}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:_.name}),i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:_.description||`${_.server_type} server`}),i.jsxs("div",{className:"space-y-2 pt-4 border-t border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-gray-500",children:"Type"}),i.jsx("span",{className:"font-medium text-gray-900",children:_.server_type})]}),_.endpoint_url&&i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-gray-500",children:"Endpoint"}),i.jsx("span",{className:"font-mono text-xs text-gray-900 truncate max-w-[150px]",children:_.endpoint_url})]}),_.version&&i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-gray-500",children:"Version"}),i.jsx("span",{className:"font-medium text-gray-900",children:_.version})]})]})]},_.id)})}),n&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Add MCP Server"}),i.jsx("button",{onClick:()=>{s(!1),o(null)},className:"text-gray-400 hover:text-gray-600",children:i.jsx(be,{className:"w-6 h-6"})})]}),i.jsxs("form",{onSubmit:g,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Server Type ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Aw.map(_=>{const S=_.icon;return i.jsx("button",{type:"button",onClick:()=>o(_.id),className:`p-4 border-2 rounded-lg text-left transition ${a===_.id?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:i.jsxs("div",{className:"flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:i.jsx(S,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:_.name}),i.jsx("p",{className:"text-sm text-gray-600",children:_.description})]})]})},_.id)})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Server Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",required:!0,value:p.name,onChange:_=>y({...p,name:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"My MCP Server"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),i.jsx("textarea",{value:p.description,onChange:_=>y({...p,description:_.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none resize-none",placeholder:"Describe what this server provides..."})]}),a==="external"&&i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Endpoint URL ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"url",required:a==="external",value:p.endpoint_url,onChange:_=>y({...p,endpoint_url:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"https://api.example.com/mcp"})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{s(!1),o(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:l||!p.name.trim()||!a,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:l?i.jsx(te,{className:"w-5 h-5 animate-spin"}):"Add Server"})]})]})]})}),h&&u&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit MCP Server"}),i.jsx("button",{onClick:()=>{f(!1),d(null)},className:"text-gray-400 hover:text-gray-600",children:i.jsx(be,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:u.name}),i.jsx("p",{className:"text-sm text-blue-700",children:"Configure server settings, endpoints, and connection details."})]}),i.jsxs("form",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Server Name"}),i.jsx("input",{type:"text",value:w.name,onChange:_=>b({...w,name:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"Server name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),i.jsx("textarea",{value:w.description,onChange:_=>b({...w,description:_.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none resize-none",placeholder:"Describe what this server provides..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Endpoint URL"}),i.jsx("input",{type:"url",value:w.endpoint_url,onChange:_=>b({...w,endpoint_url:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"https://api.example.com/mcp"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"API endpoint for the MCP server connection"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Server Configuration"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Timeout (seconds)"}),i.jsx("input",{type:"number",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"30",min:"5",max:"300"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Max Retries"}),i.jsx("input",{type:"number",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"3",min:"0",max:"10"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Authentication"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"API Key"}),i.jsx("input",{type:"password",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"Authentication key"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Bearer Token"}),i.jsx("input",{type:"password",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",placeholder:"Bearer token"})]})]})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{f(!1),d(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancel"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition flex items-center justify-center gap-2",children:"Save Changes"})]})]})]})})]})}function Rw(){const{projects:e}=ga(),{contacts:t}=xa(),{campaigns:r}=vc(),n=e.reduce((l,c)=>l+(c.budget||0),0),s=e.filter(l=>l.status==="completed").length,a=r.filter(l=>l.status==="active").length,o=t.filter(l=>{const c=new Date(l.created_at),u=new Date;return c.getMonth()===u.getMonth()&&c.getFullYear()===u.getFullYear()}).length;return i.jsxs("div",{className:"p-6 lg:p-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx($v,{className:"w-8 h-8 text-blue-600"}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:i.jsx(Uv,{className:"w-6 h-6 text-green-600"})}),i.jsx("span",{className:"text-xs font-medium text-green-600 bg-green-50 px-2 py-1 rounded",children:"+12%"})]}),i.jsx("h3",{className:"text-sm text-gray-500 font-medium",children:"Total Project Budget"}),i.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",n.toLocaleString()]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:i.jsx(gc,{className:"w-6 h-6 text-blue-600"})}),i.jsxs("span",{className:"text-xs font-medium text-blue-600 bg-blue-50 px-2 py-1 rounded",children:[s,"/",e.length]})]}),i.jsx("h3",{className:"text-sm text-gray-500 font-medium",children:"Completed Projects"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:i.jsx(rr,{className:"w-6 h-6 text-purple-600"})}),i.jsxs("span",{className:"text-xs font-medium text-purple-600 bg-purple-50 px-2 py-1 rounded",children:["+",o," this month"]})]}),i.jsx("h3",{className:"text-sm text-gray-500 font-medium",children:"Total Contacts"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:i.jsx(um,{className:"w-6 h-6 text-orange-600"})}),i.jsxs("span",{className:"text-xs font-medium text-orange-600 bg-orange-50 px-2 py-1 rounded",children:[a," active"]})]}),i.jsx("h3",{className:"text-sm text-gray-500 font-medium",children:"Marketing Reach"}),i.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(t.length*.8).toFixed(0)," ",i.jsx("span",{className:"text-sm font-normal text-gray-400",children:"est."})]})]})]}),i.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:i.jsx("p",{className:"text-gray-600",children:"Detailed charts and reporting features are coming in the next update."})})]})}function Lw(){const{currentOrganization:e}=ht(),[t,r]=v.useState([]),[n,s]=v.useState(!0),a=async()=>{if(!e){r([]),s(!1);return}s(!0);try{const{data:o,error:l}=await D.from("organization_members").select(`
          id,
          user_id,
          role,
          joined_at,
          user_profiles (
            email,
            full_name,
            avatar_url
          )
        `).eq("organization_id",e.id);if(l)throw l;const c=o.map(u=>({id:u.id,user_id:u.user_id,role:u.role,joined_at:u.joined_at,profile:u.user_profiles}));r(c)}catch(o){console.error("Error fetching members:",o)}finally{s(!1)}};return v.useEffect(()=>{a()},[e]),{members:t,loading:n,refetch:a}}const rd=[{id:"gemini",name:"Google Gemini",description:"Google's Gemini models",icon:""},{id:"gpt-4",name:"GPT-4",description:"OpenAI GPT-4",icon:""},{id:"claude",name:"Claude",description:"Anthropic Claude",icon:""},{id:"gpt-3.5",name:"GPT-3.5 Turbo",description:"OpenAI GPT-3.5 Turbo",icon:""}];function $w(){const[e,t]=v.useState("general"),[r,n]=v.useState({gemini:"","gpt-4":"",claude:"","gpt-3.5":""}),[s,a]=v.useState({gemini:!1,"gpt-4":!1,claude:!1,"gpt-3.5":!1}),[o,l]=v.useState("gemini"),[c,u]=v.useState(!1),d=async()=>{c||(u(!0),await new Promise(b=>setTimeout(b,1e3)),u(!1))},h=(b,g)=>{n(x=>({...x,[b]:g}))},f=b=>{a(g=>({...g,[b]:!g[b]}))},p=[{id:"general",name:"General",icon:fn},{id:"team",name:"Team Members",icon:rr},{id:"api-keys",name:"API Keys",icon:Kv}],{members:y,loading:w}=Lw();return i.jsxs("div",{className:"p-6 lg:p-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(fn,{className:"w-8 h-8 text-blue-600"}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"})]}),i.jsx("div",{className:"border-b border-gray-200 mb-6",children:i.jsx("nav",{className:"-mb-px flex space-x-8",children:p.map(b=>{const g=b.icon;return i.jsxs("button",{onClick:()=>t(b.id),className:`group inline-flex items-center py-2 px-1 border-b-2 font-medium text-sm ${e===b.id?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[i.jsx(g,{className:`-ml-0.5 mr-2 h-5 w-5 ${e===b.id?"text-blue-600":"text-gray-400 group-hover:text-gray-500"}`}),b.name]},b.id)})})}),e==="general"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Organization Preferences"}),i.jsx("p",{className:"text-gray-600",children:"General organization settings will be available here."})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"User Preferences"}),i.jsx("p",{className:"text-gray-600",children:"Personal settings and preferences will be available here."})]})]}),e==="team"&&i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Team Members"}),i.jsx("p",{className:"text-gray-600",children:"Manage access to your organization"})]}),i.jsxs("button",{className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition",children:[i.jsx(Tt,{className:"w-4 h-4"})," Invite Member"]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"User"}),i.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Role"}),i.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Joined"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:y.map(b=>{var g,x,m,j,_,S;return i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-semibold",children:((x=(g=b.profile)==null?void 0:g.full_name)==null?void 0:x.charAt(0))||((j=(m=b.profile)==null?void 0:m.email)==null?void 0:j.charAt(0))||"U"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:((_=b.profile)==null?void 0:_.full_name)||"Unknown"}),i.jsx("div",{className:"text-xs text-gray-500",children:(S=b.profile)==null?void 0:S.email})]})]})}),i.jsx("td",{className:"px-6 py-4 capitalize text-sm text-gray-700",children:b.role}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(b.joined_at).toLocaleDateString()})]},b.id)})})]})})]})}),e==="api-keys"&&i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"AI Model Configuration"}),i.jsx("p",{className:"text-gray-600",children:"Configure API keys for different AI models"})]}),i.jsx("button",{onClick:d,disabled:c,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition disabled:opacity-50",children:c?"Saving...":"Save Changes"})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Default AI Model"}),i.jsx("select",{value:o,onChange:b=>l(b.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none",children:rd.map(b=>i.jsxs("option",{value:b.id,children:[b.icon," ",b.name]},b.id))}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This model will be used by default for all AI operations unless overridden"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:"API Keys"}),rd.map(b=>i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("span",{className:"text-2xl",children:b.icon}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-gray-900",children:b.name}),i.jsx("p",{className:"text-sm text-gray-600",children:b.description})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:s[b.id]?"text":"password",value:r[b.id],onChange:g=>h(b.id,g.target.value),placeholder:`Enter ${b.name} API key`,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none"}),i.jsx("button",{onClick:()=>f(b.id),className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition",children:s[b.id]?i.jsx(Bv,{className:"w-4 h-4"}):i.jsx(Dr,{className:"w-4 h-4"})})]}),!r[b.id]&&i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["API key required for ",b.name," functionality"]})]},b.id))]}),i.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsx("h5",{className:"font-medium text-blue-900 mb-2",children:" Security Notice"}),i.jsx("p",{className:"text-sm text-blue-700",children:"API keys are stored securely and encrypted. Only authorized users in your organization can access them. Keys are used only for AI model requests and never shared with third parties."})]})]})})]})}function nd({children:e}){const{user:t,loading:r}=et();return r?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsx(te,{className:"w-8 h-8 animate-spin text-blue-600"})}):t?i.jsx(i.Fragment,{children:e}):i.jsx(Cf,{to:"/login",replace:!0})}function Iw(){return i.jsx(ix,{children:i.jsx(Av,{children:i.jsx(Ov,{children:i.jsx(lw,{children:i.jsxs(I0,{children:[i.jsx(Oe,{path:"/login",element:i.jsx(cw,{})}),i.jsx(Oe,{path:"/auth/callback",element:i.jsx(uw,{})}),i.jsx(Oe,{path:"/setup",element:i.jsx(nd,{children:i.jsx(dw,{})})}),i.jsxs(Oe,{path:"/",element:i.jsx(nd,{children:i.jsx(pw,{})}),children:[i.jsx(Oe,{index:!0,element:i.jsx(Cf,{to:"/dashboard",replace:!0})}),i.jsx(Oe,{path:"dashboard",element:i.jsx(ww,{})}),i.jsx(Oe,{path:"projects",element:i.jsx(jw,{})}),i.jsx(Oe,{path:"crm",element:i.jsx(_w,{})}),i.jsx(Oe,{path:"marketing-social",element:i.jsx(kw,{})}),i.jsx(Oe,{path:"agents",element:i.jsx(Pw,{})}),i.jsx(Oe,{path:"mcp",element:i.jsx(Ow,{})}),i.jsx(Oe,{path:"analytics",element:i.jsx(Rw,{})}),i.jsx(Oe,{path:"settings",element:i.jsx($w,{})})]})]})})})})})}xf(document.getElementById("root")).render(i.jsx(v.StrictMode,{children:i.jsx(Iw,{})}));
